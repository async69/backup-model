(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{1573:function(t,e,a){"use strict";var n=a(3),c=a(1),r=a.n(c),i=a(27),o=a(28),u=a(33),s=a(34),l=a(23);function d(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var f=function(t){Object(u.a)(a,t);var e=d(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(function(t){return r.a.createElement("th",{key:t.path||t.key},t.label)})))}}]),a}(c.Component),m=a(1583),b=a.n(m),p=a(53),g=a(43),h=/[0-9\-+#]/,v=/[^\d\-+#]/g;function O(t){return t.search(h)}function j(t,e,a){var n=!1,c={value:t};t<0&&(n=!0,c.value=-c.value),c.sign=n?"-":"",c.value=Number(c.value).toFixed(e.fraction&&e.fraction.length),c.value=Number(c.value).toString();var r=e.fraction&&e.fraction.lastIndexOf("0"),i=c.value.split("."),o=Object(g.a)(i,2),u=o[0],s=void 0===u?"0":u,l=o[1],d=void 0===l?"":l;return(!d||d&&d.length<=r)&&(d=r<0?"":Number("0."+d).toFixed(r+1).replace("0.","")),c.integer=s,c.fraction=d,function(t,e){t.result="";var a=e.integer.split(e.separator),n=a.join(""),c=n&&n.indexOf("0");if(c>-1)for(;t.integer.length<n.length-c;)t.integer="0"+t.integer;else 0===Number(t.integer)&&(t.integer="");var r=a[1]&&a[a.length-1].length;if(r)for(var i=t.integer.length,o=i%r,u=0;u<i;u++)t.result+=t.integer.charAt(u),!((u-o+1)%r)&&u<i-r&&(t.result+=e.separator);else t.result=t.integer;t.result+=e.fraction&&t.fraction?e.decimal+t.fraction:""}(c,e),"0"!==c.result&&""!==c.result||(n=!1,c.sign=""),!n&&e.maskHasPositiveSign?c.sign="+":n&&e.maskHasPositiveSign?c.sign="-":n&&(c.sign=a&&a.enforceMaskSign&&!e.maskHasNegativeSign?"":"-"),c}var E=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||isNaN(Number(e)))return e;var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",e={},a=t.length,n=O(t);e.prefix=n>0?t.substring(0,n):"";var c=O(t.split("").reverse().join("")),r=a-c,i=t.substring(r,r+1),o=r+("."===i||","===i?1:0);e.suffix=c>0?t.substring(o,a):"",e.mask=t.substring(n,o),e.maskHasNegativeSign="-"===e.mask.charAt(0),e.maskHasPositiveSign="+"===e.mask.charAt(0);var u=e.mask.match(v);return e.decimal=u&&u[u.length-1]||".",e.separator=u&&u[1]&&u[0]||",",u=e.mask.split(e.decimal),e.integer=u[0],e.fraction=u[1],e}(t),c=j(e,n,a);return n.prefix+c.sign+c.result+n.suffix},y=a(1578),S=a(1584);function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var C=function(t){Object(u.a)(a,t);var e=k(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).renderCell=function(t,e,a){if(console.log("loaded",a),e.content)return e.content(t,a);var n=b.a.get(t,e.path),c=y.findIndex(function(t){return t===String(e.path)});return S.findIndex(function(t){return t===String(e.path)})>=0?Object(p.e)(n):c>=0?E("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},t.createKey=function(t,e){return t._id+(e.path||e.key)},t}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.columns;return r.a.createElement("tbody",null,a.map(function(e){return r.a.createElement("tr",{key:e.id},n.map(function(a){return r.a.createElement("td",{key:t.createKey(e,a)},t.renderCell(e,a,t.props.loading))}))}))}}]),a}(c.Component),M=a(1643),D=a(1644),N=a(1645),x=a(109),_=a(1575),w=function(){var t=Object(c.useContext)(x.a),e=t.rootState,a=t.dispatch,n=Object(c.useState)(0),i=Object(g.a)(n,2),o=i[0],u=i[1],s=Object(c.useState)(0),l=Object(g.a)(s,2),d=l[0],f=l[1],m=Object(c.useState)(0),b=Object(g.a)(m,2),p=b[0],h=b[1],v=Object(c.useState)(0),O=Object(g.a)(v,2),j=O[0],E=O[1],y=Object(c.useState)(!1),S=Object(g.a)(y,2),k=S[0],C=S[1],w=Object(c.useState)(!1),R=Object(g.a)(w,2),A=R[0],P=R[1],L=Object(c.useState)({count:0,results:[]}),T=Object(g.a)(L,2),H=T[0],I=T[1],F=Object(c.useState)(0),U=Object(g.a)(F,2),V=U[0],z=U[1],q=Object(c.useState)(""),J=Object(g.a)(q,2),K=J[0],W=J[1];Object(c.useEffect)(function(){Object(_.a)(e)},[e]),Object(c.useEffect)(function(){var t=H.count,e=H.results;0===e.length&&0===t||(E(Math.ceil(t/e.length)),f(e.length),h(t),C(!0))},[K,E,f,h,C]),Object(c.useEffect)(function(){if(V){var t=H.count,e=H.results;d<=e.length&&(E(Math.ceil(t/e.length)),f(e.length),h(t),C(!0))}},[V,H]),Object(c.useEffect)(function(){try{var t=Object(_.b)(e),a=t.results,n=t.amount,c=t.activeTab;if(""!==c?W(c):console.warn("Pass active tab for paginations"),n!==V&&"undefined"!==typeof n&&(z(n),I(a)),"undefined"!==String(a)&&!k){var r=a.count,i=a.results;E(Math.ceil(r/i.length)),f(i.length),h(r),C(!0)}}catch(o){}},[e,z,I]);var B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A||P(!0),u(t),e&&f(e)};return Object(c.useEffect)(function(){o<p&&A&&Object(_.c)({},a,{offset:o,limit:d,onClick:A})},[o,d]),r.a.createElement("div",null,r.a.createElement(M.a,{className:"pagination left",size:"md",color:"primary"},r.a.createElement(D.a,{disabled:0===o},r.a.createElement(N.a,{first:!0,href:"#",onClick:function(){return B(0)}},"First")),r.a.createElement(D.a,null,r.a.createElement(N.a,{previous:!0,disabled:0===o,onClick:function(){return B(o-d)}})),Array(j).fill("").map(function(t,e){return r.a.createElement(D.a,{active:e===Math.floor(o/d)},r.a.createElement(N.a,{onClick:function(){return B(e*d)}},e+1))}),r.a.createElement(D.a,null,r.a.createElement(N.a,{next:!0,onClick:function(){return B(o+d)},disabled:o+d>=p})),r.a.createElement(D.a,{disabled:o+d>=p},r.a.createElement(N.a,{last:!0,onClick:function(){return B((j-1)*d)}},"Last"))))},R=a(1549),A=a(1554),P=a(1619),L=a(177);e.a=Object(L.b)(function(t,e){return Object(n.a)({state:t},e)})(function(t){var e=t.columns,a=t.data,n=t.title,i=t.state,o=t.getLoading;Object(c.useEffect)(function(){"function"===typeof o&&console.log("result",o(i,{isPatch:!0}))},[i,o]);var u=Object(c.useContext)(x.a).rootState;return Object(c.useEffect)(function(){},[u]),console.log(o(i,{isPatch:!0})),r.a.createElement(R.a,{className:"p-2"},r.a.createElement(A.a,{className:"tableHeaders border-0"},r.a.createElement("div",null,""+n?n:"")),r.a.createElement(P.a,{size:"md",responsive:!0,striped:!0},r.a.createElement(f,{columns:e}),r.a.createElement(C,{data:a,columns:e,loading:"fucntion"===typeof o?o(i,{isPatch:!0}):{}}),r.a.createElement(w,null)))})},1575:function(t,e,a){"use strict";a.d(e,"b",function(){return c}),a.d(e,"d",function(){return r}),a.d(e,"a",function(){return i}),a.d(e,"c",function(){return o});var n=a(38),c=function(t){return t.page_values?t.page_values:null},r=function(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;e({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:r,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:c(t)?c(t).amount+1:0,activeTab:i}})}},i=function(t){var e=t.page_values;try{var a=e.pageLimit?e.pageLimit:0;return a||0}catch(n){}},o=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};e({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(t){t.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1582:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},1621:function(t,e,a){"use strict";a.d(e,"a",function(){return l});a(7);var n=a(3),c=a(1),r=a.n(c),i=a(14),o=a(1620),u={modalData:{openModal:!1,data:{},options:{},isDone:!1,title:"",submit:function(t){return null},Component:r.a.createElement(c.Fragment,null),okCallback:function(t){return null},cancelCallback:function(t){return null}}},s=Object(i.c)({name:"modalData",reducers:{toggle:function(t,e){var a=e.payload,c=a.type,i=a.data,u=a.title,s=a.Component,l=a.submit,d=a._toggle,f=a.isDone,m=a.deleteOptions,b=a.options;switch(c){case"OPEN":t.modalData=Object(n.a)({},t.modalData,{openModal:!0,title:u,data:i,Component:r.a.createElement(s,{toggle:d})});break;case"ADD":t.modalData=Object(n.a)({},t.modalData,{openModal:!0,title:u,data:i,submit:l,isDone:f,options:b,Component:r.a.createElement(s,{submit:l,options:b})});break;case"VIEW":t.modalData=Object(n.a)({},t.modalData,{openModal:!0,title:u,data:i,options:b,Component:r.a.createElement(s,{disabled:!0,data:i,isView:!0,options:b})});break;case"EDIT":t.modalData=Object(n.a)({},t.modalData,{openModal:!0,title:u,data:i,isDone:f,options:b,Component:r.a.createElement(s,{isEdit:!0,data:i,submit:l,options:b})});break;case"DELETE":var p=m.okCallback,g=m.cancelCallback,h=m.title,v=m.id,O=m.message;Object(o.a)({okCallback:p,errCallback:g,title:h,id:v,message:O});break;case"CLOSE":t.modalData=Object(n.a)({},t.modalData,{openModal:!1})}}},initialState:u}),l=s.actions.toggle;s.reducer},2417:function(t,e,a){"use strict";a.r(e);var n=a(43),c=a(1),r=a.n(c),i=a(3),o=a(1574),u=a(1555),s=a(1788),l=a(1549),d=a(1554),f=a(1550),m=a(17),b=a(27),p=a(28),g=a(33),h=a(34),v=a(23),O=a(1577),j=a(1576),E=a.n(j),y=a(1556),S=a(1787),k=a(1622);function C(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(v.a)(t);if(e){var c=Object(v.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(h.a)(this,a)}}var M=function(t){Object(g.a)(a,t);var e=C(a);function a(t){var n;return Object(b.a)(this,a),(n=e.call(this,t)).initialState={data:{id:"",name:""},errors:{}},n.state=n.initialState,n.schema={id:E.a.string().allow("").optional(),name:E.a.string().required().label("name")},n}return Object(p.a)(a,[{key:"populateState",value:function(t){var e=Object(i.a)({},this.state,{data:{id:t.id?t.id:"",name:t.name?t.name:""},lockUpdate:!0});this.setState(e)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){return r.a.createElement(l.a,{className:"border-0"},r.a.createElement(d.a,{className:"border-0"},"Header"),r.a.createElement(f.a,null,r.a.createElement(y.a,{onSubmit:this.handleSubmit},r.a.createElement(S.a,null,r.a.createElement(s.a,{md:4,sm:12,xs:12},this.renderInput({name:"name",label:"Name"}))),r.a.createElement(k.a,{align:"center"},this.renderButton("Save")))))}}]),a}(O.a),D=a(1582),N=a(1573),x=a(1581),_=a(1579),w=a(53),R=function(t){var e=t.costingMethods,a=t.addCostingMethod,b=(t.deleteCostingMethod,t.doneAdd),p=t.doneEdit,g=Object(c.useReducer)(x.c,x.b),h=Object(n.a)(g,2),v=h[0],O=h[1],j=[{path:"name",label:"Name"},{path:"updated_at",label:"Last Modified"},{key:"view",content:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"primary",onClick:function(){Object(x.a)({type:"VIEW",Component:M,data:t,title:"View Costing Method"},O)}},r.a.createElement(m.M,null)))}}];return Object(c.useEffect)(function(){(b||p)&&Object(x.a)({type:"CLOSE"},O)},[b,p]),r.a.createElement("div",null,r.a.createElement(o.a,{title:"Costing Method",breadcrumbs:[{name:"General Setup",active:!0}]},r.a.createElement(_.a,{data:v.data,openModal:v.openModal,component:v.Component,title:v.title,toggle:x.a,dispatch:O}),r.a.createElement(s.a,{align:"right",className:"mb-1 pl-3 pr-3"},r.a.createElement(u.a,{onClick:function(){return Object(x.a)({type:"ADD",Component:M,submit:a,data:{},title:"New Costing Method"},O)},outline:!0,size:"sm"},"New Costing Method")&&!1),r.a.createElement(l.a,{className:"border-0"},r.a.createElement(s.a,{md:12,sm:12,xs:12},r.a.createElement(d.a,{className:"border-0"},"Costing Method")),r.a.createElement(f.a,null,r.a.createElement(N.a,{columns:j,data:Object(D.a)(e.map(function(t){return Object(i.a)({},t,{updated_at:Object(w.d)(t.updated_at)})}))})))))},A=a(86),P=a(177),L=a(102),T=a(19),H=a(1621);e.default=Object(P.b)(function(t){return{fetchStatus:Object(A.j)(t),addStatus:Object(A.f)(t),costingMethods:Object(A.g)(t),editStatus:Object(A.i)(t),deleteStatus:Object(A.h)(t)}},function(t){return{fetchCostingMethods:function(){return t(Object(A.c)())},addCostingMethod:function(e){return t(Object(A.a)(e))},editCostingMethod:function(e){return t(Object(A.b)(e))},deleteCostingMethod:function(e){return t(Object(A.d)(e))}}})(function(t){var e=t.fetchStatus,a=t.addStatus,i=t.fetchCostingMethods,o=t.addCostingMethod,u=t.editStatus,s=t.editCostingMethod,l=t.deleteStatus,d=t.deleteCostingMethod,f=t.costingMethods,m=Object(c.useState)(!0),b=Object(n.a)(m,2),p=b[0],g=b[1],h=Object(c.useState)(!0),v=Object(n.a)(h,2),O=v[0],j=v[1],E=Object(c.useState)(!0),y=Object(n.a)(E,2),S=y[0],k=y[1],C=Object(c.useState)(!0),M=Object(n.a)(C,2),D=M[0],N=M[1];Object(c.useEffect)(function(){g(!1),i()},[i,g]),Object(c.useEffect)(function(){e.status!==T.e.failure||p||(L.toast.error("Failed fetching account types"),g(!0))},[e,g]),Object(c.useEffect)(function(){var t=a.status;t!==T.e.failure||O?t!==T.e.success||O||(L.toast.success("Added Account Type"),j(!0)):j(!0)},[a,j]),Object(c.useEffect)(function(){var t=u.status;t!==T.e.failure||S?t!==T.e.success||S||(L.toast.success("Edited Account Type"),k(!0)):k(!0)},[u,k]),Object(c.useEffect)(function(){var t=l.status;t!==T.e.failure||D?t!==T.e.success||D||(L.toast.success("Deleted Account Type"),N(!0)):N(!0)},[l,N]);return r.a.createElement(R,{doneAdd:a.status===T.e.success&&!O,addCostingMethod:function(t){j(!1);var e={name:String(t.name)};o(e)},doneEdit:u.status===T.e.success&&!S,editCostingMethod:function(t){k(!1);var e={id:String(t.id),name:String(t.name)};s(e)},doneDelete:l.status===T.e.success&&!D,deleteCostingMethod:function(t){N(!1),d(t)},_toggle:H.a,costingMethods:f})})}}]);
//# sourceMappingURL=84.4044b9fd.chunk.js.map