(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1573:function(e,t,n){"use strict";var a=n(3),r=n(1),c=n.n(r),o=n(27),i=n(28),s=n(33),u=n(34),l=n(23);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var f=function(e){Object(s.a)(n,e);var t=d(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return c.a.createElement("thead",null,c.a.createElement("tr",null,this.props.columns.map(function(e){return c.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),n}(r.Component),m=n(1583),p=n.n(m),b=n(53),g=n(43),v=/[0-9\-+#]/,h=/[^\d\-+#]/g;function O(e){return e.search(v)}function j(e,t,n){var a=!1,r={value:e};e<0&&(a=!0,r.value=-r.value),r.sign=a?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var c=t.fraction&&t.fraction.lastIndexOf("0"),o=r.value.split("."),i=Object(g.a)(o,2),s=i[0],u=void 0===s?"0":s,l=i[1],d=void 0===l?"":l;return(!d||d&&d.length<=c)&&(d=c<0?"":Number("0."+d).toFixed(c+1).replace("0.","")),r.integer=u,r.fraction=d,function(e,t){e.result="";var n=t.integer.split(t.separator),a=n.join(""),r=a&&a.indexOf("0");if(r>-1)for(;e.integer.length<a.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var c=n[1]&&n[n.length-1].length;if(c)for(var o=e.integer.length,i=o%c,s=0;s<o;s++)e.result+=e.integer.charAt(s),!((s-i+1)%c)&&s<o-c&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(a=!1,r.sign=""),!a&&t.maskHasPositiveSign?r.sign="+":a&&t.maskHasPositiveSign?r.sign="-":a&&(r.sign=n&&n.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},n=e.length,a=O(e);t.prefix=a>0?e.substring(0,a):"";var r=O(e.split("").reverse().join("")),c=n-r,o=e.substring(c,c+1),i=c+("."===o||","===o?1:0);t.suffix=r>0?e.substring(i,n):"",t.mask=e.substring(a,i),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var s=t.mask.match(h);return t.decimal=s&&s[s.length-1]||".",t.separator=s&&s[1]&&s[0]||",",s=t.mask.split(t.decimal),t.integer=s[0],t.fraction=s[1],t}(e),r=j(t,a,n);return a.prefix+r.sign+r.result+a.suffix},y=n(1578),_=n(1584);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var S=function(e){Object(s.a)(n,e);var t=k(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,n){if(console.log("loaded",n),t.content)return t.content(e,n);var a=p.a.get(e,t.path),r=y.findIndex(function(e){return e===String(t.path)});return _.findIndex(function(e){return e===String(t.path)})>=0?Object(b.e)(a):r>=0?E("#,###.00",a,{enforceMaskSign:!0}):a?String(a):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return c.a.createElement("tbody",null,n.map(function(t){return c.a.createElement("tr",{key:t.id},a.map(function(n){return c.a.createElement("td",{key:e.createKey(t,n)},e.renderCell(t,n,e.props.loading))}))}))}}]),n}(r.Component),N=n(1643),T=n(1644),x=n(1645),C=n(109),V=n(1575),D=function(){var e=Object(r.useContext)(C.a),t=e.rootState,n=e.dispatch,a=Object(r.useState)(0),o=Object(g.a)(a,2),i=o[0],s=o[1],u=Object(r.useState)(0),l=Object(g.a)(u,2),d=l[0],f=l[1],m=Object(r.useState)(0),p=Object(g.a)(m,2),b=p[0],v=p[1],h=Object(r.useState)(0),O=Object(g.a)(h,2),j=O[0],E=O[1],y=Object(r.useState)(!1),_=Object(g.a)(y,2),k=_[0],S=_[1],D=Object(r.useState)(!1),P=Object(g.a)(D,2),w=P[0],I=P[1],A=Object(r.useState)({count:0,results:[]}),R=Object(g.a)(A,2),L=R[0],F=R[1],G=Object(r.useState)(0),M=Object(g.a)(G,2),z=M[0],H=M[1],U=Object(r.useState)(""),B=Object(g.a)(U,2),J=B[0],q=B[1];Object(r.useEffect)(function(){Object(V.a)(t)},[t]),Object(r.useEffect)(function(){var e=L.count,t=L.results;0===t.length&&0===e||(E(Math.ceil(e/t.length)),f(t.length),v(e),S(!0))},[J,E,f,v,S]),Object(r.useEffect)(function(){if(z){var e=L.count,t=L.results;d<=t.length&&(E(Math.ceil(e/t.length)),f(t.length),v(e),S(!0))}},[z,L]),Object(r.useEffect)(function(){try{var e=Object(V.b)(t),n=e.results,a=e.amount,r=e.activeTab;if(""!==r?q(r):console.warn("Pass active tab for paginations"),a!==z&&"undefined"!==typeof a&&(H(a),F(n)),"undefined"!==String(n)&&!k){var c=n.count,o=n.results;E(Math.ceil(c/o.length)),f(o.length),v(c),S(!0)}}catch(i){}},[t,H,F]);var K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;w||I(!0),s(e),t&&f(t)};return Object(r.useEffect)(function(){i<b&&w&&Object(V.c)({},n,{offset:i,limit:d,onClick:w})},[i,d]),c.a.createElement("div",null,c.a.createElement(N.a,{className:"pagination left",size:"md",color:"primary"},c.a.createElement(T.a,{disabled:0===i},c.a.createElement(x.a,{first:!0,href:"#",onClick:function(){return K(0)}},"First")),c.a.createElement(T.a,null,c.a.createElement(x.a,{previous:!0,disabled:0===i,onClick:function(){return K(i-d)}})),Array(j).fill("").map(function(e,t){return c.a.createElement(T.a,{active:t===Math.floor(i/d)},c.a.createElement(x.a,{onClick:function(){return K(t*d)}},t+1))}),c.a.createElement(T.a,null,c.a.createElement(x.a,{next:!0,onClick:function(){return K(i+d)},disabled:i+d>=b})),c.a.createElement(T.a,{disabled:i+d>=b},c.a.createElement(x.a,{last:!0,onClick:function(){return K((j-1)*d)}},"Last"))))},P=n(1549),w=n(1554),I=n(1619),A=n(177);t.a=Object(A.b)(function(e,t){return Object(a.a)({state:e},t)})(function(e){var t=e.columns,n=e.data,a=e.title,o=e.state,i=e.getLoading;Object(r.useEffect)(function(){"function"===typeof i&&console.log("result",i(o,{isPatch:!0}))},[o,i]);var s=Object(r.useContext)(C.a).rootState;return Object(r.useEffect)(function(){},[s]),console.log(i(o,{isPatch:!0})),c.a.createElement(P.a,{className:"p-2"},c.a.createElement(w.a,{className:"tableHeaders border-0"},c.a.createElement("div",null,""+a?a:"")),c.a.createElement(I.a,{size:"md",responsive:!0,striped:!0},c.a.createElement(f,{columns:t}),c.a.createElement(S,{data:n,columns:t,loading:"fucntion"===typeof i?i(o,{isPatch:!0}):{}}),c.a.createElement(D,null)))})},1575:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});var a=n(38),r=function(e){return e.page_values?e.page_values:null},c=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof n){if(0===n.count)return null;t({type:a.a.UPDATE,stateName:"page_values",payload:{results:n,options:c,pageLimit:n.length?5*Math.ceil(n.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:o}})}},o=function(e){var t=e.page_values;try{var n=t.pageLimit?t.pageLimit:0;return n||0}catch(a){}},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:a.a.UPDATE,stateName:"page_values",payload:{options:n}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1580:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=void 0;return n.length>0&&(r=e.filter(function(e){var r=a?"":"^";try{return n&&String(e[t]).match(new RegExp(r+n,"gi"))}catch(c){console.error("Tag does not exist: ".concat(String(c)))}return null})),"undefined"===typeof r?e:r},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posting_date",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=void 0;return n.length>0&&a.length>0&&(r=e.filter(function(e){try{var r=new Date(e[t]).getTime(),c=new Date(n).getTime(),o=new Date(a).getTime();return n&&a&&r<=o&&r>=c}catch(i){console.error("Tag does not exist: ".concat(String(i)))}return null})),"undefined"===typeof r?e:r},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"country",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addresses",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=void 0;return n.length>0&&(c=e.filter(function(e){var c=r?"":"^";try{var o=e[a].findIndex(function(e){return e[t].match(new RegExp(c+n,"gi"))});return n&&o>=0}catch(i){console.error("Tag does not exist: ".concat(String(i)))}return null})),"undefined"===typeof c?e:c}},1582:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},1603:function(e,t,n){"use strict";var a=n(7),r=n(43),c=n(3),o=n(1),i=n.n(o),s=n(1619),u=n(1557),l=n(1555),d=n(17),f="ADDING_LINE",m={addCount:0,status:"IDLE",hasEdit:!0,hasDelete:!0,_data:[]},p="_ADD",b="UPDATE",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(c.a)({},e,{addCount:e.addCount+1,status:f});case b:return Object(c.a)({},e,{_data:t.payload});default:return e}},v=function(e){return e({type:p})},h=n(1576),O=n.n(h),j=n(1583),E=n.n(j),y=function(){return Math.random().toString(36).substring(7)},_=function(e,t){var n={};for(var a in e)n[a]="";return Object(c.a)({},n,{_id:t})},k="ADDING_LINE",S="IDLE",N="EDIT",T="SAVED",x="CANCELED",C=function(e){var t=e.data,n=e.columns,f=e.hasEdit,m=e.hasDelete,p=e.status,g=e.addCount,v=e.schema,h=e.dispatch,j=e.callback,C=Object(o.useState)([]),V=Object(r.a)(C,2),D=V[0],P=V[1],w=Object(o.useState)(S),I=Object(r.a)(w,2),A=I[0],R=I[1],L=Object(o.useState)(t.map(function(){return!1})),F=Object(r.a)(L,2),G=F[0],M=F[1],z=Object(o.useState)({}),H=Object(r.a)(z,2),U=H[0],B=H[1];Object(o.useEffect)(function(){S!==A&&T!==A&&x!==A||R(p)},[p,R,g]),Object(o.useEffect)(function(){if(t.length>0&&0===D.length){var e=t.map(function(e){var t={};for(var a in e){var r=n.find(function(e){return e.tag===a});r&&(t[r.tag]=E.a.get(e,r.tag))}return Object(c.a)({},t,{_id:y()})});M(e.map(function(){return!1})),P(e)}},[t,P]),Object(o.useEffect)(function(){var e;(e=D,function(t){t({type:b,payload:e})})(h),j(D)},[D,h]);var J=Object(o.useState)({}),q=Object(r.a)(J,2),K=q[0],Y=q[1],W=Object(o.useState)({}),Q=Object(r.a)(W,2),X=Q[0],Z=Q[1],$=Object(o.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ae=Object(o.useState)({}),re=Object(r.a)(ae,2),ce=re[0],oe=re[1];Object(o.useEffect)(function(){var e={};n.forEach(function(t){"select"===t.type&&(e[t.tag]=t.options)}),oe(e)},[oe]),Object(o.useEffect)(function(){if(A===k){var e=y();P(D.concat(_(D[0],e))),ie(_(D[0],e)),M(G.concat(!0))}},[A]);var ie=function(e){Z(v),Y(Object(c.a)({},U,e))};Object(o.useEffect)(function(){var e=O.a.validate(K,X,{abortEarly:!1}).error;e?(console.warn(e),ne(!1)):Object.values(K).length>1&&ne(!0)},[K]);var se=function(e){var t=e.currentTarget,n=t.name,r=t.value,o=t.callback;Y(Object(c.a)({},K,Object(a.a)({},n,r)));o({name:n,value:r,setOptions:function(e,t){var n=ce;Object.keys(ce).findIndex(function(t){return t===e})>=0&&(n[e]=t,oe(n))},options:ce,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.map(function(e){var n=e.name,a=e.value;return t[n]=a,null}),Y(Object(c.a)({},K,t))},formData:K})};return Object(o.useEffect)(function(){var e={};n.forEach(function(t){t.defaultValue&&(e=Object(c.a)({},e,Object(a.a)({},t.tag,t.defaultValue)))}),Object.values(e).length>0&&(Y(Object(c.a)({},K,e)),B(e))},[n,Y]),i.a.createElement(s.a,{size:"md",responsive:!0,striped:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,n.filter(function(e){return!Boolean(e.isView)}).map(function(e){return i.a.createElement("th",null,e.label)}))),i.a.createElement("tbody",null,D.map(function(e,t){return i.a.createElement("tr",null,n.filter(function(e){return!Boolean(e.isView)}).map(function(n){return G[t]&&!n.noEdit?i.a.createElement("td",null,"select"===n.type?i.a.createElement(u.a,{type:n.type,name:n.tag,value:E.a.get(K,n.tag),onChange:function(e){var t=e.currentTarget,a=t.name,r=t.value,c=n.callback?n.callback:function(){return null};se({currentTarget:{name:a,value:r,callback:c}})},disabled:n.disabled},i.a.createElement("option",null),"server"===n.optionsFrom?ce[n.tag].map(function(e){return i.a.createElement("option",{value:e.id},e.name)}):ce[n.tag].map(function(e){return i.a.createElement("option",{value:e},e)})):i.a.createElement(u.a,{type:n.type?n.type:"text",name:n.tag,disabled:n.disabled,value:E.a.get(K,n.tag),onChange:function(e){var t=e.currentTarget,a=t.name,r=t.value,c=n.callback?n.callback:function(){return null};se({currentTarget:{name:a,value:r,callback:c}})}})):i.a.createElement("td",null,function(e,t){if("server"!==t.optionsFrom)return e[t.tag];var n=t.options.find(function(n){return String(n.id)===String(e[t.tag])});return n?n.name:void 0}(e,n))}),f?i.a.createElement("td",null,G[t]?i.a.createElement("div",null,i.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){P(D.map(function(e){return e._id===K._id?Object(c.a)({_id:y()},K):e})),M(G.map(function(){return!1})),R(T)},disabled:!te},"Save"),i.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){!function(){if(A===k){var e=D.findIndex(function(e){return e._id===K._id});e>=0&&(P(D.filter(function(t,n){return e!==n})),M(G.filter(function(t,n){return e!==n}))),ne(!0)}else M(G.map(function(){return!1}));R(x),Z({})}()}},"Cancel")):i.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){M(G.map(function(e,n){return n===t})),ie(e),R(N)}},i.a.createElement(d.s,null))):i.a.createElement(i.a.Fragment,null),m?i.a.createElement("td",null,i.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){return function(e){var t=D.findIndex(function(t){return t._id===e});t>=0&&(P(D.filter(function(e,n){return n!==t})),M(G.filter(function(e,n){return n!==t})),R(x))}(e._id)}},i.a.createElement(d.p,null))):i.a.createElement(i.a.Fragment,null))})))},V=n(1788),D=function(e){var t=e.data,n=e.columns,a=e.callback,c=e.schema,s=e.lineTag,u=e.disabled,d=e.startForm,f=Object(o.useReducer)(g,m),p=Object(r.a)(f,2),b=p[0],h=p[1],O=Object(o.useState)(!1),j=Object(r.a)(O,2),E=j[0],y=j[1];Object(o.useEffect)(function(){d&&v(h)},[d,h]);return i.a.createElement("div",null,u?i.a.createElement(i.a.Fragment,null):i.a.createElement(V.a,{align:"right",className:"mb-1 pl-3 pr-3"},i.a.createElement(l.a,{className:"m-1 align-right",size:"sm",outline:!0,color:"info",onClick:function(){return v(h)}},s||"Add Line")),i.a.createElement(C,Object.assign({},b,{dispatch:h,data:t,schema:c,columns:n,callback:function(e){!E&&e.length>0&&Object.values(e[0]).length>1?(a(e),y(!0)):b._data.length>=e.length&&a(e)},hasEdit:!u,hasDelete:!u})))};n.d(t,"a",function(){return C}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return g}),n.d(t,"b",function(){return D})},1641:function(e,t,n){"use strict";var a=n(15),r=n(22),c=n(1),o=n.n(c),i=n(180),s=n(2),u=n.n(s),l=n(16),d=n.n(l),f=n(13),m={tag:f.p,activeTab:u.a.any,className:u.a.string,cssModule:u.a.object},p={activeTabId:u.a.any},b=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={activeTab:n.props.activeTab},n}Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null};var n=t.prototype;return n.getChildContext=function(){return{activeTabId:this.state.activeTab}},n.render=function(){var e=this.props,t=e.className,n=e.cssModule,r=e.tag,c=Object(f.m)(this.props,Object.keys(m)),i=Object(f.l)(d()("tab-content",t),n);return o.a.createElement(r,Object(a.a)({},c,{className:i}))},t}(c.Component);Object(i.polyfill)(b),t.a=b,b.propTypes=m,b.defaultProps={tag:"div"},b.childContextTypes=p},1642:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n(15),r=n(20),c=n(1),o=n.n(c),i=n(2),s=n.n(i),u=n(16),l=n.n(u),d=n(13),f={tag:d.p,className:s.a.string,cssModule:s.a.object,tabId:s.a.any},m={activeTabId:s.a.any};function p(e,t){var n=e.className,c=e.cssModule,i=e.tabId,s=e.tag,u=Object(r.a)(e,["className","cssModule","tabId","tag"]),f=Object(d.l)(l()("tab-pane",n,{active:i===t.activeTabId}),c);return o.a.createElement(s,Object(a.a)({},u,{className:f}))}p.propTypes=f,p.defaultProps={tag:"div"},p.contextTypes=m},2037:function(e,t,n){"use strict";var a,r,c=n(3),o=n(43),i=n(1),s=n.n(i),u=n(1574),l=n(1555),d=n(1788),f=n(1549),m=n(7),p=n(112),b=n.n(p),g=n(178),v=n(27),h=n(28),O=n(179),j=n(33),E=n(34),y=n(23),_=n(1550),k=n(1556),S=n(1787),N=n(1577),T=n(1603),x=n(1576),C=n.n(x),V=(a={id:C.a.string().allow("").optional(),number:C.a.string().allow("").optional(),name:C.a.string(),tin_number:C.a.string(),currency:C.a.string(),vendor_posting_group:C.a.string(),vat_posting_group:C.a.string(),vendor_type:C.a.string(),remarks:C.a.string().allow("").optional()},Object(m.a)(a,"contacts",C.a.array().items(C.a.object()).min(0)),Object(m.a)(a,"addresses",C.a.array().items(C.a.object()).min(1)),a),D={data:(r={id:"",number:"",name:"",tin_number:"",currency:"",vendor_posting_group:"",vat_posting_group:"",vendor_type:"",remarks:""},Object(m.a)(r,"addresses",[]),Object(m.a)(r,"contacts",[]),r),lineCounter:1,errors:{}},P=function(e){return e.contacts.map(function(e){return{_id:e.id,name:e.name,office_telephone_number:e.office_telephone_number,mob_number:e.mob_number,email:e.email,remarks:e.remarks}})},w={_id:C.a.any().allow("").optional(),country:C.a.string(),region:C.a.string(),city:C.a.string(),postal_code:C.a.string(),is_head_office:C.a.string(),office_telephone_no:C.a.string(),remarks:C.a.string().allow("").optional()},I=function(e){var t=e.countries,n=e.cities;return[{tag:"country",label:"Country",type:"select",options:t,optionsFrom:"server"},{tag:"region",label:"Region",type:"select",options:e.regions,optionsFrom:"server"},{tag:"city",label:"Cities",type:"select",options:n,optionsFrom:"server"},{tag:"postal_code",label:"Postal Code",type:"text"},{tag:"is_head_office",label:"Is Head Office",type:"select",options:["Yes","No"]},{tag:"office_telephone_no",label:"Office Telephone Number",type:"text"},{tag:"remarks",label:"Remarks",type:"text"}]},A={_id:C.a.any().allow("").optional(),name:C.a.string(),office_telephone_number:C.a.string(),mob_number:C.a.string(),email:C.a.string(),remarks:C.a.string().allow("").optional()},R=n(177),L=n(67);function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(y.a)(e);if(t){var r=Object(y.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}var G=function(e){Object(j.a)(n,e);var t=F(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).doSubmit=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.submit(a.state.data);case 1:case"end":return e.stop()}},e)})),a.initialState=D,a.state=JSON.parse(JSON.stringify(a.initialState)),a.schema=V,a.populateState=a.populateState.bind(Object(O.a)(a)),a.updateAddressLines=a.updateAddressLines.bind(Object(O.a)(a)),a.updateContactLines=a.updateContactLines.bind(Object(O.a)(a)),a.lineMapper=a.lineMapper.bind(Object(O.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"lineMapper",value:function(){return this.props.isEdit||this.props.isView?function(e){return e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"addresses"].map(function(e){return{country:e.country.id,region:e.region.id,city:e.city.id,postal_code:e.postal_code,is_head_office:e.is_head_office?"Yes":"No",office_telephone_no:e.office_telephone_no,remarks:e.remarks}})}(this.props.data,"addresses"):[]}},{key:"populateState",value:function(e){var t=function(e,t){var n;return n={id:e.id?e.id:"",number:e.document_number,name:e.vendor_name,tin_number:e.tin_number,currency:e.currency,vendor_posting_group:e.vendor_posting_group_detail.id,vat_posting_group:e.vat_posting_group_detail.id,vendor_type:e.vendor_type_detail.id,remarks:e.remarks},Object(m.a)(n,"addresses",t()),Object(m.a)(n,"contacts",P(e)),n}(e,this.lineMapper);this.setState({lockUpdate:!0,data:t})}},{key:"updateAddressLines",value:function(e){(e.length>0||this.state.data.addresses.length>0)&&this.setState({data:Object(c.a)({},this.state.data,Object(m.a)({},"addresses",e))})}},{key:"updateContactLines",value:function(e){(e.length>0||this.state.data.contacts.length>0)&&this.setState({data:Object(c.a)({},this.state.data,Object(m.a)({},"contacts",e))})}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"render",value:function(){var e=this.props.options,t=e.vatPostingGroups,n=e.vendorPostingGroups,a=e.currencies,r=e.vendorTypes;return s.a.createElement(f.a,{className:"border-0"},s.a.createElement(_.a,null,s.a.createElement(k.a,{onSubmit:this.handleSubmit},s.a.createElement(S.a,null,this.props.isView&&s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderInput({name:"number",label:"Vendor Number"})),s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderInput({name:"name",label:"Vendor Name"})),s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderInput({name:"tin_number",label:"Tin Number"})),s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderSelect({name:"currency",label:"Currency",options:a,optionsFrom:"server"})),s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderSelect({name:"vendor_posting_group",label:"Vendor Posting Group",options:n,optionsFrom:"server"})),s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderSelect({name:"vat_posting_group",label:"VAT Posting Group",options:t,optionsFrom:"server"})),s.a.createElement(d.a,{md:3,sm:12,xs:12},this.renderSelect({name:"vendor_type",label:"Venor Type",options:r,optionsFrom:"server"})),s.a.createElement(d.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea")),s.a.createElement(d.a,{md:12,sm:12,xs:12},"Address Line",s.a.createElement(T.b,{columns:I(this.props.options),disabled:this.props.disabled,data:this.state.data.addresses.length>0?this.state.data.addresses:[],callback:this.updateAddressLines,schema:w,startForm:this.props.isAdd})),s.a.createElement(d.a,{md:12,sm:12,xs:12},"Contact Line",s.a.createElement(T.b,{columns:[{tag:"name",label:"Name",type:"text"},{tag:"office_telephone_number",label:"Office Telephone Number",type:"text"},{tag:"mob_number",label:"Mobile Number",type:"text"},{tag:"email",label:"Email",type:"text"},{tag:"remarks",label:"Remarks",type:"text"}],disabled:this.props.disabled,data:this.state.data.contacts,callback:this.updateContactLines,schema:A,startForm:this.props.isAdd})),s.a.createElement(d.a,{size:"xl",align:"right"},this.renderButton("Save"))))))}}]),n}(N.a),M=Object(R.b)(L.e)(G),z=n(17),H=n(1582),U=n(1573),B=n(1581),J=n(1579),q=function(e){var t=e.vendors,n=e.addVendor,a=e.editVendor,r=e.deleteVendor,c=e.doneAdd,m=e.doneEdit,p=e.countries,b=e.cities,g=e.regions,v=e.vatPostingGroups,h=e.vendorPostingGroups,O=e.currencies,j=e.vendorTypes,E=Object(i.useReducer)(B.c,B.b),y=Object(o.a)(E,2),_=y[0],k=y[1],S=[{path:"document_number",label:"Vendor Number"},{path:"vendor_name",label:"Vendor Name"},{path:"tin_number",label:"Tin Number "},{path:"vendor_posting_group_detail.name",label:"Vendor Posting Group"},{path:"vat_posting_group_detail.name",label:"VAT Posting Group"},{path:"vendor_type_detail.name",label:"Vendor Type"},{key:"view",content:function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(B.a)({type:"VIEW",Component:M,data:e,title:"View Vendor",options:{countries:p,cities:b,regions:g,vatPostingGroups:v,vendorPostingGroups:h,currencies:O,vendorTypes:j}},k)}},s.a.createElement(z.M,null)),s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(B.a)({type:"EDIT",Component:M,submit:a,isEdit:!0,data:e,title:"Edit Vendor",options:{countries:p,cities:b,regions:g,vatPostingGroups:v,vendorPostingGroups:h,currencies:O,vendorTypes:j}},k)}},s.a.createElement(z.s,null)),s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(B.a)({type:"DELETE",deleteOptions:{okCallback:N,title:"Are you sure?",id:e.id,message:""}},k)}},s.a.createElement(z.p,null)))}}],N=function(e){r(e)};return Object(i.useEffect)(function(){(c||m)&&Object(B.a)({type:"CLOSE"},k)},[c,m]),s.a.createElement("div",null,s.a.createElement(u.a,null,s.a.createElement(J.a,{data:_.data,openModal:_.openModal,component:_.Component,toggle:B.a,dispatch:k,title:_.title}),s.a.createElement(d.a,{align:"right",className:"mb-1 pl-3 pr-3"},s.a.createElement(l.a,{onClick:function(){Object(B.a)({type:"ADD",Component:M,submit:n,isEdit:!0,title:"Add Vendor",data:{},options:{countries:p,cities:b,regions:g,vatPostingGroups:v,vendorPostingGroups:h,currencies:O,vendorTypes:j}},k)},outline:!0,size:"sm"},"New Vendor")),s.a.createElement(f.a,{className:"border-0"},s.a.createElement(U.a,{title:"Vendors",columns:S,data:Object(H.a)(t)}))))},K=n(102),Y=n(19),W=n(54),Q=n(36),X=n(64),Z=n(58),$=n(45),ee=n(55),te=n(70),ne=n(82),ae=n(60),re=n(84),ce=n(1580),oe=n(1557),ie=n(1575),se=n(2059);t.a=Object(R.b)(function(e,t){return Object(c.a)({},t,{fetchStatus:Object(L.j)(e),addStatus:Object(L.g)(e),vendors:Object(L.k)(e),editStatus:Object(L.i)(e),deleteStatus:Object(L.h)(e),countries:Object(X.g)(e),cities:Object($.g)(e),regions:Object(Z.j)(e),vatPostingGroups:Object(te.j)(e),vendorPostingGroups:Object(ne.j)(e),currencies:Object(ee.g)(e),vendorTypes:Object(re.j)(e),companyID:Object(ae.c)(e)})},function(e){return{fetchVendors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(Object(L.c)(t))},addVendor:function(t){return e(Object(L.a)(t))},editVendor:function(t){return e(Object(L.b)(t))},deleteVendor:function(t){return e(Object(L.d)(t))}}})(function(e){var t=e.fetchStatus,n=e.addStatus,a=e.fetchVendors,r=e.addVendor,u=e.editStatus,l=e.editVendor,d=e.deleteStatus,f=e.deleteVendor,m=e.vendors,p=e.activeTab,b=e.countries,g=e.cities,v=e.regions,h=e.vatPostingGroups,O=e.vendorPostingGroups,j=e.currencies,E=e.vendorTypes,y=e.companyID,_=Object(i.useState)([]),k=Object(o.a)(_,2),S=k[0],N=k[1],T=Object(i.useState)(!0),x=Object(o.a)(T,2),C=x[0],V=x[1],D=Object(i.useState)(!0),P=Object(o.a)(D,2),w=P[0],I=P[1],A=Object(i.useState)(!0),R=Object(o.a)(A,2),L=R[0],F=R[1],G=Object(i.useState)(!0),M=Object(o.a)(G,2),z=M[0],H=M[1],U=Object(i.useState)("document_number"),B=Object(o.a)(U,2),J=B[0],X=B[1],Z=Object(i.useContext)(W.b),$=Z.rootState,ee=Z.dispatch;Object(i.useEffect)(function(){try{var e=Object(ie.b)($).options,t=e.offset,n=e.limit;e.onClick&&a([{key:"offset",value:t},{key:"limit",value:n}])}catch(r){}},[Object(ie.b)($)]),Object(i.useEffect)(function(){N(m)},[m,N]);var te=function(){var e=Object(i.useState)(J),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)(function(){return X(n)},[n]),s.a.createElement(s.a.Fragment,null,s.a.createElement(oe.a,{type:"select",onChange:function(e){var t=e.currentTarget.value;return a(t)}},s.a.createElement("option",{value:"document_number"},"By Vendor Number"),s.a.createElement("option",{value:"vendor_name"},"Vendor Name"),s.a.createElement("option",{value:"tin_number"},"Tin Number"),s.a.createElement("option",{value:"vendor_type"},"Vendor Type"),s.a.createElement("option",{value:"contact_name"},"Contact Name")))};Object(i.useEffect)(function(){Object(Q.e)({},ee,!1),Object(Q.a)({},ee,te)},[ee]);var ne=Object(i.useContext)(W.c).searchValue;Object(i.useEffect)(function(){var e=[];e="contact_name"===J?Object(ce.c)(m,"name",ne,"contacts"):Object(ce.b)(m.map(function(e){return Object(c.a)({},e,{vendor_type:e.vendor_type_detail.name})}),J,ne,"document_number"===J),N(e)},[ne,N,J]),Object(i.useEffect)(function(){V(!1),a()},[a,V]),Object(i.useEffect)(function(){var e=t.status,n=t.response;e!==Y.e.failure||C?p===se.activeTabs.VENDOR&&Object(ie.d)($,ee,n,"",p):(K.toast.error("Failed fetching vendors"),V(!0))},[t,V,p]),Object(i.useEffect)(function(){var e=n.status;e!==Y.e.failure||w?e!==Y.e.success||w||(K.toast.success("Added Vendor"),I(!0)):I(!0)},[n,I]),Object(i.useEffect)(function(){var e=u.status;e!==Y.e.failure||L?e!==Y.e.success||L||(K.toast.success("Edited Vendor"),F(!0)):F(!0)},[u,F]),Object(i.useEffect)(function(){var e=d.status;e!==Y.e.failure||z?e!==Y.e.success||z||(K.toast.success("Deleted Vendor"),H(!0)):H(!0)},[d,H,z]);return s.a.createElement(q,{doneAdd:n.status===Y.e.success&&!w,addVendor:function(e){I(!1);var t={name:e.name,tin_number:e.tin_number,currency:e.currency,vendor_posting_group:e.vendor_posting_group,vat_posting_group:e.vat_posting_group,vendor_type:e.vendor_type,remarks:e.remarks,contacts:e.contacts,addresses:e.addresses,company:y};r(t)},doneEdit:u.status===Y.e.success&&!L,editVendor:function(e){F(!1);var t={id:e.id,name:e.name,tin_number:e.tin_number,currency:e.currency,vendor_posting_group:e.vendor_posting_group,vat_posting_group:e.vat_posting_group,vendor_type:e.vendor_type,remarks:e.remarks,contacts:e.contacts,addresses:e.addresses,company:y};l(t)},doneDelete:d.status===Y.e.success&&!z,deleteVendor:function(e){H(!1),f(e)},vendors:S,countries:b,cities:g,regions:v,vatPostingGroups:h,vendorPostingGroups:O,currencies:j,vendorTypes:E})})},2059:function(e,t,n){"use strict";n.r(t),n.d(t,"activeTabs",function(){return b});var a=n(43),r=n(1),c=n.n(r),o=n(1547),i=n(1548),s=n(1558),u=n(1641),l=n(1642),d=n(1787),f=n(1788),m=n(1574),p=n(2037),b={VENDOR:"1"};t.default=function(){var e=Object(r.useState)("1"),t=Object(a.a)(e,2),n=t[0],g=t[1];return c.a.createElement("div",null,c.a.createElement(m.a,null,c.a.createElement(o.a,{tabs:!0,className:"mb-2"},c.a.createElement(i.a,null,c.a.createElement(s.a,{className:"1"===n?"activepageTabBlue":"notactivePageTabBlue",onClick:function(){var e;e=b.VENDOR,n!==e&&g(e)}},"Vendors"))),c.a.createElement(u.a,{activeTab:n},c.a.createElement(l.a,{tabId:b.VENDOR},c.a.createElement(d.a,null,c.a.createElement(f.a,null,c.a.createElement(p.a,{activeTab:n})))))))}}}]);
//# sourceMappingURL=39.aed5e113.chunk.js.map