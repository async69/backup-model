(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{1573:function(e,t,a){"use strict";var n=a(3),r=a(1),i=a.n(r),o=a(27),c=a(28),s=a(33),u=a(34),l=a(23);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var d=function(e){Object(s.a)(a,e);var t=m(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return i.a.createElement("thead",null,i.a.createElement("tr",null,this.props.columns.map(function(e){return i.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),a}(r.Component),f=a(1583),b=a.n(f),p=a(53),v=a(43),O=/[0-9\-+#]/,g=/[^\d\-+#]/g;function h(e){return e.search(O)}function j(e,t,a){var n=!1,r={value:e};e<0&&(n=!0,r.value=-r.value),r.sign=n?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var i=t.fraction&&t.fraction.lastIndexOf("0"),o=r.value.split("."),c=Object(v.a)(o,2),s=c[0],u=void 0===s?"0":s,l=c[1],m=void 0===l?"":l;return(!m||m&&m.length<=i)&&(m=i<0?"":Number("0."+m).toFixed(i+1).replace("0.","")),r.integer=u,r.fraction=m,function(e,t){e.result="";var a=t.integer.split(t.separator),n=a.join(""),r=n&&n.indexOf("0");if(r>-1)for(;e.integer.length<n.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var i=a[1]&&a[a.length-1].length;if(i)for(var o=e.integer.length,c=o%i,s=0;s<o;s++)e.result+=e.integer.charAt(s),!((s-c+1)%i)&&s<o-i&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(n=!1,r.sign=""),!n&&t.maskHasPositiveSign?r.sign="+":n&&t.maskHasPositiveSign?r.sign="-":n&&(r.sign=a&&a.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var E=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},a=e.length,n=h(e);t.prefix=n>0?e.substring(0,n):"";var r=h(e.split("").reverse().join("")),i=a-r,o=e.substring(i,i+1),c=i+("."===o||","===o?1:0);t.suffix=r>0?e.substring(c,a):"",t.mask=e.substring(n,c),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var s=t.mask.match(g);return t.decimal=s&&s[s.length-1]||".",t.separator=s&&s[1]&&s[0]||",",s=t.mask.split(t.decimal),t.integer=s[0],t.fraction=s[1],t}(e),r=j(t,n,a);return n.prefix+r.sign+r.result+n.suffix},_=a(1578),k=a(1584);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var y=function(e){Object(s.a)(a,e);var t=C(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,a){if(console.log("loaded",a),t.content)return t.content(e,a);var n=b.a.get(e,t.path),r=_.findIndex(function(e){return e===String(t.path)});return k.findIndex(function(e){return e===String(t.path)})>=0?Object(p.e)(n):r>=0?E("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return i.a.createElement("tbody",null,a.map(function(t){return i.a.createElement("tr",{key:t.id},n.map(function(a){return i.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a,e.props.loading))}))}))}}]),a}(r.Component),M=a(1643),S=a(1644),U=a(1645),D=a(109),x=a(1575),N=function(){var e=Object(r.useContext)(D.a),t=e.rootState,a=e.dispatch,n=Object(r.useState)(0),o=Object(v.a)(n,2),c=o[0],s=o[1],u=Object(r.useState)(0),l=Object(v.a)(u,2),m=l[0],d=l[1],f=Object(r.useState)(0),b=Object(v.a)(f,2),p=b[0],O=b[1],g=Object(r.useState)(0),h=Object(v.a)(g,2),j=h[0],E=h[1],_=Object(r.useState)(!1),k=Object(v.a)(_,2),C=k[0],y=k[1],N=Object(r.useState)(!1),w=Object(v.a)(N,2),R=w[0],A=w[1],P=Object(r.useState)({count:0,results:[]}),I=Object(v.a)(P,2),L=I[0],F=I[1],T=Object(r.useState)(0),z=Object(v.a)(T,2),H=z[0],q=z[1],V=Object(r.useState)(""),B=Object(v.a)(V,2),J=B[0],K=B[1];Object(r.useEffect)(function(){Object(x.a)(t)},[t]),Object(r.useEffect)(function(){var e=L.count,t=L.results;0===t.length&&0===e||(E(Math.ceil(e/t.length)),d(t.length),O(e),y(!0))},[J,E,d,O,y]),Object(r.useEffect)(function(){if(H){var e=L.count,t=L.results;m<=t.length&&(E(Math.ceil(e/t.length)),d(t.length),O(e),y(!0))}},[H,L]),Object(r.useEffect)(function(){try{var e=Object(x.b)(t),a=e.results,n=e.amount,r=e.activeTab;if(""!==r?K(r):console.warn("Pass active tab for paginations"),n!==H&&"undefined"!==typeof n&&(q(n),F(a)),"undefined"!==String(a)&&!C){var i=a.count,o=a.results;E(Math.ceil(i/o.length)),d(o.length),O(i),y(!0)}}catch(c){}},[t,q,F]);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;R||A(!0),s(e),t&&d(t)};return Object(r.useEffect)(function(){c<p&&R&&Object(x.c)({},a,{offset:c,limit:m,onClick:R})},[c,m]),i.a.createElement("div",null,i.a.createElement(M.a,{className:"pagination left",size:"md",color:"primary"},i.a.createElement(S.a,{disabled:0===c},i.a.createElement(U.a,{first:!0,href:"#",onClick:function(){return W(0)}},"First")),i.a.createElement(S.a,null,i.a.createElement(U.a,{previous:!0,disabled:0===c,onClick:function(){return W(c-m)}})),Array(j).fill("").map(function(e,t){return i.a.createElement(S.a,{active:t===Math.floor(c/m)},i.a.createElement(U.a,{onClick:function(){return W(t*m)}},t+1))}),i.a.createElement(S.a,null,i.a.createElement(U.a,{next:!0,onClick:function(){return W(c+m)},disabled:c+m>=p})),i.a.createElement(S.a,{disabled:c+m>=p},i.a.createElement(U.a,{last:!0,onClick:function(){return W((j-1)*m)}},"Last"))))},w=a(1549),R=a(1554),A=a(1619),P=a(177);t.a=Object(P.b)(function(e,t){return Object(n.a)({state:e},t)})(function(e){var t=e.columns,a=e.data,n=e.title,o=e.state,c=e.getLoading;Object(r.useEffect)(function(){"function"===typeof c&&console.log("result",c(o,{isPatch:!0}))},[o,c]);var s=Object(r.useContext)(D.a).rootState;return Object(r.useEffect)(function(){},[s]),console.log(c(o,{isPatch:!0})),i.a.createElement(w.a,{className:"p-2"},i.a.createElement(R.a,{className:"tableHeaders border-0"},i.a.createElement("div",null,""+n?n:"")),i.a.createElement(A.a,{size:"md",responsive:!0,striped:!0},i.a.createElement(d,{columns:t}),i.a.createElement(y,{data:a,columns:t,loading:"fucntion"===typeof c?c(o,{isPatch:!0}):{}}),i.a.createElement(N,null)))})},1575:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"d",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return c});var n=a(38),r=function(e){return e.page_values?e.page_values:null},i=function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;t({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:i,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:o}})}},o=function(e){var t=e.page_values;try{var a=t.pageLimit?t.pageLimit:0;return a||0}catch(n){}},c=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1621:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(7);var n=a(3),r=a(1),i=a.n(r),o=a(14),c=a(1620),s={modalData:{openModal:!1,data:{},options:{},isDone:!1,title:"",submit:function(e){return null},Component:i.a.createElement(r.Fragment,null),okCallback:function(e){return null},cancelCallback:function(e){return null}}},u=Object(o.c)({name:"modalData",reducers:{toggle:function(e,t){var a=t.payload,r=a.type,o=a.data,s=a.title,u=a.Component,l=a.submit,m=a._toggle,d=a.isDone,f=a.deleteOptions,b=a.options;switch(r){case"OPEN":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:s,data:o,Component:i.a.createElement(u,{toggle:m})});break;case"ADD":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:s,data:o,submit:l,isDone:d,options:b,Component:i.a.createElement(u,{submit:l,options:b})});break;case"VIEW":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:s,data:o,options:b,Component:i.a.createElement(u,{disabled:!0,data:o,isView:!0,options:b})});break;case"EDIT":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:s,data:o,isDone:d,options:b,Component:i.a.createElement(u,{isEdit:!0,data:o,submit:l,options:b})});break;case"DELETE":var p=f.okCallback,v=f.cancelCallback,O=f.title,g=f.id,h=f.message;Object(c.a)({okCallback:p,errCallback:v,title:O,id:g,message:h});break;case"CLOSE":e.modalData=Object(n.a)({},e.modalData,{openModal:!1})}}},initialState:s}),l=u.actions.toggle;u.reducer},2409:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(1),i=a.n(r),o=a(1574),c=a(1555),s=a(1788),u=a(1549),l=a(17),m=a(3),d=a(27),f=a(28),b=a(179),p=a(33),v=a(34),O=a(23),g=a(1577),h=a(1576),j=a.n(h),E=a(1550),_=a(1556),k=a(1787),C=a(1622),y=a(85),M=a(177);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(O.a)(e);if(t){var r=Object(O.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(v.a)(this,a)}}var U=function(e){Object(p.a)(a,e);var t=S(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).initialState={data:{id:"",amount:"",basic_unit_of_measurement:"",derived_unit_of_measurement:"",remarks:"",basic_amount:"1"},errors:{},lockUpdate:!1},n.state=n.initialState,n.schema={id:j.a.string().allow("").optional(),amount:j.a.string().required().label("Code"),basic_unit_of_measurement:j.a.string().required().label("Basic UOM"),derived_unit_of_measurement:j.a.string().required().label("Derived UOM"),remarks:j.a.string().allow("").optional(),basic_amount:j.a.string().allow("").optional()},n.populateState=n.populateState.bind(Object(b.a)(n)),n}return Object(f.a)(a,[{key:"doSubmit",value:function(){delete Object(m.a)({},this.state.data).basic_amount,this.props.submit(this.state.data)}},{key:"populateState",value:function(e){var t=Object(m.a)({},this.state,{data:{id:e.id?e.id:"",amount:e.amount?e.amount:"",basic_unit_of_measurement:e.basic_unit_of_measurement_detail.id?e.basic_unit_of_measurement_detail.id:"",derived_unit_of_measurement:e.derived_unit_of_measurement_detail.id?e.derived_unit_of_measurement_detail.id:"",remarks:e.remarks?e.remarks:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){this.props.doneAdd&&this.resetForm(),!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"render",value:function(){var e=this.props.options.UOMs;return i.a.createElement(u.a,{className:"border-0"},i.a.createElement(E.a,null,i.a.createElement(_.a,{onSubmit:this.handleSubmit},i.a.createElement(k.a,null,i.a.createElement(s.a,{md:3,sm:12,xs:12},this.renderSelect({name:"basic_unit_of_measurement",label:"Basic UOM",options:e,optionsFrom:"server"})),i.a.createElement(s.a,{md:3,sm:12,xs:12},this.renderInput({name:"basic_amount",label:"Amount",disabled:!0})),i.a.createElement(s.a,{md:3,sm:12,xs:12},this.renderSelect({name:"derived_unit_of_measurement",label:"Derived UOM",options:e,optionsFrom:"server"})),i.a.createElement(s.a,{md:3,sm:12,xs:12},this.renderInput("amount","Amount")),i.a.createElement(s.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks"))),i.a.createElement(C.a,{align:"center"},this.renderButton("Save")))))}}]),a}(g.a),D=Object(M.b)(y.e)(U),x=a(1573),N=a(1581),w=a(1579),R=function(e){var t=e.UOMConversions,a=e.UOMs,m=e.addUOMConversion,d=e.editUOMConversion,f=e.deleteUOMConversion,b=e.doneAdd,p=e.doneEdit,v=Object(r.useReducer)(N.c,N.b),O=Object(n.a)(v,2),g=O[0],h=O[1],j=[{path:"amount",label:"Amount"},{path:"basic_unit_of_measurement_detail.name",label:"Basic UOM"},{path:"derived_unit_of_measurement_detail.name",label:"Derived UOM"},{path:"remarks",label:"Remarks"},{key:"view",content:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(N.a)({type:"VIEW",Component:D,data:e,title:"View Unit of Measurement Conversion",options:{UOMs:a}},h)}},i.a.createElement(l.M,null)),i.a.createElement(c.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(N.a)({type:"EDIT",Component:D,submit:d,isEdit:!0,title:"Edit Unit of Measurement Conversion",data:e,options:{UOMs:a}},h)}},i.a.createElement(l.s,null)),i.a.createElement(c.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(N.a)({type:"DELETE",deleteOptions:{okCallback:E,title:"Are you sure?",id:e.id,message:""}},h)}},i.a.createElement(l.p,null)))}}],E=function(e){f(e)};return Object(r.useEffect)(function(){(b||p)&&Object(N.a)({type:"CLOSE"},h)},[b,p]),i.a.createElement("div",null,i.a.createElement(o.a,null,i.a.createElement(w.a,{data:g.data,openModal:g.openModal,component:g.Component,toggle:N.a,dispatch:h,title:g.title}),i.a.createElement(s.a,{align:"right",className:"mb-1 pl-3 pr-3"},i.a.createElement(c.a,{onClick:function(){Object(N.a)({type:"ADD",Component:D,submit:m,isEdit:!0,data:t,options:{UOMs:a}},h)},outline:!0,size:"sm"},"New Unit Of Measurment Conversion")),i.a.createElement(u.a,{className:"border-0"},i.a.createElement(x.a,{title:" Unit Of Measurments Conversion",columns:j,data:t}))))},A=a(56),P=a(102),I=a(19),L=a(1621);t.default=Object(M.b)(function(e){return{fetchStatus:Object(y.j)(e),addStatus:Object(y.g)(e),UOMConversions:Object(y.k)(e),UOMs:Object(A.k)(e),editStatus:Object(y.i)(e),deleteStatus:Object(y.h)(e)}},function(e){return{fetchUOMConversions:function(){return e(Object(y.c)())},addUOMConversion:function(t){return e(Object(y.a)(t))},editUOMConversion:function(t){return e(Object(y.b)(t))},deleteUOMConversion:function(t){return e(Object(y.d)(t))},toggle:function(t){return e(Object(L.a)(t))}}})(function(e){var t=e.fetchStatus,a=e.addStatus,o=e.UOMConversions,c=e.fetchUOMConversions,s=e.addUOMConversion,u=e.editStatus,l=e.editUOMConversion,m=e.deleteStatus,d=e.deleteUOMConversion,f=e.toggle,b=e.UOMs,p=Object(r.useState)(!0),v=Object(n.a)(p,2),O=v[0],g=v[1],h=Object(r.useState)(!0),j=Object(n.a)(h,2),E=j[0],_=j[1],k=Object(r.useState)(!0),C=Object(n.a)(k,2),y=C[0],M=C[1],S=Object(r.useState)(!0),U=Object(n.a)(S,2),D=U[0],x=U[1],N=a.status===I.e.success&&!E,w=u.status===I.e.success&&!y,A=m.status===I.e.success&&!D;Object(r.useEffect)(function(){g(!1),c()},[c,g]),Object(r.useEffect)(function(){t.status!==I.e.failure||O||(P.toast.error("Failed fetching UOM Conversions"),g(!0))},[t,g]),Object(r.useEffect)(function(){var e=a.status;e!==I.e.failure||E?e!==I.e.success||E||(P.toast.success("Added UOM Conversion"),_(!0)):_(!0)},[a,_]),Object(r.useEffect)(function(){var e=u.status;e!==I.e.failure||y?e!==I.e.success||y||(P.toast.success("Edited UOM Conversion"),M(!0)):M(!0)},[u,M]),Object(r.useEffect)(function(){var e=m.status;e!==I.e.failure||D?e!==I.e.success||D||(P.toast.success("Deleted UOM Conversion"),x(!0)):x(!0)},[m,x]);return Object(r.useEffect)(function(){(N||w||A)&&f({type:"CLOSE"})},[N,w,A]),i.a.createElement(R,{UOMConversions:o,doneAdd:a.status===I.e.success&&!E,addUOMConversion:function(e){_(!1);var t={amount:e.amount,basic_unit_of_measurement:e.basic_unit_of_measurement,derived_unit_of_measurement:e.derived_unit_of_measurement,remarks:e.remarks};s(t)},doneEdit:u.status===I.e.success&&!y,editUOMConversion:function(e){M(!1);var t={id:e.id,amount:e.amount,basic_unit_of_measurement:e.basic_unit_of_measurement,derived_unit_of_measurement:e.derived_unit_of_measurement,remarks:e.remarks};l(t)},doneDelete:m.status===I.e.success&&!D,deleteUOMConversion:function(e){x(!1),d(e)},_toggle:f,UOMs:b})})}}]);
//# sourceMappingURL=106.2be22b8a.chunk.js.map