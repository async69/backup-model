(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{1573:function(t,e,a){"use strict";var n=a(3),c=a(1),r=a.n(c),i=a(27),o=a(28),u=a(33),s=a(34),l=a(23);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var p=function(t){Object(u.a)(a,t);var e=f(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(function(t){return r.a.createElement("th",{key:t.path||t.key},t.label)})))}}]),a}(c.Component),d=a(1583),b=a.n(d),m=a(53),v=a(43),g=/[0-9\-+#]/,h=/[^\d\-+#]/g;function O(t){return t.search(g)}function j(t,e,a){var n=!1,c={value:t};t<0&&(n=!0,c.value=-c.value),c.sign=n?"-":"",c.value=Number(c.value).toFixed(e.fraction&&e.fraction.length),c.value=Number(c.value).toString();var r=e.fraction&&e.fraction.lastIndexOf("0"),i=c.value.split("."),o=Object(v.a)(i,2),u=o[0],s=void 0===u?"0":u,l=o[1],f=void 0===l?"":l;return(!f||f&&f.length<=r)&&(f=r<0?"":Number("0."+f).toFixed(r+1).replace("0.","")),c.integer=s,c.fraction=f,function(t,e){t.result="";var a=e.integer.split(e.separator),n=a.join(""),c=n&&n.indexOf("0");if(c>-1)for(;t.integer.length<n.length-c;)t.integer="0"+t.integer;else 0===Number(t.integer)&&(t.integer="");var r=a[1]&&a[a.length-1].length;if(r)for(var i=t.integer.length,o=i%r,u=0;u<i;u++)t.result+=t.integer.charAt(u),!((u-o+1)%r)&&u<i-r&&(t.result+=e.separator);else t.result=t.integer;t.result+=e.fraction&&t.fraction?e.decimal+t.fraction:""}(c,e),"0"!==c.result&&""!==c.result||(n=!1,c.sign=""),!n&&e.maskHasPositiveSign?c.sign="+":n&&e.maskHasPositiveSign?c.sign="-":n&&(c.sign=a&&a.enforceMaskSign&&!e.maskHasNegativeSign?"":"-"),c}var E=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||isNaN(Number(e)))return e;var n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",e={},a=t.length,n=O(t);e.prefix=n>0?t.substring(0,n):"";var c=O(t.split("").reverse().join("")),r=a-c,i=t.substring(r,r+1),o=r+("."===i||","===i?1:0);e.suffix=c>0?t.substring(o,a):"",e.mask=t.substring(n,o),e.maskHasNegativeSign="-"===e.mask.charAt(0),e.maskHasPositiveSign="+"===e.mask.charAt(0);var u=e.mask.match(h);return e.decimal=u&&u[u.length-1]||".",e.separator=u&&u[1]&&u[0]||",",u=e.mask.split(e.decimal),e.integer=u[0],e.fraction=u[1],e}(t),c=j(e,n,a);return n.prefix+c.sign+c.result+n.suffix},y=a(1578),_=a(1584);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var A=function(t){Object(u.a)(a,t);var e=S(a);function a(){var t;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).renderCell=function(t,e,a){if(console.log("loaded",a),e.content)return e.content(t,a);var n=b.a.get(t,e.path),c=y.findIndex(function(t){return t===String(e.path)});return _.findIndex(function(t){return t===String(e.path)})>=0?Object(m.e)(n):c>=0?E("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},t.createKey=function(t,e){return t._id+(e.path||e.key)},t}return Object(o.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.data,n=e.columns;return r.a.createElement("tbody",null,a.map(function(e){return r.a.createElement("tr",{key:e.id},n.map(function(a){return r.a.createElement("td",{key:t.createKey(e,a)},t.renderCell(e,a,t.props.loading))}))}))}}]),a}(c.Component),k=a(1643),P=a(1644),T=a(1645),V=a(109),G=a(1575),x=function(){var t=Object(c.useContext)(V.a),e=t.rootState,a=t.dispatch,n=Object(c.useState)(0),i=Object(v.a)(n,2),o=i[0],u=i[1],s=Object(c.useState)(0),l=Object(v.a)(s,2),f=l[0],p=l[1],d=Object(c.useState)(0),b=Object(v.a)(d,2),m=b[0],g=b[1],h=Object(c.useState)(0),O=Object(v.a)(h,2),j=O[0],E=O[1],y=Object(c.useState)(!1),_=Object(v.a)(y,2),S=_[0],A=_[1],x=Object(c.useState)(!1),N=Object(v.a)(x,2),C=N[0],R=N[1],D=Object(c.useState)({count:0,results:[]}),w=Object(v.a)(D,2),M=w[0],F=w[1],L=Object(c.useState)(0),I=Object(v.a)(L,2),q=I[0],z=I[1],H=Object(c.useState)(""),U=Object(v.a)(H,2),J=U[0],K=U[1];Object(c.useEffect)(function(){Object(G.a)(e)},[e]),Object(c.useEffect)(function(){var t=M.count,e=M.results;0===e.length&&0===t||(E(Math.ceil(t/e.length)),p(e.length),g(t),A(!0))},[J,E,p,g,A]),Object(c.useEffect)(function(){if(q){var t=M.count,e=M.results;f<=e.length&&(E(Math.ceil(t/e.length)),p(e.length),g(t),A(!0))}},[q,M]),Object(c.useEffect)(function(){try{var t=Object(G.b)(e),a=t.results,n=t.amount,c=t.activeTab;if(""!==c?K(c):console.warn("Pass active tab for paginations"),n!==q&&"undefined"!==typeof n&&(z(n),F(a)),"undefined"!==String(a)&&!S){var r=a.count,i=a.results;E(Math.ceil(r/i.length)),p(i.length),g(r),A(!0)}}catch(o){}},[e,z,F]);var B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;C||R(!0),u(t),e&&p(e)};return Object(c.useEffect)(function(){o<m&&C&&Object(G.c)({},a,{offset:o,limit:f,onClick:C})},[o,f]),r.a.createElement("div",null,r.a.createElement(k.a,{className:"pagination left",size:"md",color:"primary"},r.a.createElement(P.a,{disabled:0===o},r.a.createElement(T.a,{first:!0,href:"#",onClick:function(){return B(0)}},"First")),r.a.createElement(P.a,null,r.a.createElement(T.a,{previous:!0,disabled:0===o,onClick:function(){return B(o-f)}})),Array(j).fill("").map(function(t,e){return r.a.createElement(P.a,{active:e===Math.floor(o/f)},r.a.createElement(T.a,{onClick:function(){return B(e*f)}},e+1))}),r.a.createElement(P.a,null,r.a.createElement(T.a,{next:!0,onClick:function(){return B(o+f)},disabled:o+f>=m})),r.a.createElement(P.a,{disabled:o+f>=m},r.a.createElement(T.a,{last:!0,onClick:function(){return B((j-1)*f)}},"Last"))))},N=a(1549),C=a(1554),R=a(1619),D=a(177);e.a=Object(D.b)(function(t,e){return Object(n.a)({state:t},e)})(function(t){var e=t.columns,a=t.data,n=t.title,i=t.state,o=t.getLoading;Object(c.useEffect)(function(){"function"===typeof o&&console.log("result",o(i,{isPatch:!0}))},[i,o]);var u=Object(c.useContext)(V.a).rootState;return Object(c.useEffect)(function(){},[u]),console.log(o(i,{isPatch:!0})),r.a.createElement(N.a,{className:"p-2"},r.a.createElement(C.a,{className:"tableHeaders border-0"},r.a.createElement("div",null,""+n?n:"")),r.a.createElement(R.a,{size:"md",responsive:!0,striped:!0},r.a.createElement(p,{columns:e}),r.a.createElement(A,{data:a,columns:e,loading:"fucntion"===typeof o?o(i,{isPatch:!0}):{}}),r.a.createElement(x,null)))})},1575:function(t,e,a){"use strict";a.d(e,"b",function(){return c}),a.d(e,"d",function(){return r}),a.d(e,"a",function(){return i}),a.d(e,"c",function(){return o});var n=a(38),c=function(t){return t.page_values?t.page_values:null},r=function(t,e,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;e({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:r,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:c(t)?c(t).amount+1:0,activeTab:i}})}},i=function(t){var e=t.page_values;try{var a=e.pageLimit?e.pageLimit:0;return a||0}catch(n){}},o=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};e({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(t){t.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1582:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},2401:function(t,e,a){"use strict";a.r(e);var n=a(43),c=a(1),r=a.n(c),i=a(1574),o=a(1555),u=a(1788),s=a(1549),l=a(1550),f=a(1579),p=a(3),d=a(27),b=a(28),m=a(33),v=a(34),g=a(23),h=a(1577),O=a(1576),j=a.n(O),E=a(1556),y=a(1787),_=a(1622);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var a,n=Object(g.a)(t);if(e){var c=Object(g.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(v.a)(this,a)}}var A=function(t){Object(m.a)(a,t);var e=S(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).initialState={data:{id:"",name:"",vat:"",vat_payable_account:"",vat_receivable_account:""},errors:{}},n.state=n.initialState,n.schema={id:j.a.string().allow("").optional(),name:j.a.string().required().label("name"),vat:j.a.number().required().label("VAT"),vat_payable_account:j.a.string().required().label("VAT Payable Account"),vat_receivable_account:j.a.string().required().label("VAT Receivable Account")},n}return Object(b.a)(a,[{key:"populateState",value:function(t){var e=Object(p.a)({},this.state,{data:{id:t.id?t.id:"",name:t.name?t.name:"",vat:t.vat?t.vat:"",vat_payable_account:t.vat_payable_account?t.vat_payable_account:"",vat_receivable_account:t.vat_receivable_account?t.vat_receivable_account:""},lockUpdate:!0});this.setState(e)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data),this.populateDefaults()}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){var t=this.props.options.coa;return r.a.createElement(s.a,{className:"border-0"},r.a.createElement(l.a,null,r.a.createElement(E.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a,null,r.a.createElement(u.a,{md:6,sm:12,xs:12},this.renderInput("name","Name")),r.a.createElement(u.a,{md:6,sm:12,xs:12},this.renderInput("vat","VAT","number")),r.a.createElement(u.a,{md:6,sm:12,xs:12},this.renderSelect({name:"vat_payable_account",label:"VAT Payable Account",options:t,optionsFrom:"server"})),r.a.createElement(u.a,{md:6,sm:12,xs:12},this.renderSelect({name:"vat_receivable_account",label:"VAT Receivable Account",options:t,optionsFrom:"server"}))),r.a.createElement(_.a,{align:"center"},this.renderButton("Save",this.props.loader)))))}}]),a}(h.a),k=a(1573),P=a(1582),T=a(17),V=a(1581),G=function(t){var e=t.postingGroups,a=t.doneAdd,p=t.addVATPostingGroup,d=t.doneEdit,b=t.editVATPostingGroup,m=t.deleteVATPostingGroup,v=t.coa,g=Object(c.useReducer)(V.c,V.b),h=Object(n.a)(g,2),O=h[0],j=h[1],E=function(t){m(t)};Object(c.useEffect)(function(){(a||d)&&Object(V.a)({type:"CLOSE"},j)},[a,d]);var y=[{path:"name",label:"Name"},{path:"vat",label:"VAT"},{path:"updated_at",label:"Last Modified"},{key:"view",content:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(V.a)({type:"VIEW",Component:A,data:t,title:"View Vat Posting Group",options:{coa:v}},j)}},r.a.createElement(T.M,null)),r.a.createElement(o.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(V.a)({type:"EDIT",Component:A,data:t,submit:b,title:"Edit Vat Posting Group",options:{coa:v}},j)}},r.a.createElement(T.s,null)),r.a.createElement(o.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(V.a)({type:"DELETE",deleteOptions:{okCallback:E,title:"Are you sure?",id:t.id,message:""}},j)}},r.a.createElement(T.p,null)))}}];return r.a.createElement("div",null,r.a.createElement(f.a,{data:O.data,openModal:O.openModal,component:O.Component,title:O.title,toggle:V.a,dispatch:j}),r.a.createElement(i.a,null,r.a.createElement(u.a,{align:"right",className:"mb-1 pl-3 pr-3"},r.a.createElement(o.a,{onClick:function(){return Object(V.a)({type:"ADD",Component:A,submit:p,title:"Add VAT Posting Group",options:{coa:v}},j)},outline:!0,size:"sm"},"New Vat Posting Group")),r.a.createElement(s.a,{className:"border-0"},r.a.createElement(l.a,null,r.a.createElement(k.a,{title:"VAT Posting Group ",columns:y,data:Object(P.a)(e)})))))},x=a(70),N=a(177),C=a(102),R=a(19),D=a(44);e.default=Object(N.b)(function(t){return{fetchStatus:Object(x.i)(t),addStatus:Object(x.f)(t),postingGroups:Object(x.j)(t),coa:Object(D.h)(t),editStatus:Object(x.h)(t),deleteStatus:Object(x.g)(t)}},function(t){return{fetchVATPostingGroups:function(){return t(Object(x.c)())},addVATPostingGroup:function(e){return t(Object(x.a)(e))},editVATPostingGroup:function(e){return t(Object(x.b)(e))},deleteVATPostingGroup:function(e){return t(Object(x.d)(e))}}})(function(t){var e=t.fetchStatus,a=t.addStatus,i=t.fetchVATPostingGroups,o=t.addVATPostingGroup,u=t.editStatus,s=t.editVATPostingGroup,l=t.deleteStatus,f=t.deleteVATPostingGroup,p=t.postingGroups,d=t.coa,b=Object(c.useState)(!0),m=Object(n.a)(b,2),v=m[0],g=m[1],h=Object(c.useState)(!0),O=Object(n.a)(h,2),j=O[0],E=O[1],y=Object(c.useState)(!0),_=Object(n.a)(y,2),S=_[0],A=_[1],k=Object(c.useState)(!0),P=Object(n.a)(k,2),T=P[0],V=P[1];Object(c.useEffect)(function(){g(!1),i()},[i,g]),Object(c.useEffect)(function(){e.status!==R.e.failure||v||(C.toast.error("Failed Fetching VAT Posting Groups"),g(!0))},[e,g]),Object(c.useEffect)(function(){var t=a.status;t!==R.e.failure||j?t!==R.e.success||j||(C.toast.success("Added VAT Posting Group"),E(!0)):E(!0)},[a,E]),Object(c.useEffect)(function(){var t=u.status;t!==R.e.failure||S?t!==R.e.success||S||(C.toast.success("Edited VAT Posting Group"),A(!0)):A(!0)},[u,A]),Object(c.useEffect)(function(){var t=l.status;t!==R.e.failure||T?t!==R.e.success||T||(C.toast.success("Deleted VAT Posting Group"),V(!0)):V(!0)},[l,V]);return r.a.createElement(G,{postingGroups:p,coa:d,doneAdd:a.status===R.e.success&&!j,addVATPostingGroup:function(t){E(!1);var e={name:t.name?t.name:"",vat:t.vat?t.vat:"",vat_payable_account:t.vat_payable_account?t.vat_payable_account:"",vat_receivable_account:t.vat_receivable_account?t.vat_receivable_account:""};o(e)},doneEdit:u.status===R.e.success&&!S,editVATPostingGroup:function(t){A(!1);var e={id:t.id?t.id:"",name:t.name?t.name:"",vat:t.vat?t.vat:"",vat_payable_account:t.vat_payable_account?t.vat_payable_account:"",vat_receivable_account:t.vat_receivable_account?t.vat_receivable_account:""};s(e)},doneDelete:l.status===R.e.success&&!T,deleteVATPostingGroup:function(t){V(!1),f(t)}})})}}]);
//# sourceMappingURL=103.39c5864e.chunk.js.map