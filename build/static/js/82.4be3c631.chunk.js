(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1573:function(t,e,n){"use strict";var a=n(3),c=n(1),r=n.n(c),i=n(27),u=n(28),o=n(33),s=n(34),l=n(23);function f(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var d=function(t){Object(o.a)(n,t);var e=f(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(function(t){return r.a.createElement("th",{key:t.path||t.key},t.label)})))}}]),n}(c.Component),m=n(1583),b=n.n(m),p=n(53),g=n(43),h=/[0-9\-+#]/,v=/[^\d\-+#]/g;function O(t){return t.search(h)}function j(t,e,n){var a=!1,c={value:t};t<0&&(a=!0,c.value=-c.value),c.sign=a?"-":"",c.value=Number(c.value).toFixed(e.fraction&&e.fraction.length),c.value=Number(c.value).toString();var r=e.fraction&&e.fraction.lastIndexOf("0"),i=c.value.split("."),u=Object(g.a)(i,2),o=u[0],s=void 0===o?"0":o,l=u[1],f=void 0===l?"":l;return(!f||f&&f.length<=r)&&(f=r<0?"":Number("0."+f).toFixed(r+1).replace("0.","")),c.integer=s,c.fraction=f,function(t,e){t.result="";var n=e.integer.split(e.separator),a=n.join(""),c=a&&a.indexOf("0");if(c>-1)for(;t.integer.length<a.length-c;)t.integer="0"+t.integer;else 0===Number(t.integer)&&(t.integer="");var r=n[1]&&n[n.length-1].length;if(r)for(var i=t.integer.length,u=i%r,o=0;o<i;o++)t.result+=t.integer.charAt(o),!((o-u+1)%r)&&o<i-r&&(t.result+=e.separator);else t.result=t.integer;t.result+=e.fraction&&t.fraction?e.decimal+t.fraction:""}(c,e),"0"!==c.result&&""!==c.result||(a=!1,c.sign=""),!a&&e.maskHasPositiveSign?c.sign="+":a&&e.maskHasPositiveSign?c.sign="-":a&&(c.sign=n&&n.enforceMaskSign&&!e.maskHasNegativeSign?"":"-"),c}var E=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||isNaN(Number(e)))return e;var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",e={},n=t.length,a=O(t);e.prefix=a>0?t.substring(0,a):"";var c=O(t.split("").reverse().join("")),r=n-c,i=t.substring(r,r+1),u=r+("."===i||","===i?1:0);e.suffix=c>0?t.substring(u,n):"",e.mask=t.substring(a,u),e.maskHasNegativeSign="-"===e.mask.charAt(0),e.maskHasPositiveSign="+"===e.mask.charAt(0);var o=e.mask.match(v);return e.decimal=o&&o[o.length-1]||".",e.separator=o&&o[1]&&o[0]||",",o=e.mask.split(e.decimal),e.integer=o[0],e.fraction=o[1],e}(t),c=j(e,a,n);return a.prefix+c.sign+c.result+a.suffix},y=n(1578),k=n(1584);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var _=function(t){Object(o.a)(n,t);var e=S(n);function n(){var t;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(t=e.call.apply(e,[this].concat(c))).renderCell=function(t,e,n){if(console.log("loaded",n),e.content)return e.content(t,n);var a=b.a.get(t,e.path),c=y.findIndex(function(t){return t===String(e.path)});return k.findIndex(function(t){return t===String(e.path)})>=0?Object(p.e)(a):c>=0?E("#,###.00",a,{enforceMaskSign:!0}):a?String(a):""},t.createKey=function(t,e){return t._id+(e.path||e.key)},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.data,a=e.columns;return r.a.createElement("tbody",null,n.map(function(e){return r.a.createElement("tr",{key:e.id},a.map(function(n){return r.a.createElement("td",{key:t.createKey(e,n)},t.renderCell(e,n,t.props.loading))}))}))}}]),n}(c.Component),A=n(1643),D=n(1644),C=n(1645),T=n(109),N=n(1575),x=function(){var t=Object(c.useContext)(T.a),e=t.rootState,n=t.dispatch,a=Object(c.useState)(0),i=Object(g.a)(a,2),u=i[0],o=i[1],s=Object(c.useState)(0),l=Object(g.a)(s,2),f=l[0],d=l[1],m=Object(c.useState)(0),b=Object(g.a)(m,2),p=b[0],h=b[1],v=Object(c.useState)(0),O=Object(g.a)(v,2),j=O[0],E=O[1],y=Object(c.useState)(!1),k=Object(g.a)(y,2),S=k[0],_=k[1],x=Object(c.useState)(!1),w=Object(g.a)(x,2),M=w[0],R=w[1],P=Object(c.useState)({count:0,results:[]}),I=Object(g.a)(P,2),L=I[0],F=I[1],z=Object(c.useState)(0),H=Object(g.a)(z,2),U=H[0],q=H[1],V=Object(c.useState)(""),J=Object(g.a)(V,2),K=J[0],W=J[1];Object(c.useEffect)(function(){Object(N.a)(e)},[e]),Object(c.useEffect)(function(){var t=L.count,e=L.results;0===e.length&&0===t||(E(Math.ceil(t/e.length)),d(e.length),h(t),_(!0))},[K,E,d,h,_]),Object(c.useEffect)(function(){if(U){var t=L.count,e=L.results;f<=e.length&&(E(Math.ceil(t/e.length)),d(e.length),h(t),_(!0))}},[U,L]),Object(c.useEffect)(function(){try{var t=Object(N.b)(e),n=t.results,a=t.amount,c=t.activeTab;if(""!==c?W(c):console.warn("Pass active tab for paginations"),a!==U&&"undefined"!==typeof a&&(q(a),F(n)),"undefined"!==String(n)&&!S){var r=n.count,i=n.results;E(Math.ceil(r/i.length)),d(i.length),h(r),_(!0)}}catch(u){}},[e,q,F]);var B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;M||R(!0),o(t),e&&d(e)};return Object(c.useEffect)(function(){u<p&&M&&Object(N.c)({},n,{offset:u,limit:f,onClick:M})},[u,f]),r.a.createElement("div",null,r.a.createElement(A.a,{className:"pagination left",size:"md",color:"primary"},r.a.createElement(D.a,{disabled:0===u},r.a.createElement(C.a,{first:!0,href:"#",onClick:function(){return B(0)}},"First")),r.a.createElement(D.a,null,r.a.createElement(C.a,{previous:!0,disabled:0===u,onClick:function(){return B(u-f)}})),Array(j).fill("").map(function(t,e){return r.a.createElement(D.a,{active:e===Math.floor(u/f)},r.a.createElement(C.a,{onClick:function(){return B(e*f)}},e+1))}),r.a.createElement(D.a,null,r.a.createElement(C.a,{next:!0,onClick:function(){return B(u+f)},disabled:u+f>=p})),r.a.createElement(D.a,{disabled:u+f>=p},r.a.createElement(C.a,{last:!0,onClick:function(){return B((j-1)*f)}},"Last"))))},w=n(1549),M=n(1554),R=n(1619),P=n(177);e.a=Object(P.b)(function(t,e){return Object(a.a)({state:t},e)})(function(t){var e=t.columns,n=t.data,a=t.title,i=t.state,u=t.getLoading;Object(c.useEffect)(function(){"function"===typeof u&&console.log("result",u(i,{isPatch:!0}))},[i,u]);var o=Object(c.useContext)(T.a).rootState;return Object(c.useEffect)(function(){},[o]),console.log(u(i,{isPatch:!0})),r.a.createElement(w.a,{className:"p-2"},r.a.createElement(M.a,{className:"tableHeaders border-0"},r.a.createElement("div",null,""+a?a:"")),r.a.createElement(R.a,{size:"md",responsive:!0,striped:!0},r.a.createElement(d,{columns:e}),r.a.createElement(_,{data:n,columns:e,loading:"fucntion"===typeof u?u(i,{isPatch:!0}):{}}),r.a.createElement(x,null)))})},1575:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"d",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return u});var a=n(38),c=function(t){return t.page_values?t.page_values:null},r=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof n){if(0===n.count)return null;e({type:a.a.UPDATE,stateName:"page_values",payload:{results:n,options:r,pageLimit:n.length?5*Math.ceil(n.length/5):5,amount:c(t)?c(t).amount+1:0,activeTab:i}})}},i=function(t){var e=t.page_values;try{var n=e.pageLimit?e.pageLimit:0;return n||0}catch(a){}},u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};e({type:a.a.UPDATE,stateName:"page_values",payload:{options:n}})}},1578:function(t){t.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1582:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},1621:function(t,e,n){"use strict";n.d(e,"a",function(){return l});n(7);var a=n(3),c=n(1),r=n.n(c),i=n(14),u=n(1620),o={modalData:{openModal:!1,data:{},options:{},isDone:!1,title:"",submit:function(t){return null},Component:r.a.createElement(c.Fragment,null),okCallback:function(t){return null},cancelCallback:function(t){return null}}},s=Object(i.c)({name:"modalData",reducers:{toggle:function(t,e){var n=e.payload,c=n.type,i=n.data,o=n.title,s=n.Component,l=n.submit,f=n._toggle,d=n.isDone,m=n.deleteOptions,b=n.options;switch(c){case"OPEN":t.modalData=Object(a.a)({},t.modalData,{openModal:!0,title:o,data:i,Component:r.a.createElement(s,{toggle:f})});break;case"ADD":t.modalData=Object(a.a)({},t.modalData,{openModal:!0,title:o,data:i,submit:l,isDone:d,options:b,Component:r.a.createElement(s,{submit:l,options:b})});break;case"VIEW":t.modalData=Object(a.a)({},t.modalData,{openModal:!0,title:o,data:i,options:b,Component:r.a.createElement(s,{disabled:!0,data:i,isView:!0,options:b})});break;case"EDIT":t.modalData=Object(a.a)({},t.modalData,{openModal:!0,title:o,data:i,isDone:d,options:b,Component:r.a.createElement(s,{isEdit:!0,data:i,submit:l,options:b})});break;case"DELETE":var p=m.okCallback,g=m.cancelCallback,h=m.title,v=m.id,O=m.message;Object(u.a)({okCallback:p,errCallback:g,title:h,id:v,message:O});break;case"CLOSE":t.modalData=Object(a.a)({},t.modalData,{openModal:!1})}}},initialState:o}),l=s.actions.toggle;s.reducer},2399:function(t,e,n){"use strict";n.r(e);var a=n(43),c=n(1),r=n.n(c),i=n(1574),u=n(1555),o=n(1788),s=n(1549),l=n(1554),f=n(3),d=n(27),m=n(28),b=n(33),p=n(34),g=n(23),h=n(1577),v=n(1576),O=n.n(v),j=n(1550),E=n(1556),y=n(1787),k=n(1622);function S(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(g.a)(t);if(e){var c=Object(g.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}var _=function(t){Object(b.a)(n,t);var e=S(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).initialState={data:{id:"",starting_number:"",name:"",number_of_digits:""},errors:{},lockUpdate:!1},a.state=a.initialState,a.schema={id:O.a.string().allow("").optional(),name:O.a.string().required().label("Name"),starting_number:O.a.number().required().label("Starting Number"),number_of_digits:O.a.number().required().label("Number of Digits")},a}return Object(m.a)(n,[{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"populateState",value:function(t){var e=Object(f.a)({},this.state,{data:{id:t.id?t.id:"",name:t.name?t.name:"",starting_number:t.starting_number?t.starting_number:"",number_of_digits:t.number_of_digits?t.number_of_digits:""},lockUpdate:!0});this.setState(e)}},{key:"componentDidUpdate",value:function(){this.props.doneAdd&&this.resetForm(),!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"render",value:function(){var t="Add";return this.props.isEdit&&(t="Edit"),r.a.createElement(s.a,{className:"border-0"},r.a.createElement(j.a,null,r.a.createElement(E.a,{onSubmit:this.handleSubmit},r.a.createElement(y.a,null,r.a.createElement(o.a,{md:4,sm:12,xs:12},this.renderInput("name","Name")),r.a.createElement(o.a,{md:4,sm:12,xs:12},this.renderInput("number_of_digits","Number of Digits","number")),r.a.createElement(o.a,{md:4,sm:12,xs:12},this.renderInput("starting_number","Starting Number","number"))),r.a.createElement(k.a,{align:"center"},this.renderButton("".concat(t," Account Type"))))))}}]),n}(h.a),A=n(17),D=n(1582),C=n(1573),T=n(1581),N=n(1579),x=function(t){var e=t.accountTypes,n=t.addAccountType,f=t.editAccountType,d=t.deleteAccountType,m=t.doneAdd,b=t.doneEdit,p=Object(c.useReducer)(T.c,T.b),g=Object(a.a)(p,2),h=g[0],v=g[1],O=[{path:"name",label:"Name"},{path:"starting_number",label:"Starting Number"},{path:"number_of_digits",label:"Number of Digits"},{key:"view",content:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(T.a)({type:"VIEW",Component:_,data:t,title:"View Account Types"},v)}},r.a.createElement(A.M,null)),r.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(T.a)({type:"EDIT",title:"Edit Account Type",Component:_,submit:f,isEdit:!0,data:t},v)}},r.a.createElement(A.s,null)),r.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(T.a)({type:"DELETE",deleteOptions:{okCallback:j,title:"Are you sure?",id:t.id,message:""}},v)}},r.a.createElement(A.p,null)))}}],j=function(t){d(t)};return Object(c.useEffect)(function(){(m||b)&&Object(T.a)({type:"CLOSE"},v)},[m,b]),r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement(N.a,{data:h.data,openModal:h.openModal,component:h.Component,toggle:T.a,dispatch:v,title:h.title}),r.a.createElement(o.a,{align:"right",className:"mb-1 pl-3 pr-3"},r.a.createElement(u.a,{onClick:function(){Object(T.a)({type:"ADD",title:"Add Account Type",Component:_,submit:n,isEdit:!0,data:e},v)},outline:!0,size:"sm"},"New AccountType")),r.a.createElement(s.a,{className:"border-0"},r.a.createElement(o.a,{md:12,sm:12,xs:12},r.a.createElement(l.a,{className:"border-0"},"Account Types")),r.a.createElement(C.a,{columns:O,data:Object(D.a)(e)}))))},w=n(40),M=n(177),R=n(102),P=n(19),I=n(1621);e.default=Object(M.b)(function(t){return{fetchStatus:Object(w.j)(t),addStatus:Object(w.g)(t),accountTypes:Object(w.f)(t),editStatus:Object(w.i)(t),deleteStatus:Object(w.h)(t)}},function(t){return{fetchAccountTypes:function(){return t(Object(w.c)())},addAccountType:function(e){return t(Object(w.a)(e))},editAccountType:function(e){return t(Object(w.b)(e))},deleteAccountType:function(e){return t(Object(w.d)(e))},toggle:function(e){return t(Object(I.a)(e))}}})(function(t){var e=t.fetchStatus,n=t.addStatus,i=t.fetchAccountTypes,u=t.addAccountType,o=t.editStatus,s=t.editAccountType,l=t.deleteStatus,f=t.deleteAccountType,d=t.accountTypes,m=t.toggle,b=Object(c.useState)(!0),p=Object(a.a)(b,2),g=p[0],h=p[1],v=Object(c.useState)(!0),O=Object(a.a)(v,2),j=O[0],E=O[1],y=Object(c.useState)(!0),k=Object(a.a)(y,2),S=k[0],_=k[1],A=Object(c.useState)(!0),D=Object(a.a)(A,2),C=D[0],T=D[1],N=n.status===P.e.success&&!j,w=o.status===P.e.success&&!S,M=l.status===P.e.success&&!C;Object(c.useEffect)(function(){h(!1),i()},[i,h]),Object(c.useEffect)(function(){e.status!==P.e.failure||g||(R.toast.error("Failed fetching AccountTypes"),h(!0))},[e,h]),Object(c.useEffect)(function(){var t=n.status;t!==P.e.failure||j?t!==P.e.success||j||(R.toast.success("Added AccountType"),E(!0)):E(!0)},[n,E]),Object(c.useEffect)(function(){var t=o.status;t!==P.e.failure||S?t!==P.e.success||S||(R.toast.success("Edited AccountType"),_(!0)):_(!0)},[o,_]),Object(c.useEffect)(function(){var t=l.status;t!==P.e.failure||C?t!==P.e.success||C||(R.toast.success("Deleted AccountType"),T(!0)):T(!0)},[l,T]);return Object(c.useEffect)(function(){(N||w||M)&&m({type:"CLOSE"})},[N,w,M]),r.a.createElement(x,{doneAdd:n.status===P.e.success&&!j,addAccountType:function(t){E(!1);var e={id:t.id,name:t.name,number_of_digits:t.number_of_digits,starting_number:t.starting_number};u(e)},doneEdit:o.status===P.e.success&&!S,editAccountType:function(t){_(!1);var e={id:t.id,name:t.name,number_of_digits:t.number_of_digits,starting_number:t.starting_number};s(e)},doneDelete:l.status===P.e.success&&!C,deleteAccountType:function(t){T(!1),f(t)},_toggle:m,accountTypes:d})})}}]);
//# sourceMappingURL=82.4be3c631.chunk.js.map