(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1573:function(e,t,n){"use strict";var a=n(3),r=n(1),c=n.n(r),i=n(27),o=n(28),u=n(33),s=n(34),l=n(23);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var f=function(e){Object(u.a)(n,e);var t=m(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return c.a.createElement("thead",null,c.a.createElement("tr",null,this.props.columns.map(function(e){return c.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),n}(r.Component),d=n(1583),p=n.n(d),b=n(53),g=n(43),v=/[0-9\-+#]/,h=/[^\d\-+#]/g;function O(e){return e.search(v)}function j(e,t,n){var a=!1,r={value:e};e<0&&(a=!0,r.value=-r.value),r.sign=a?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var c=t.fraction&&t.fraction.lastIndexOf("0"),i=r.value.split("."),o=Object(g.a)(i,2),u=o[0],s=void 0===u?"0":u,l=o[1],m=void 0===l?"":l;return(!m||m&&m.length<=c)&&(m=c<0?"":Number("0."+m).toFixed(c+1).replace("0.","")),r.integer=s,r.fraction=m,function(e,t){e.result="";var n=t.integer.split(t.separator),a=n.join(""),r=a&&a.indexOf("0");if(r>-1)for(;e.integer.length<a.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var c=n[1]&&n[n.length-1].length;if(c)for(var i=e.integer.length,o=i%c,u=0;u<i;u++)e.result+=e.integer.charAt(u),!((u-o+1)%c)&&u<i-c&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(a=!1,r.sign=""),!a&&t.maskHasPositiveSign?r.sign="+":a&&t.maskHasPositiveSign?r.sign="-":a&&(r.sign=n&&n.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},n=e.length,a=O(e);t.prefix=a>0?e.substring(0,a):"";var r=O(e.split("").reverse().join("")),c=n-r,i=e.substring(c,c+1),o=c+("."===i||","===i?1:0);t.suffix=r>0?e.substring(o,n):"",t.mask=e.substring(a,o),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var u=t.mask.match(h);return t.decimal=u&&u[u.length-1]||".",t.separator=u&&u[1]&&u[0]||",",u=t.mask.split(t.decimal),t.integer=u[0],t.fraction=u[1],t}(e),r=j(t,a,n);return a.prefix+r.sign+r.result+a.suffix},_=n(1578),y=n(1584);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var C=function(e){Object(u.a)(n,e);var t=k(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,n){if(console.log("loaded",n),t.content)return t.content(e,n);var a=p.a.get(e,t.path),r=_.findIndex(function(e){return e===String(t.path)});return y.findIndex(function(e){return e===String(t.path)})>=0?Object(b.e)(a):r>=0?E("#,###.00",a,{enforceMaskSign:!0}):a?String(a):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return c.a.createElement("tbody",null,n.map(function(t){return c.a.createElement("tr",{key:t.id},a.map(function(n){return c.a.createElement("td",{key:e.createKey(t,n)},e.renderCell(t,n,e.props.loading))}))}))}}]),n}(r.Component),S=n(1643),x=n(1644),N=n(1645),D=n(109),w=n(1575),A=function(){var e=Object(r.useContext)(D.a),t=e.rootState,n=e.dispatch,a=Object(r.useState)(0),i=Object(g.a)(a,2),o=i[0],u=i[1],s=Object(r.useState)(0),l=Object(g.a)(s,2),m=l[0],f=l[1],d=Object(r.useState)(0),p=Object(g.a)(d,2),b=p[0],v=p[1],h=Object(r.useState)(0),O=Object(g.a)(h,2),j=O[0],E=O[1],_=Object(r.useState)(!1),y=Object(g.a)(_,2),k=y[0],C=y[1],A=Object(r.useState)(!1),T=Object(g.a)(A,2),P=T[0],F=T[1],L=Object(r.useState)({count:0,results:[]}),R=Object(g.a)(L,2),I=R[0],G=R[1],M=Object(r.useState)(0),z=Object(g.a)(M,2),V=z[0],U=z[1],H=Object(r.useState)(""),B=Object(g.a)(H,2),J=B[0],Y=B[1];Object(r.useEffect)(function(){Object(w.a)(t)},[t]),Object(r.useEffect)(function(){var e=I.count,t=I.results;0===t.length&&0===e||(E(Math.ceil(e/t.length)),f(t.length),v(e),C(!0))},[J,E,f,v,C]),Object(r.useEffect)(function(){if(V){var e=I.count,t=I.results;m<=t.length&&(E(Math.ceil(e/t.length)),f(t.length),v(e),C(!0))}},[V,I]),Object(r.useEffect)(function(){try{var e=Object(w.b)(t),n=e.results,a=e.amount,r=e.activeTab;if(""!==r?Y(r):console.warn("Pass active tab for paginations"),a!==V&&"undefined"!==typeof a&&(U(a),G(n)),"undefined"!==String(n)&&!k){var c=n.count,i=n.results;E(Math.ceil(c/i.length)),f(i.length),v(c),C(!0)}}catch(o){}},[t,U,G]);var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;P||F(!0),u(e),t&&f(t)};return Object(r.useEffect)(function(){o<b&&P&&Object(w.c)({},n,{offset:o,limit:m,onClick:P})},[o,m]),c.a.createElement("div",null,c.a.createElement(S.a,{className:"pagination left",size:"md",color:"primary"},c.a.createElement(x.a,{disabled:0===o},c.a.createElement(N.a,{first:!0,href:"#",onClick:function(){return q(0)}},"First")),c.a.createElement(x.a,null,c.a.createElement(N.a,{previous:!0,disabled:0===o,onClick:function(){return q(o-m)}})),Array(j).fill("").map(function(e,t){return c.a.createElement(x.a,{active:t===Math.floor(o/m)},c.a.createElement(N.a,{onClick:function(){return q(t*m)}},t+1))}),c.a.createElement(x.a,null,c.a.createElement(N.a,{next:!0,onClick:function(){return q(o+m)},disabled:o+m>=b})),c.a.createElement(x.a,{disabled:o+m>=b},c.a.createElement(N.a,{last:!0,onClick:function(){return q((j-1)*m)}},"Last"))))},T=n(1549),P=n(1554),F=n(1619),L=n(177);t.a=Object(L.b)(function(e,t){return Object(a.a)({state:e},t)})(function(e){var t=e.columns,n=e.data,a=e.title,i=e.state,o=e.getLoading;Object(r.useEffect)(function(){"function"===typeof o&&console.log("result",o(i,{isPatch:!0}))},[i,o]);var u=Object(r.useContext)(D.a).rootState;return Object(r.useEffect)(function(){},[u]),console.log(o(i,{isPatch:!0})),c.a.createElement(T.a,{className:"p-2"},c.a.createElement(P.a,{className:"tableHeaders border-0"},c.a.createElement("div",null,""+a?a:"")),c.a.createElement(F.a,{size:"md",responsive:!0,striped:!0},c.a.createElement(f,{columns:t}),c.a.createElement(C,{data:n,columns:t,loading:"fucntion"===typeof o?o(i,{isPatch:!0}):{}}),c.a.createElement(A,null)))})},1575:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return o});var a=n(38),r=function(e){return e.page_values?e.page_values:null},c=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof n){if(0===n.count)return null;t({type:a.a.UPDATE,stateName:"page_values",payload:{results:n,options:c,pageLimit:n.length?5*Math.ceil(n.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:i}})}},i=function(e){var t=e.page_values;try{var n=t.pageLimit?t.pageLimit:0;return n||0}catch(a){}},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:a.a.UPDATE,stateName:"page_values",payload:{options:n}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1580:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return c});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=void 0;return n.length>0&&(r=e.filter(function(e){var r=a?"":"^";try{return n&&String(e[t]).match(new RegExp(r+n,"gi"))}catch(c){console.error("Tag does not exist: ".concat(String(c)))}return null})),"undefined"===typeof r?e:r},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posting_date",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=void 0;return n.length>0&&a.length>0&&(r=e.filter(function(e){try{var r=new Date(e[t]).getTime(),c=new Date(n).getTime(),i=new Date(a).getTime();return n&&a&&r<=i&&r>=c}catch(o){console.error("Tag does not exist: ".concat(String(o)))}return null})),"undefined"===typeof r?e:r},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"country",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addresses",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=void 0;return n.length>0&&(c=e.filter(function(e){var c=r?"":"^";try{var i=e[a].findIndex(function(e){return e[t].match(new RegExp(c+n,"gi"))});return n&&i>=0}catch(o){console.error("Tag does not exist: ".concat(String(o)))}return null})),"undefined"===typeof c?e:c}},1582:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},1603:function(e,t,n){"use strict";var a=n(7),r=n(43),c=n(3),i=n(1),o=n.n(i),u=n(1619),s=n(1557),l=n(1555),m=n(17),f="ADDING_LINE",d={addCount:0,status:"IDLE",hasEdit:!0,hasDelete:!0,_data:[]},p="_ADD",b="UPDATE",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(c.a)({},e,{addCount:e.addCount+1,status:f});case b:return Object(c.a)({},e,{_data:t.payload});default:return e}},v=function(e){return e({type:p})},h=n(1576),O=n.n(h),j=n(1583),E=n.n(j),_=function(){return Math.random().toString(36).substring(7)},y=function(e,t){var n={};for(var a in e)n[a]="";return Object(c.a)({},n,{_id:t})},k="ADDING_LINE",C="IDLE",S="EDIT",x="SAVED",N="CANCELED",D=function(e){var t=e.data,n=e.columns,f=e.hasEdit,d=e.hasDelete,p=e.status,g=e.addCount,v=e.schema,h=e.dispatch,j=e.callback,D=Object(i.useState)([]),w=Object(r.a)(D,2),A=w[0],T=w[1],P=Object(i.useState)(C),F=Object(r.a)(P,2),L=F[0],R=F[1],I=Object(i.useState)(t.map(function(){return!1})),G=Object(r.a)(I,2),M=G[0],z=G[1],V=Object(i.useState)({}),U=Object(r.a)(V,2),H=U[0],B=U[1];Object(i.useEffect)(function(){C!==L&&x!==L&&N!==L||R(p)},[p,R,g]),Object(i.useEffect)(function(){if(t.length>0&&0===A.length){var e=t.map(function(e){var t={};for(var a in e){var r=n.find(function(e){return e.tag===a});r&&(t[r.tag]=E.a.get(e,r.tag))}return Object(c.a)({},t,{_id:_()})});z(e.map(function(){return!1})),T(e)}},[t,T]),Object(i.useEffect)(function(){var e;(e=A,function(t){t({type:b,payload:e})})(h),j(A)},[A,h]);var J=Object(i.useState)({}),Y=Object(r.a)(J,2),q=Y[0],K=Y[1],W=Object(i.useState)({}),Q=Object(r.a)(W,2),X=Q[0],Z=Q[1],$=Object(i.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ae=Object(i.useState)({}),re=Object(r.a)(ae,2),ce=re[0],ie=re[1];Object(i.useEffect)(function(){var e={};n.forEach(function(t){"select"===t.type&&(e[t.tag]=t.options)}),ie(e)},[ie]),Object(i.useEffect)(function(){if(L===k){var e=_();T(A.concat(y(A[0],e))),oe(y(A[0],e)),z(M.concat(!0))}},[L]);var oe=function(e){Z(v),K(Object(c.a)({},H,e))};Object(i.useEffect)(function(){var e=O.a.validate(q,X,{abortEarly:!1}).error;e?(console.warn(e),ne(!1)):Object.values(q).length>1&&ne(!0)},[q]);var ue=function(e){var t=e.currentTarget,n=t.name,r=t.value,i=t.callback;K(Object(c.a)({},q,Object(a.a)({},n,r)));i({name:n,value:r,setOptions:function(e,t){var n=ce;Object.keys(ce).findIndex(function(t){return t===e})>=0&&(n[e]=t,ie(n))},options:ce,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.map(function(e){var n=e.name,a=e.value;return t[n]=a,null}),K(Object(c.a)({},q,t))},formData:q})};return Object(i.useEffect)(function(){var e={};n.forEach(function(t){t.defaultValue&&(e=Object(c.a)({},e,Object(a.a)({},t.tag,t.defaultValue)))}),Object.values(e).length>0&&(K(Object(c.a)({},q,e)),B(e))},[n,K]),o.a.createElement(u.a,{size:"md",responsive:!0,striped:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,n.filter(function(e){return!Boolean(e.isView)}).map(function(e){return o.a.createElement("th",null,e.label)}))),o.a.createElement("tbody",null,A.map(function(e,t){return o.a.createElement("tr",null,n.filter(function(e){return!Boolean(e.isView)}).map(function(n){return M[t]&&!n.noEdit?o.a.createElement("td",null,"select"===n.type?o.a.createElement(s.a,{type:n.type,name:n.tag,value:E.a.get(q,n.tag),onChange:function(e){var t=e.currentTarget,a=t.name,r=t.value,c=n.callback?n.callback:function(){return null};ue({currentTarget:{name:a,value:r,callback:c}})},disabled:n.disabled},o.a.createElement("option",null),"server"===n.optionsFrom?ce[n.tag].map(function(e){return o.a.createElement("option",{value:e.id},e.name)}):ce[n.tag].map(function(e){return o.a.createElement("option",{value:e},e)})):o.a.createElement(s.a,{type:n.type?n.type:"text",name:n.tag,disabled:n.disabled,value:E.a.get(q,n.tag),onChange:function(e){var t=e.currentTarget,a=t.name,r=t.value,c=n.callback?n.callback:function(){return null};ue({currentTarget:{name:a,value:r,callback:c}})}})):o.a.createElement("td",null,function(e,t){if("server"!==t.optionsFrom)return e[t.tag];var n=t.options.find(function(n){return String(n.id)===String(e[t.tag])});return n?n.name:void 0}(e,n))}),f?o.a.createElement("td",null,M[t]?o.a.createElement("div",null,o.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){T(A.map(function(e){return e._id===q._id?Object(c.a)({_id:_()},q):e})),z(M.map(function(){return!1})),R(x)},disabled:!te},"Save"),o.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){!function(){if(L===k){var e=A.findIndex(function(e){return e._id===q._id});e>=0&&(T(A.filter(function(t,n){return e!==n})),z(M.filter(function(t,n){return e!==n}))),ne(!0)}else z(M.map(function(){return!1}));R(N),Z({})}()}},"Cancel")):o.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){z(M.map(function(e,n){return n===t})),oe(e),R(S)}},o.a.createElement(m.s,null))):o.a.createElement(o.a.Fragment,null),d?o.a.createElement("td",null,o.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){return function(e){var t=A.findIndex(function(t){return t._id===e});t>=0&&(T(A.filter(function(e,n){return n!==t})),z(M.filter(function(e,n){return n!==t})),R(N))}(e._id)}},o.a.createElement(m.p,null))):o.a.createElement(o.a.Fragment,null))})))},w=n(1788),A=function(e){var t=e.data,n=e.columns,a=e.callback,c=e.schema,u=e.lineTag,s=e.disabled,m=e.startForm,f=Object(i.useReducer)(g,d),p=Object(r.a)(f,2),b=p[0],h=p[1],O=Object(i.useState)(!1),j=Object(r.a)(O,2),E=j[0],_=j[1];Object(i.useEffect)(function(){m&&v(h)},[m,h]);return o.a.createElement("div",null,s?o.a.createElement(o.a.Fragment,null):o.a.createElement(w.a,{align:"right",className:"mb-1 pl-3 pr-3"},o.a.createElement(l.a,{className:"m-1 align-right",size:"sm",outline:!0,color:"info",onClick:function(){return v(h)}},u||"Add Line")),o.a.createElement(D,Object.assign({},b,{dispatch:h,data:t,schema:c,columns:n,callback:function(e){!E&&e.length>0&&Object.values(e[0]).length>1?(a(e),_(!0)):b._data.length>=e.length&&a(e)},hasEdit:!s,hasDelete:!s})))};n.d(t,"a",function(){return D}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return g}),n.d(t,"b",function(){return A})},1795:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return u});var a=n(38),r="current_department",c=function(e){return e[r]?e[r]:null},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t({type:a.a.UPDATE,stateName:r,payload:{department:n}})},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t({type:a.a.UPDATE,stateName:r,payload:{permissions:n}})},u={create:!0,read:!0,update:!0,delete:!0}},2392:function(e,t,n){"use strict";n.r(t);var a,r,c=n(7),i=n(3),o=n(43),u=n(1),s=n.n(u),l=n(1574),m=n(1555),f=n(1788),d=n(1549),p=n(112),b=n.n(p),g=n(178),v=n(27),h=n(28),O=n(179),j=n(33),E=n(34),_=n(23),y=n(1550),k=n(1556),C=n(1787),S=n(1577),x=n(1603),N=n(1576),D=n.n(N),w="customer_address_lines",A="customer_contact_lines",T=(a={id:D.a.string().allow("").optional(),number:D.a.string().allow("").optional(),name:D.a.string(),tin_number:D.a.number(),currency:D.a.string().required(),customer_posting_group:D.a.string(),vat_posting_group:D.a.string(),credit_limit:D.a.number(),remarks:D.a.string().allow("").optional()},Object(c.a)(a,w,D.a.array().items(D.a.object()).min(1)),Object(c.a)(a,A,D.a.array().items(D.a.object()).min(0)),a),P={data:(r={id:"",number:"",name:"",tin_number:"",currency:"",customer_posting_group:"",vat_posting_group:"",credit_limit:"",remarks:""},Object(c.a)(r,A,[]),Object(c.a)(r,w,[]),r),lineCounter:1,errors:{}},F=function(e){return e[w].map(function(e){return{country:e.country.country_id,region:e.region.region_id,city:e.city.id,p_o_box:e.p_o_box,is_head_office:e.is_head_office?"Yes":"No",office_telephone_number:e.office_telephone_number,remarks:e.remarks}})},L=function(e){return e[A].map(function(e){return{_id:e.id,name:e.name,office_telephone_number:e.office_telephone_number,mobile_phone_number:e.mobile_phone_number,email:e.email,remarks:e.remarks}})},R={_id:D.a.any().allow("").optional(),country:D.a.string(),region:D.a.string(),city:D.a.string(),p_o_box:D.a.string(),is_head_office:D.a.string(),office_telephone_number:D.a.string(),remarks:D.a.string().allow("").optional()},I={_id:D.a.any().allow("").optional(),name:D.a.string(),office_telephone_number:D.a.string(),mobile_phone_number:D.a.string(),email:D.a.string(),remarks:D.a.string().allow("").optional()},G=n(66),M=n(177);function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(_.a)(e);if(t){var r=Object(_.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}var V=function(e){Object(j.a)(n,e);var t=z(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).doSubmit=Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.submit(a.state.data);case 1:case"end":return e.stop()}},e)})),a.initialState=P,a.state=JSON.parse(JSON.stringify(a.initialState)),a.schema=T,a.populateState=a.populateState.bind(Object(O.a)(a)),a.updateAddressLines=a.updateAddressLines.bind(Object(O.a)(a)),a.updateContactLines=a.updateContactLines.bind(Object(O.a)(a)),a.lineMapper=a.lineMapper.bind(Object(O.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"lineMapper",value:function(){return this.props.isEdit||this.props.isView?F(this.props.data):[]}},{key:"populateState",value:function(e){var t=function(e){var t;return t={id:e.id?e.id:"",number:e.document_number,name:e.name,tin_number:Number(e.tin_number),currency:e.currency.id,customer_posting_group:e.customer_posting_group.id,vat_posting_group:e.vat_posting_group.id,credit_limit:e.credit_limit,remarks:e.remarks},Object(c.a)(t,w,F(e)),Object(c.a)(t,A,L(e)),t}(e);this.setState({lockUpdate:!0,data:t})}},{key:"updateAddressLines",value:function(e){(e.length>0||this.state.data[w].length>0)&&this.setState({data:Object(i.a)({},this.state.data,Object(c.a)({},w,e))})}},{key:"updateContactLines",value:function(e){(e.length>0||this.state.data[A].length>0)&&this.setState({data:Object(i.a)({},this.state.data,Object(c.a)({},A,e))})}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"render",value:function(){var e,t=this.props.options,n=t.postingGroups,a=t.currencies,r=t.vatPostingGroups;return s.a.createElement(d.a,{className:"border-0"},s.a.createElement(y.a,null,s.a.createElement(k.a,{onSubmit:this.handleSubmit},s.a.createElement(C.a,null,this.props.isView&&s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderInput({name:"number",label:"Customer Number"})),s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderInput({name:"name",label:"Customer Name"})),s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderInput({name:"tin_number",label:"Tin Number",type:"number"})),s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderSelect({name:"currency",label:"Currency",options:a,optionsFrom:"server"})),s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderSelect({name:"customer_posting_group",label:"Customer Posting Group",options:n,optionsFrom:"server"})),s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderSelect({name:"vat_posting_group",label:"VAT Posting Group",options:r,optionsFrom:"server"})),s.a.createElement(f.a,{md:4,sm:12,xs:12},this.renderInput({name:"credit_limit",label:"Credit Limit",type:"number"})),s.a.createElement(f.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea")),s.a.createElement(f.a,{md:12,sm:12,xs:12},"Address Line",s.a.createElement(x.b,{columns:(e=this.props.options,[{tag:"country",label:"Country",type:"select",options:e.countries,optionsFrom:"server"},{tag:"region",label:"Region",type:"select",options:e.regions,optionsFrom:"server"},{tag:"city",label:"Cities",type:"select",options:e.cities,optionsFrom:"server"},{tag:"p_o_box",label:"Postal Code",type:"text"},{tag:"is_head_office",label:"Is Head Office",type:"select",options:["Yes","No"]},{tag:"office_telephone_number",label:"Office Telephone Number",type:"text"},{tag:"remarks",label:"Remarks",type:"text"}]),disabled:this.props.disabled,data:this.state.data[w],callback:this.updateAddressLines,schema:R,startForm:this.props.isAdd})),s.a.createElement(f.a,{md:12,sm:12,xs:12},"Contact Line",s.a.createElement(x.b,{columns:[{tag:"name",label:"Name",type:"text"},{tag:"office_telephone_number",label:"Office Telephone Number",type:"text"},{tag:"mobile_phone_number",label:"Mobile Number",type:"text"},{tag:"email",label:"Email",type:"text"},{tag:"remarks",label:"Remarks",type:"text"}],disabled:this.props.disabled,data:this.state.data[A],callback:this.updateContactLines,schema:I,startForm:this.props.isAdd})),s.a.createElement(f.a,{size:"xl",align:"right"},this.renderButton("Save"))))))}}]),n}(S.a),U=Object(M.b)(G.f)(V),H=n(17),B=n(1582),J=n(1573),Y=n(1581),q=n(1579),K=n(109),W=n(1795),Q=function(e){var t=e.customers,n=e.addCustomer,a=e.editCustomer,r=e.deleteCustomer,c=e.doneAdd,p=e.doneEdit,b=e.postingGroups,g=e.vatPostingGroups,v=e.currencies,h=e.countries,O=e.regions,j=e.cities,E=Object(u.useReducer)(Y.c,Y.b),_=Object(o.a)(E,2),y=_[0],k=_[1],C=Object(u.useContext)(K.a).rootState,S=Object(u.useState)(W.a),x=Object(o.a)(S,2),N=x[0],D=x[1];Object(u.useEffect)(function(){var e=Object(W.b)(C);e&&e.permissions&&D(e.permissions.CUSTOMER)},[C]);var w=[{path:"document_number",label:"Customer Number"},{path:"name",label:"Customer Name"},{path:"tin_number",label:"Tin Number "},{path:"currency.symbol",label:"Currency"},{path:"credit_limit",label:"Credit Limit"},{key:"view",content:function(e){return s.a.createElement(s.a.Fragment,null,N.read?s.a.createElement(m.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(Y.a)({type:"VIEW",Component:U,data:e,title:"View Customer",options:{postingGroups:b,currencies:v,countries:h,regions:O,cities:j,vatPostingGroups:g}},k)}},s.a.createElement(H.M,null)):s.a.createElement(s.a.Fragment,null),N.update?s.a.createElement(m.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(Y.a)({type:"EDIT",title:"Edit Customer",Component:U,submit:a,isEdit:!0,data:e,options:{postingGroups:b,currencies:v,countries:h,regions:O,cities:j,vatPostingGroups:g}},k)}},s.a.createElement(H.s,null)):s.a.createElement(s.a.Fragment,null),N.delete?s.a.createElement(m.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(Y.a)({type:"DELETE",deleteOptions:{okCallback:A,title:"Are you sure?",id:e.id,message:""}},k)}},s.a.createElement(H.p,null)):s.a.createElement(s.a.Fragment,null))}}],A=function(e){r(e)};return Object(u.useEffect)(function(){(c||p)&&Object(Y.a)({type:"CLOSE"},k)},[c,p]),s.a.createElement("div",null,s.a.createElement(l.a,null,s.a.createElement(q.a,{data:y.data,openModal:y.openModal,component:y.Component,toggle:Y.a,dispatch:k,title:y.title}),N.create?s.a.createElement(f.a,{align:"right",className:"mb-1 pl-3 pr-3"},s.a.createElement(m.a,{onClick:function(){Object(Y.a)({type:"ADD",Component:U,submit:n,isEdit:!0,data:t,title:"Add Customer",options:{postingGroups:b,currencies:v,regions:O,cities:j,countries:h,vatPostingGroups:g}},k)},outline:!0,size:"sm"},"New Customer")):s.a.createElement(s.a.Fragment,null),N.read?s.a.createElement(d.a,{className:"border-0"},s.a.createElement(J.a,{title:"Customers",columns:w,data:Object(B.a)(t.map(function(e){return Object(i.a)({},e,{currency:e.currency?e.currency:{id:"",name:""},cic:e.currency?e.currency:{id:"",name:""}})}))})):s.a.createElement(s.a.Fragment,null)))},X=n(102),Z=n(19),$=n(54),ee=n(36),te=n(1575),ne=n(1580),ae=n(1557),re=n(71),ce=n(70),ie=n(55),oe=n(64),ue=n(58),se=n(45),le=n(60);t.default=Object(M.b)(function(e){return{fetchStatus:Object(G.l)(e),addStatus:Object(G.h)(e),customers:Object(G.i)(e),editStatus:Object(G.k)(e),deleteStatus:Object(G.j)(e),postingGroups:Object(re.h)(e),vatPostingGroups:Object(ce.j)(e),currencies:Object(ie.g)(e),countries:Object(oe.g)(e),regions:Object(ue.j)(e),cities:Object(se.g)(e),companyID:Object(le.c)(e)}},function(e){return{fetchCustomers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(Object(G.c)(t))},addCustomer:function(t){return e(Object(G.a)(t))},editCustomer:function(t){return e(Object(G.b)(t))},deleteCustomer:function(t){return e(Object(G.e)(t))}}})(function(e){var t=e.fetchStatus,n=e.addStatus,a=e.fetchCustomers,r=e.addCustomer,l=e.editStatus,m=e.editCustomer,f=e.deleteStatus,d=e.deleteCustomer,p=e.customers,b=e.postingGroups,g=e.vatPostingGroups,v=e.currencies,h=e.countries,O=e.regions,j=e.cities,E=e.companyID,_=Object(u.useState)([]),y=Object(o.a)(_,2),k=y[0],C=y[1],S=Object(u.useState)(!0),x=Object(o.a)(S,2),N=x[0],D=x[1],T=Object(u.useState)(!0),P=Object(o.a)(T,2),F=P[0],L=P[1],R=Object(u.useState)(!0),I=Object(o.a)(R,2),G=I[0],M=I[1],z=Object(u.useState)(!0),V=Object(o.a)(z,2),U=V[0],H=V[1],B=Object(u.useState)("document_number"),J=Object(o.a)(B,2),Y=J[0],q=J[1],K=Object(u.useContext)($.b),W=K.rootState,re=K.dispatch;Object(u.useEffect)(function(){try{var e=Object(te.b)(W).options,t=e.offset,n=e.limit;e.onClick&&a([{key:"offset",value:t},{key:"limit",value:n}])}catch(r){}},[Object(te.b)(W)]),Object(u.useEffect)(function(){C(p)},[p,C]);var ce=function(){var e=Object(u.useState)(Y),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(u.useEffect)(function(){return q(n)},[n]),s.a.createElement(s.a.Fragment,null,s.a.createElement(ae.a,{type:"select",onChange:function(e){var t=e.currentTarget.value;return a(t)}},s.a.createElement("option",{value:"document_number"},"By Customer Number"),s.a.createElement("option",{value:"name"},"Customer Name"),s.a.createElement("option",{value:"tin_number"},"Tin Number"),s.a.createElement("option",{value:"region"},"Region"),s.a.createElement("option",{value:"country"},"Country")))};Object(u.useEffect)(function(){Object(ee.e)({},re,!1),Object(ee.a)({},re,ce)},[re]);var ie=Object(u.useContext)($.c).searchValue;Object(u.useEffect)(function(){var e=[];e="country"===Y||"region"===Y?Object(ne.c)(p.map(function(e){return Object(i.a)({},e,Object(c.a)({},w,e[w].map(function(e){return Object(i.a)({},e,{country:e.city.country_name,region:e.city.region_name})})))}),Y,ie,w):Object(ne.b)(p,Y,ie,"document_number"===Y),C(e)},[ie,C,Y]),Object(u.useEffect)(function(){D(!1),a()},[a,D]),Object(u.useEffect)(function(){var e=t.status,n=t.response;e!==Z.e.failure||N?Object(te.d)(W,re,n):(X.toast.error("Failed fetching customers"),D(!0))},[t,D,re]),Object(u.useEffect)(function(){var e=n.status;e!==Z.e.failure||F?e!==Z.e.success||F||(X.toast.success("Added Customer"),L(!0)):L(!0)},[n,L]),Object(u.useEffect)(function(){var e=l.status;e!==Z.e.failure||G?e!==Z.e.success||G||(X.toast.success("Edited Customer"),M(!0)):M(!0)},[l,M]),Object(u.useEffect)(function(){var e=f.status;e!==Z.e.failure||U?e!==Z.e.success||U||(X.toast.success("Deleted Customer"),H(!0)):H(!0)},[f,H]);return s.a.createElement(Q,{doneAdd:n.status===Z.e.success&&!F,addCustomer:function(e){var t;L(!1);var n=(t={id:e.id,name:e.name,tin_number:e.tin_number,currency:e.currency,customer_posting_group:e.customer_posting_group,vat_posting_group:e.vat_posting_group,credit_limit:e.credit_limit,remarks:e.remarks,company:E},Object(c.a)(t,A,e[A]),Object(c.a)(t,w,e[w].map(function(e){return Object(i.a)({},e,{is_head_office:"Yes"===e.is_head_office})})),t);r(n)},doneEdit:l.status===Z.e.success&&!G,editCustomer:function(e){var t;M(!1);var n=(t={id:e.id,name:e.name,tin_number:e.tin_number,currency:e.currency,customer_posting_group:e.customer_posting_group,vat_posting_group:e.vat_posting_group,credit_limit:e.credit_limit,remarks:e.remarks,company:E},Object(c.a)(t,A,e[A]),Object(c.a)(t,w,e[w].map(function(e){return Object(i.a)({},e,{is_head_office:"Yes"===e.is_head_office})})),t);m(n)},doneDelete:f.status===Z.e.success&&!U,deleteCustomer:function(e){H(!1),d(e)},customers:k,postingGroups:b,currencies:v,countries:h,cities:j,regions:O,vatPostingGroups:g})})}}]);
//# sourceMappingURL=59.8b32a58d.chunk.js.map