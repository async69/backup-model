(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{1573:function(e,t,n){"use strict";var a=n(3),c=n(1),o=n.n(c),r=n(27),i=n(28),l=n(33),u=n(34),s=n(23);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var c=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var f=function(e){Object(l.a)(n,e);var t=p(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement("thead",null,o.a.createElement("tr",null,this.props.columns.map(function(e){return o.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),n}(c.Component),m=n(1583),d=n.n(m),b=n(53),_=n(43),g=/[0-9\-+#]/,v=/[^\d\-+#]/g;function h(e){return e.search(g)}function y(e,t,n){var a=!1,c={value:e};e<0&&(a=!0,c.value=-c.value),c.sign=a?"-":"",c.value=Number(c.value).toFixed(t.fraction&&t.fraction.length),c.value=Number(c.value).toString();var o=t.fraction&&t.fraction.lastIndexOf("0"),r=c.value.split("."),i=Object(_.a)(r,2),l=i[0],u=void 0===l?"0":l,s=i[1],p=void 0===s?"":s;return(!p||p&&p.length<=o)&&(p=o<0?"":Number("0."+p).toFixed(o+1).replace("0.","")),c.integer=u,c.fraction=p,function(e,t){e.result="";var n=t.integer.split(t.separator),a=n.join(""),c=a&&a.indexOf("0");if(c>-1)for(;e.integer.length<a.length-c;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var o=n[1]&&n[n.length-1].length;if(o)for(var r=e.integer.length,i=r%o,l=0;l<r;l++)e.result+=e.integer.charAt(l),!((l-i+1)%o)&&l<r-o&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(c,t),"0"!==c.result&&""!==c.result||(a=!1,c.sign=""),!a&&t.maskHasPositiveSign?c.sign="+":a&&t.maskHasPositiveSign?c.sign="-":a&&(c.sign=n&&n.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),c}var O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},n=e.length,a=h(e);t.prefix=a>0?e.substring(0,a):"";var c=h(e.split("").reverse().join("")),o=n-c,r=e.substring(o,o+1),i=o+("."===r||","===r?1:0);t.suffix=c>0?e.substring(i,n):"",t.mask=e.substring(a,i),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var l=t.mask.match(v);return t.decimal=l&&l[l.length-1]||".",t.separator=l&&l[1]&&l[0]||",",l=t.mask.split(t.decimal),t.integer=l[0],t.fraction=l[1],t}(e),c=y(t,a,n);return a.prefix+c.sign+c.result+a.suffix},j=n(1578),E=n(1584);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var c=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var S=function(e){Object(l.a)(n,e);var t=P(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).renderCell=function(e,t,n){if(console.log("loaded",n),t.content)return t.content(e,n);var a=d.a.get(e,t.path),c=j.findIndex(function(e){return e===String(t.path)});return E.findIndex(function(e){return e===String(t.path)})>=0?Object(b.e)(a):c>=0?O("#,###.00",a,{enforceMaskSign:!0}):a?String(a):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return o.a.createElement("tbody",null,n.map(function(t){return o.a.createElement("tr",{key:t.id},a.map(function(n){return o.a.createElement("td",{key:e.createKey(t,n)},e.renderCell(t,n,e.props.loading))}))}))}}]),n}(c.Component),x=n(1643),A=n(1644),k=n(1645),w=n(109),C=n(1575),G=function(){var e=Object(c.useContext)(w.a),t=e.rootState,n=e.dispatch,a=Object(c.useState)(0),r=Object(_.a)(a,2),i=r[0],l=r[1],u=Object(c.useState)(0),s=Object(_.a)(u,2),p=s[0],f=s[1],m=Object(c.useState)(0),d=Object(_.a)(m,2),b=d[0],g=d[1],v=Object(c.useState)(0),h=Object(_.a)(v,2),y=h[0],O=h[1],j=Object(c.useState)(!1),E=Object(_.a)(j,2),P=E[0],S=E[1],G=Object(c.useState)(!1),N=Object(_.a)(G,2),D=N[0],R=N[1],T=Object(c.useState)({count:0,results:[]}),F=Object(_.a)(T,2),L=F[0],M=F[1],q=Object(c.useState)(0),I=Object(_.a)(q,2),H=I[0],z=I[1],U=Object(c.useState)(""),V=Object(_.a)(U,2),B=V[0],J=V[1];Object(c.useEffect)(function(){Object(C.a)(t)},[t]),Object(c.useEffect)(function(){var e=L.count,t=L.results;0===t.length&&0===e||(O(Math.ceil(e/t.length)),f(t.length),g(e),S(!0))},[B,O,f,g,S]),Object(c.useEffect)(function(){if(H){var e=L.count,t=L.results;p<=t.length&&(O(Math.ceil(e/t.length)),f(t.length),g(e),S(!0))}},[H,L]),Object(c.useEffect)(function(){try{var e=Object(C.b)(t),n=e.results,a=e.amount,c=e.activeTab;if(""!==c?J(c):console.warn("Pass active tab for paginations"),a!==H&&"undefined"!==typeof a&&(z(a),M(n)),"undefined"!==String(n)&&!P){var o=n.count,r=n.results;O(Math.ceil(o/r.length)),f(r.length),g(o),S(!0)}}catch(i){}},[t,z,M]);var K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;D||R(!0),l(e),t&&f(t)};return Object(c.useEffect)(function(){i<b&&D&&Object(C.c)({},n,{offset:i,limit:p,onClick:D})},[i,p]),o.a.createElement("div",null,o.a.createElement(x.a,{className:"pagination left",size:"md",color:"primary"},o.a.createElement(A.a,{disabled:0===i},o.a.createElement(k.a,{first:!0,href:"#",onClick:function(){return K(0)}},"First")),o.a.createElement(A.a,null,o.a.createElement(k.a,{previous:!0,disabled:0===i,onClick:function(){return K(i-p)}})),Array(y).fill("").map(function(e,t){return o.a.createElement(A.a,{active:t===Math.floor(i/p)},o.a.createElement(k.a,{onClick:function(){return K(t*p)}},t+1))}),o.a.createElement(A.a,null,o.a.createElement(k.a,{next:!0,onClick:function(){return K(i+p)},disabled:i+p>=b})),o.a.createElement(A.a,{disabled:i+p>=b},o.a.createElement(k.a,{last:!0,onClick:function(){return K((y-1)*p)}},"Last"))))},N=n(1549),D=n(1554),R=n(1619),T=n(177);t.a=Object(T.b)(function(e,t){return Object(a.a)({state:e},t)})(function(e){var t=e.columns,n=e.data,a=e.title,r=e.state,i=e.getLoading;Object(c.useEffect)(function(){"function"===typeof i&&console.log("result",i(r,{isPatch:!0}))},[r,i]);var l=Object(c.useContext)(w.a).rootState;return Object(c.useEffect)(function(){},[l]),console.log(i(r,{isPatch:!0})),o.a.createElement(N.a,{className:"p-2"},o.a.createElement(D.a,{className:"tableHeaders border-0"},o.a.createElement("div",null,""+a?a:"")),o.a.createElement(R.a,{size:"md",responsive:!0,striped:!0},o.a.createElement(f,{columns:t}),o.a.createElement(S,{data:n,columns:t,loading:"fucntion"===typeof i?i(r,{isPatch:!0}):{}}),o.a.createElement(G,null)))})},1575:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i});var a=n(38),c=function(e){return e.page_values?e.page_values:null},o=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof n){if(0===n.count)return null;t({type:a.a.UPDATE,stateName:"page_values",payload:{results:n,options:o,pageLimit:n.length?5*Math.ceil(n.length/5):5,amount:c(e)?c(e).amount+1:0,activeTab:r}})}},r=function(e){var t=e.page_values;try{var n=t.pageLimit?t.pageLimit:0;return n||0}catch(a){}},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:a.a.UPDATE,stateName:"page_values",payload:{options:n}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1580:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return o});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=void 0;return n.length>0&&(c=e.filter(function(e){var c=a?"":"^";try{return n&&String(e[t]).match(new RegExp(c+n,"gi"))}catch(o){console.error("Tag does not exist: ".concat(String(o)))}return null})),"undefined"===typeof c?e:c},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posting_date",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=void 0;return n.length>0&&a.length>0&&(c=e.filter(function(e){try{var c=new Date(e[t]).getTime(),o=new Date(n).getTime(),r=new Date(a).getTime();return n&&a&&c<=r&&c>=o}catch(i){console.error("Tag does not exist: ".concat(String(i)))}return null})),"undefined"===typeof c?e:c},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"country",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addresses",c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=void 0;return n.length>0&&(o=e.filter(function(e){var o=c?"":"^";try{var r=e[a].findIndex(function(e){return e[t].match(new RegExp(o+n,"gi"))});return n&&r>=0}catch(i){console.error("Tag does not exist: ".concat(String(i)))}return null})),"undefined"===typeof o?e:o}},2439:function(e,t,n){"use strict";n.r(t);var a=n(43),c=n(1),o=n.n(c),r=n(1574),i=n(1555),l=n(1788),u=n(1549),s=n(1550),p=n(1579),f=n(3),m=n(27),d=n(28),b=n(33),_=n(34),g=n(23),v=n(1577),h=n(1576),y=n.n(h),O=n(1554),j=n(1556),E=n(1787),P=n(1622);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(g.a)(e);if(t){var c=Object(g.a)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return Object(_.a)(this,n)}}var x=function(e){Object(b.a)(n,e);var t=S(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).initialState={data:{id:"",salary_expense_account:"",overtime_account:"",employee_pension_account:"",transport_allowance_account:"",loan_account:"",local_sales_account:"",income_tax_account:"",pension_contribution_account:""},errors:{}},a.state=a.initialState,a.schema={id:y.a.string().allow("").optional(),salary_expense_account:y.a.string().required().label("Salary Expense Account"),overtime_account:y.a.string().required().label("Overtime Account"),employee_pension_account:y.a.string().required().label("Employee Pension Account"),transport_allowance_account:y.a.string().required().label("Transport Allowance Account"),loan_account:y.a.string().required().label("Local Account"),local_sales_account:y.a.string().required().label("Local Sales Account"),income_tax_account:y.a.string().required().label("Income Tax Account"),pension_contribution_account:y.a.string().required().label("Pension Contribution Account")},a}return Object(d.a)(n,[{key:"populateState",value:function(e){var t=Object(f.a)({},this.state,{data:{id:e.id?e.id:"",salary_expense_account:e.salary_expense_account?e.salary_expense_account.id:"",overtime_account:e.overtime_account?e.overtime_account.id:"",employee_pension_account:e.employee_pension_account?e.employee_pension_account.id:"",transport_allowance_account:e.transport_allowance_account?e.transport_allowance_account.id:"",loan_account:e.loan_account?e.loan_account.id:"",local_sales_account:e.local_sales_account?e.local_sales_account.id:"",income_tax_account:e.income_tax_account?e.income_tax_account.id:"",pension_contribution_account:e.pension_contribution_account?e.pension_contribution_account.id:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){var e=this.props.options;return o.a.createElement(u.a,{className:"border-0"},o.a.createElement(O.a,{className:"border-0"},this.props.title),o.a.createElement(s.a,null,o.a.createElement(j.a,{onSubmit:this.handleSubmit},o.a.createElement(E.a,null,o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"salary_expense_account",label:"Salary Expense Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"overtime_account",label:"Overtime Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"employee_pension_account",label:"Employee Pension Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"transport_allowance_account",label:"Transport Allowance Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"loan_account",label:"Loan Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"local_sales_account",label:"Local Sales Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"income_tax_account",label:"Income Tax Account",options:e,optionsFrom:"server"})),o.a.createElement(l.a,{md:6,sm:12,xs:12},this.renderSelect({name:"pension_contribution_account",label:"Pension Contribution Account",options:e,optionsFrom:"server"}))),o.a.createElement(P.a,{align:"center"},this.renderButton("Save")))))}}]),n}(v.a),A=n(17),k=n(1573),w=n(1581),C=function(e){var t=e.doneAdd,n=e.addPayrollPostingGroup,f=e.doneEdit,m=e.editPayrollPostingGroup,d=e.deletePayrollPostingGroup,b=e.payrollPostingGroups,_=e.chartOfAccounts,g=Object(c.useReducer)(w.c,w.b),v=Object(a.a)(g,2),h=v[0],y=v[1],O=[{path:"salary_expense_account.name",label:"Salary Expense Account"},{path:"overtime_account.name",label:"Overtime Account"},{path:"employee_pension_account.name",label:"Emplyee Pension Account"},{path:"transport_allowance_account.name",label:"Transport Allowance Account"},{path:"loan_account.name",label:"Loan Account"},{path:"local_sales_account.name",label:"Local Sales Account"},{path:"income_tax_account.name",label:"Income Tax Account"},{path:"pension_contribution_account.name",label:"Pension Contribution Account"},{key:"view",content:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(w.a)({type:"VIEW",Component:x,data:e,title:"View PayrollPostingGroup",options:_},y)}},o.a.createElement(A.M,null)),o.a.createElement(i.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(w.a)({type:"EDIT",Component:x,submit:m,data:e,title:"Edit PayrollPostingGroup",options:_},y)}},o.a.createElement(A.s,null)),o.a.createElement(i.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(w.a)({type:"DELETE",deleteOptions:{okCallback:j,title:"Are you sure?",id:e.id,message:""}},y)}},o.a.createElement(A.p,null)))}}];Object(c.useEffect)(function(){(t||f)&&Object(w.a)({type:"CLOSE"},y)},[t,f]);var j=function(e){d(e)};return o.a.createElement("div",null,o.a.createElement(r.a,{title:"PayrollPostingGroup",breadcrumbs:[{name:"Human Resource",active:!0}]},o.a.createElement(p.a,{data:h.data,openModal:h.openModal,component:h.Component,toggle:w.a,dispatch:y,title:h.title}),o.a.createElement(l.a,{align:"right",className:"mb-1 pl-3 pr-3"},o.a.createElement(i.a,{onClick:function(){return Object(w.a)({type:"ADD",Component:x,submit:n,title:"New PayrollPostingGroup",options:_},y)},outline:!0,size:"sm"},"New Payroll Posting Group")),o.a.createElement(u.a,{className:"border-0"},o.a.createElement(s.a,null,o.a.createElement(k.a,{title:"Payroll Posting Groups",columns:O,data:b})))))},G=n(148),N=n(177),D=n(102),R=n(19),T=n(54),F=n(36),L=n(1580),M=n(1557),q=n(44);t.default=Object(N.b)(function(e){return{fetchStatus:Object(G.i)(e),addStatus:Object(G.f)(e),editStatus:Object(G.h)(e),deleteStatus:Object(G.g)(e),payrollPostingGroups:Object(G.j)(e),chartOfAccounts:Object(q.h)(e)}},function(e){return{fetchPayrollPostingGroups:function(){return e(Object(G.c)())},addPayrollPostingGroup:function(t){return e(Object(G.a)(t))},editPayrollPostingGroup:function(t){return e(Object(G.b)(t))},deletePayrollPostingGroup:function(t){return e(Object(G.d)(t))}}})(function(e){var t=e.fetchStatus,n=e.addStatus,r=e.fetchPayrollPostingGroups,i=e.addPayrollPostingGroup,l=e.editStatus,u=e.editPayrollPostingGroup,s=e.deleteStatus,p=e.deletePayrollPostingGroup,f=e.payrollPostingGroups,m=e.chartOfAccounts,d=Object(c.useState)([]),b=Object(a.a)(d,2),_=b[0],g=b[1],v=Object(c.useState)(!0),h=Object(a.a)(v,2),y=h[0],O=h[1],j=Object(c.useState)(!0),E=Object(a.a)(j,2),P=E[0],S=E[1],x=Object(c.useState)(!0),A=Object(a.a)(x,2),k=A[0],w=A[1],G=Object(c.useState)(!0),N=Object(a.a)(G,2),q=N[0],I=N[1],H=Object(c.useState)("name"),z=Object(a.a)(H,2),U=z[0],V=z[1];Object(c.useEffect)(function(){g(f)},[f,g]);var B=Object(c.useContext)(T.c).searchValue,J=Object(c.useContext)(T.b).dispatch,K=function(){return o.a.createElement(M.a,{type:"select",onChange:function(e){var t=e.currentTarget.value;return V(t)}},o.a.createElement("option",{value:"name"},"By Name"),o.a.createElement("option",{value:"code"},"By Code"))};Object(c.useEffect)(function(){Object(F.a)({},J,K)},[J]),Object(c.useEffect)(function(){g(Object(L.b)(f,U,B))},[B,g,U]),Object(c.useEffect)(function(){O(!1),r()},[r,O]),Object(c.useEffect)(function(){t.status!==R.e.failure||y||(D.toast.error("Failed fetching Payroll Posting Groups"),O(!0))},[t,O]),Object(c.useEffect)(function(){var e=n.status;e!==R.e.failure||P?e!==R.e.success||P||(D.toast.success("Added Payroll Posting Group"),S(!0)):S(!0)},[n,S]),Object(c.useEffect)(function(){var e=l.status;e!==R.e.failure||k?e!==R.e.success||k||(D.toast.success("Edited Payroll Posting Group"),w(!0)):w(!0)},[l,w]),Object(c.useEffect)(function(){var e=s.status;e!==R.e.failure||q?e!==R.e.success||q||(D.toast.success("Deleted Payroll Posting Group"),I(!0)):I(!0)},[s,I]);return o.a.createElement(C,{doneAdd:n.status===R.e.success&&!P,addPayrollPostingGroup:function(e){S(!1);var t={salary_expense_account:e.salary_expense_account,overtime_account:e.overtime_account,employee_pension_account:e.employee_pension_account,transport_allowance_account:e.transport_allowance_account,loan_account:e.loan_account,local_sales_account:e.local_sales_account,income_tax_account:e.income_tax_account,pension_contribution_account:e.pension_contribution_account};i(t)},doneEdit:l.status===R.e.success&&!k,editPayrollPostingGroup:function(e){w(!1),console.log(e);var t={id:e.id,salary_expense_account:e.salary_expense_account,overtime_account:e.overtime_account,employee_pension_account:e.employee_pension_account,transport_allowance_account:e.transport_allowance_account,loan_account:e.loan_account,local_sales_account:e.local_sales_account,income_tax_account:e.income_tax_account,pension_contribution_account:e.pension_contribution_account};u(t)},doneDelete:s.status===R.e.success&&!q,deletePayrollPostingGroup:function(e){I(!1),p(e)},payrollPostingGroups:_,chartOfAccounts:m})})}}]);
//# sourceMappingURL=93.daba3fb2.chunk.js.map