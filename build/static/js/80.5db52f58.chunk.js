(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{1573:function(e,t,a){"use strict";var n=a(3),r=a(1),c=a.n(r),i=a(27),s=a(28),u=a(33),l=a(34),o=a(23);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var f=function(e){Object(u.a)(a,e);var t=d(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return c.a.createElement("thead",null,c.a.createElement("tr",null,this.props.columns.map(function(e){return c.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),a}(r.Component),m=a(1583),p=a.n(m),b=a(53),h=a(43),v=/[0-9\-+#]/,g=/[^\d\-+#]/g;function O(e){return e.search(v)}function j(e,t,a){var n=!1,r={value:e};e<0&&(n=!0,r.value=-r.value),r.sign=n?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var c=t.fraction&&t.fraction.lastIndexOf("0"),i=r.value.split("."),s=Object(h.a)(i,2),u=s[0],l=void 0===u?"0":u,o=s[1],d=void 0===o?"":o;return(!d||d&&d.length<=c)&&(d=c<0?"":Number("0."+d).toFixed(c+1).replace("0.","")),r.integer=l,r.fraction=d,function(e,t){e.result="";var a=t.integer.split(t.separator),n=a.join(""),r=n&&n.indexOf("0");if(r>-1)for(;e.integer.length<n.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var c=a[1]&&a[a.length-1].length;if(c)for(var i=e.integer.length,s=i%c,u=0;u<i;u++)e.result+=e.integer.charAt(u),!((u-s+1)%c)&&u<i-c&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(n=!1,r.sign=""),!n&&t.maskHasPositiveSign?r.sign="+":n&&t.maskHasPositiveSign?r.sign="-":n&&(r.sign=a&&a.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var E=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},a=e.length,n=O(e);t.prefix=n>0?e.substring(0,n):"";var r=O(e.split("").reverse().join("")),c=a-r,i=e.substring(c,c+1),s=c+("."===i||","===i?1:0);t.suffix=r>0?e.substring(s,a):"",t.mask=e.substring(n,s),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var u=t.mask.match(g);return t.decimal=u&&u[u.length-1]||".",t.separator=u&&u[1]&&u[0]||",",u=t.mask.split(t.decimal),t.integer=u[0],t.fraction=u[1],t}(e),r=j(t,n,a);return n.prefix+r.sign+r.result+n.suffix},y=a(1578),S=a(1584);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var k=function(e){Object(u.a)(a,e);var t=_(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,a){if(console.log("loaded",a),t.content)return t.content(e,a);var n=p.a.get(e,t.path),r=y.findIndex(function(e){return e===String(t.path)});return S.findIndex(function(e){return e===String(t.path)})>=0?Object(b.e)(n):r>=0?E("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return c.a.createElement("tbody",null,a.map(function(t){return c.a.createElement("tr",{key:t.id},n.map(function(a){return c.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a,e.props.loading))}))}))}}]),a}(r.Component),P=a(1643),x=a(1644),N=a(1645),C=a(109),D=a(1575),Y=function(){var e=Object(r.useContext)(C.a),t=e.rootState,a=e.dispatch,n=Object(r.useState)(0),i=Object(h.a)(n,2),s=i[0],u=i[1],l=Object(r.useState)(0),o=Object(h.a)(l,2),d=o[0],f=o[1],m=Object(r.useState)(0),p=Object(h.a)(m,2),b=p[0],v=p[1],g=Object(r.useState)(0),O=Object(h.a)(g,2),j=O[0],E=O[1],y=Object(r.useState)(!1),S=Object(h.a)(y,2),_=S[0],k=S[1],Y=Object(r.useState)(!1),R=Object(h.a)(Y,2),w=R[0],A=R[1],M=Object(r.useState)({count:0,results:[]}),F=Object(h.a)(M,2),I=F[0],L=F[1],q=Object(r.useState)(0),z=Object(h.a)(q,2),H=z[0],T=z[1],U=Object(r.useState)(""),V=Object(h.a)(U,2),J=V[0],K=V[1];Object(r.useEffect)(function(){Object(D.a)(t)},[t]),Object(r.useEffect)(function(){var e=I.count,t=I.results;0===t.length&&0===e||(E(Math.ceil(e/t.length)),f(t.length),v(e),k(!0))},[J,E,f,v,k]),Object(r.useEffect)(function(){if(H){var e=I.count,t=I.results;d<=t.length&&(E(Math.ceil(e/t.length)),f(t.length),v(e),k(!0))}},[H,I]),Object(r.useEffect)(function(){try{var e=Object(D.b)(t),a=e.results,n=e.amount,r=e.activeTab;if(""!==r?K(r):console.warn("Pass active tab for paginations"),n!==H&&"undefined"!==typeof n&&(T(n),L(a)),"undefined"!==String(a)&&!_){var c=a.count,i=a.results;E(Math.ceil(c/i.length)),f(i.length),v(c),k(!0)}}catch(s){}},[t,T,L]);var B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;w||A(!0),u(e),t&&f(t)};return Object(r.useEffect)(function(){s<b&&w&&Object(D.c)({},a,{offset:s,limit:d,onClick:w})},[s,d]),c.a.createElement("div",null,c.a.createElement(P.a,{className:"pagination left",size:"md",color:"primary"},c.a.createElement(x.a,{disabled:0===s},c.a.createElement(N.a,{first:!0,href:"#",onClick:function(){return B(0)}},"First")),c.a.createElement(x.a,null,c.a.createElement(N.a,{previous:!0,disabled:0===s,onClick:function(){return B(s-d)}})),Array(j).fill("").map(function(e,t){return c.a.createElement(x.a,{active:t===Math.floor(s/d)},c.a.createElement(N.a,{onClick:function(){return B(t*d)}},t+1))}),c.a.createElement(x.a,null,c.a.createElement(N.a,{next:!0,onClick:function(){return B(s+d)},disabled:s+d>=b})),c.a.createElement(x.a,{disabled:s+d>=b},c.a.createElement(N.a,{last:!0,onClick:function(){return B((j-1)*d)}},"Last"))))},R=a(1549),w=a(1554),A=a(1619),M=a(177);t.a=Object(M.b)(function(e,t){return Object(n.a)({state:e},t)})(function(e){var t=e.columns,a=e.data,n=e.title,i=e.state,s=e.getLoading;Object(r.useEffect)(function(){"function"===typeof s&&console.log("result",s(i,{isPatch:!0}))},[i,s]);var u=Object(r.useContext)(C.a).rootState;return Object(r.useEffect)(function(){},[u]),console.log(s(i,{isPatch:!0})),c.a.createElement(R.a,{className:"p-2"},c.a.createElement(w.a,{className:"tableHeaders border-0"},c.a.createElement("div",null,""+n?n:"")),c.a.createElement(A.a,{size:"md",responsive:!0,striped:!0},c.a.createElement(f,{columns:t}),c.a.createElement(k,{data:a,columns:t,loading:"fucntion"===typeof s?s(i,{isPatch:!0}):{}}),c.a.createElement(Y,null)))})},1575:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return i}),a.d(t,"c",function(){return s});var n=a(38),r=function(e){return e.page_values?e.page_values:null},c=function(e,t,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;t({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:c,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:i}})}},i=function(e){var t=e.page_values;try{var a=t.pageLimit?t.pageLimit:0;return a||0}catch(n){}},s=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1582:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},2036:function(e){e.exports=["Opened","Closed"]},2397:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(1),c=a.n(r),i=a(3),s=a(1574),u=a(1555),l=a(1788),o=a(1549),d=a(1550),f=a(1579),m=a(27),p=a(28),b=a(33),h=a(34),v=a(23),g=a(1577),O=a(1576),j=a.n(O),E=a(1556),y=a(1787),S=a(1622),_=a(2036);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(v.a)(e);if(t){var r=Object(v.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(h.a)(this,a)}}var P=function(e){Object(b.a)(a,e);var t=k(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).initialState={data:{id:"",name:"",fiscalYear:"",start_date:"",end_date:"",state:""},errors:{}},n.state=n.initialState,n.schema={id:j.a.string().allow("").optional(),name:j.a.string().required().label("Name"),fiscalYear:j.a.string().required().label("Fiscal Year"),start_date:j.a.string().required().label("Start Date"),end_date:j.a.string().required().label("End Date"),state:j.a.string().required().label("State")},n}return Object(p.a)(a,[{key:"populateState",value:function(e){var t=Object(i.a)({},this.state,{data:{id:e.id?e.id:"",name:e.name?e.name:"",fiscalYear:e.fiscal_year?e.fiscal_year:"",start_date:e.start_date?e.start_date:"",end_date:e.end_date?e.end_date:"",state:e.state?e.state:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){var e=this.props.options.fiscalYears;return c.a.createElement(o.a,{className:"border-0"},c.a.createElement(d.a,null,c.a.createElement(E.a,{onSubmit:this.handleSubmit},c.a.createElement(y.a,null,c.a.createElement(l.a,{md:4,sm:12,xs:12},this.renderSelect({name:"fiscalYear",label:"Fiscal Year",options:e.map(function(e){return Object(i.a)({},e,{name:e.year})}),optionsFrom:"server"})),c.a.createElement(l.a,{md:4,sm:12,xs:12},this.renderInput({name:"name",label:"Name"})),c.a.createElement(l.a,{md:4,sm:12,xs:12},this.renderInput({name:"start_date",label:"Start Date",type:"date"})),c.a.createElement(l.a,{md:4,sm:12,xs:12},this.renderInput({name:"end_date",label:"End Date",type:"date"})),c.a.createElement(l.a,{md:4,sm:12,xs:12},this.renderSelect({name:"state",label:"State",options:_}))),c.a.createElement(S.a,{align:"center"},this.renderButton("Save")))))}}]),a}(g.a),x=a(1573),N=a(1582),C=a(17),D=a(1581),Y=a(53),R=function(e){var t=e.addPeriod,a=e.editPeriod,m=e.deletePeriod,p=e.periods,b=e.doneAdd,h=e.doneEdit,v=e.fiscalYears,g=Object(r.useReducer)(D.c,D.b),O=Object(n.a)(g,2),j=O[0],E=O[1],y=function(e){m(e)};Object(r.useEffect)(function(){(b||h)&&Object(D.a)({type:"CLOSE"},E)},[b,h]);var S=[{path:"name",label:"Name"},{path:"fiscal_year",label:"Fiscal Year"},{path:"start_date",label:"Start Date"},{path:"end_date",label:"End Date"},{path:"state",label:"State"},{path:"updated_at",label:"Last Modified"},{key:"view",content:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(D.a)({type:"VIEW",Component:P,data:e,title:"View Period",options:{fiscalYears:v}},E)}},c.a.createElement(C.M,null)),c.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(D.a)({type:"EDIT",Component:P,data:e,submit:a,title:"Edit Period",options:{fiscalYears:v}},E)}},c.a.createElement(C.s,null)),c.a.createElement(u.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(D.a)({type:"DELETE",deleteOptions:{okCallback:y,title:"Are you sure?",id:e.id,message:""}},E)}},c.a.createElement(C.p,null)))}}];return c.a.createElement("div",null,c.a.createElement(f.a,{data:j.data,openModal:j.openModal,component:j.Component,title:j.title,toggle:D.a,dispatch:E}),c.a.createElement(s.a,null,c.a.createElement(l.a,{align:"right",className:"mb-1 pl-3 pr-3"},c.a.createElement(u.a,{onClick:function(){return Object(D.a)({type:"ADD",Component:P,submit:t,title:"Add Period",options:{fiscalYears:v}},E)},outline:!0,size:"sm"},"New Period")),c.a.createElement(o.a,{className:"border-0"},c.a.createElement(d.a,null,c.a.createElement(x.a,{title:"Periods",columns:S,data:Object(N.a)(p.map(function(e){return Object(i.a)({},e,{updated_at:Object(Y.d)(e.updated_at)})}))})))))},w=a(137),A=a(177),M=a(102),F=a(19),I=a(83);t.default=Object(A.b)(function(e){return{fetchStatus:Object(w.i)(e),addStatus:Object(w.f)(e),editStatus:Object(w.h)(e),deleteStatus:Object(w.g)(e),periods:Object(w.j)(e),fiscalYears:Object(I.k)(e)}},function(e){return{fetchPeriods:function(){return e(Object(w.c)())},addPeriod:function(t){return e(Object(w.a)(t))},editPeriod:function(t){return e(Object(w.b)(t))},deletePeriod:function(t){return e(Object(w.d)(t))}}})(function(e){var t=e.fetchStatus,a=e.addStatus,i=e.fetchPeriods,s=e.addPeriod,u=e.editStatus,l=e.editPeriod,o=e.deleteStatus,d=e.deletePeriod,f=e.periods,m=e.fiscalYears,p=Object(r.useState)(!0),b=Object(n.a)(p,2),h=b[0],v=b[1],g=Object(r.useState)(!0),O=Object(n.a)(g,2),j=O[0],E=O[1],y=Object(r.useState)(!0),S=Object(n.a)(y,2),_=S[0],k=S[1],P=Object(r.useState)(!0),x=Object(n.a)(P,2),N=x[0],C=x[1];Object(r.useEffect)(function(){v(!1),i()},[i,v]),Object(r.useEffect)(function(){t.status!==F.e.failure||h||(M.toast.error("Failed Fetching Periods"),v(!0))},[t,v]),Object(r.useEffect)(function(){var e=a.status;e!==F.e.failure||j?e!==F.e.success||j||(M.toast.success("Added Period"),E(!0)):E(!0)},[a,E]),Object(r.useEffect)(function(){var e=u.status;e!==F.e.failure||_?e!==F.e.success||_||(M.toast.success("Edited Period"),k(!0)):k(!0)},[u,k]),Object(r.useEffect)(function(){var e=o.status;e!==F.e.failure||N?e!==F.e.success||N||(M.toast.success("Deleted Period"),C(!0)):C(!0)},[o,C]);return c.a.createElement(R,{periods:f,doneAdd:a.status===F.e.success&&!j,addPeriod:function(e){E(!1);var t={name:e.name?e.name:"",start_date:e.start_date?e.start_date:"",end_date:e.end_date?e.end_date:"",state:e.state?e.state:"",fiscal_year:e.fiscalYear?e.fiscalYear:""};s(t)},doneEdit:u.status===F.e.success&&!_,editPeriod:function(e){k(!1);var t={id:e.id?e.id:"",name:e.name?e.name:"",start_date:e.start_date?e.start_date:"",end_date:e.end_date?e.end_date:"",state:e.state?e.state:"",fiscal_year:e.fiscalYear?e.fiscalYear:""};l(t)},doneDelete:o.status===F.e.success&&!N,deletePeriod:function(e){C(!1),d(e)},fiscalYears:m})})}}]);
//# sourceMappingURL=80.5db52f58.chunk.js.map