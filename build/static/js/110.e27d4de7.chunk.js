(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{2384:function(e,t,a){"use strict";a.r(t);var n=a(43),c=a(1),o=a.n(c),u=a(1574),r=a(1788),s=a(1555),i=a(1549),l=a(1554),d=a(1550),p=a(1579),m=a(1581),_=a(1576),f=a.n(_),g=[{partner_group_detail:"OOO",item_group_detail:2,purchase_account_detail:"Account 1",sales_account_detail:1222,cost_of_goods_sold_account_detail:"One",root_item:{value:"Some value 1"},updated_at:String(new Date)},{partner_group_detail:"OOO",item_group_detail:4,purchase_account_detail:"Account 1",sales_account_detail:1222,cost_of_goods_sold_account_detail:"Three",root_item:{value:"Some value 2"},updated_at:String(new Date)},{partner_group_detail:"OOO",item_group_detail:2,purchase_account_detail:"Account 1",sales_account_detail:4444,cost_of_goods_sold_account_detail:"Three",root_item:{value:"Some value 3"},updated_at:String(new Date)}],b=[{type:"text",label:"Partner Group",tag:"partner_group_detail",path:"partner_group_detail"},{type:"select",label:"Item Group",tag:"item_group_detail",path:"item_group_detail",options:[{name:"A",id:1},{name:"B",id:2},{name:"C",id:3},{name:"D",id:4}],optionsFrom:"server"},{type:"text",label:"Purchase Account",tag:"purchase_account_detail",path:"purchase_account_detail"},{type:"number",label:"Sales Account",tag:"sales_account_detail",path:"sales_account_detail"},{type:"select",label:"Cost Account",tag:"cost_of_goods_sold_account_detail",path:"cost_of_goods_sold_account_detail",options:["One","Two","Three"]},{type:"root_item",label:"Root Item",tag:"root_item",path:"root_item.value"},{type:"text",noEdit:!0,label:"Last Modified",tag:"updated_at",path:"updated_at"}],O={_id:f.a.string().allow("").optional(),partner_group_detail:f.a.string(),item_group_detail:f.a.number(),purchase_account_detail:f.a.string(),sales_account_detail:f.a.number(),cost_of_goods_sold_account_detail:f.a.string(),root_item:f.a.string(),updated_at:f.a.string().allow("").optional()},E=a(7),h=a(3),j=a(1619),S=a(1557),v=a(17),G="ADDING_LINE",A={addCount:0,status:"IDLE",hasEdit:!0,hasDelete:!0,_data:[]},C="_ADD",P="UPDATE",y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(h.a)({},e,{addCount:e.addCount+1,status:G});case P:return Object(h.a)({},e,{_data:t.payload});default:return e}},D=function(e){return e({type:C})},w=a(1583),N=a.n(w),k=function(){return Math.random().toString(36).substring(7)},B=function(e,t){var a={};for(var n in e)a[n]="";return Object(h.a)({},a,{_id:t})},I="ADDING_LINE",z="IDLE",L="EDIT",F="SAVED",T="CANCELED",x=function(e){var t=e.data,a=e.columns,u=e.hasEdit,r=e.hasDelete,i=e.status,l=e.addCount,d=e.schema,p=e.dispatch,m=e.callback,_=Object(c.useState)([]),g=Object(n.a)(_,2),b=g[0],O=g[1],G=Object(c.useState)(z),A=Object(n.a)(G,2),C=A[0],y=A[1],D=Object(c.useState)(t.map(function(){return!1})),w=Object(n.a)(D,2),x=w[0],R=w[1];Object(c.useEffect)(function(){z!==C&&F!==C&&T!==C||y(i)},[i,y,l]),Object(c.useEffect)(function(){t.length>0&&0===b.length&&O(t.map(function(e,t){var n={};for(var c in e){var o=a.find(function(e){return e.tag===c});n[o.tag]=N.a.get(e,o.path)}return Object(h.a)({},n,{_id:k()})}))},[t,O]),Object(c.useEffect)(function(){var e;(e=b,function(t){t({type:P,payload:e})})(p),m(b)},[b,p]);var J=Object(c.useState)({}),M=Object(n.a)(J,2),U=M[0],V=M[1],q=Object(c.useState)({}),H=Object(n.a)(q,2),K=H[0],Q=H[1],W=Object(c.useState)(!1),X=Object(n.a)(W,2),Y=X[0],Z=X[1];Object(c.useEffect)(function(){if(C===I){var e=k();O(b.concat(B(b[0],e))),$(B(b[0],e)),R(x.concat(!0))}},[C]);var $=function(e){Q(d),V(e)};Object(c.useEffect)(function(){var e=f.a.validate(U,K,{abortEarly:!1}).error;e?(console.log(e),Z(!1)):Z(!0)},[U]);var ee=function(e){var t=e.currentTarget,a=t.name,n=t.value;V(Object(h.a)({},U,Object(E.a)({},a,n)))};return o.a.createElement(j.a,{size:"md",responsive:!0,striped:!0},o.a.createElement("thead",null,o.a.createElement("tr",null,a.map(function(e){return o.a.createElement("th",null,e.label)}))),o.a.createElement("tbody",null,b.map(function(e,t){return o.a.createElement("tr",null,a.map(function(a){return x[t]&&!a.noEdit?o.a.createElement("td",null,"select"===a.type?o.a.createElement(S.a,{type:a.type,name:a.tag,value:N.a.get(U,a.tag),onChange:ee},o.a.createElement("option",null),"server"===a.optionsFrom?a.options.map(function(e){return o.a.createElement("option",{value:e.id},e.name)}):a.options.map(function(e){return o.a.createElement("option",{value:e},e)})):o.a.createElement(S.a,{type:a.type,name:a.tag,value:N.a.get(U,a.tag),onChange:ee})):o.a.createElement("td",null,function(e,t){if(t.tag,"server"!==t.optionsFrom)return e[t.tag];var a=t.options.find(function(a){return String(a.id)===String(e[t.tag])});return a?a.name:void 0}(e,a))}),u?o.a.createElement("td",null,x[t]?o.a.createElement("div",null,o.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){O(b.map(function(e){return e._id===U._id?Object(h.a)({_id:k()},U):e})),R(x.map(function(){return!1})),y(F)},disabled:!Y},"Save"),o.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){!function(){if(C===I){var e=b.findIndex(function(e){return e._id===U._id});e>=0&&(O(b.filter(function(t,a){return e!==a})),R(x.filter(function(t,a){return e!==a}))),Z(!0)}else R(x.map(function(){return!1}));y(T),Q({})}()}},"Cancel")):o.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){R(x.map(function(e,a){return a===t})),$(e),y(L)},disabled:!Y},o.a.createElement(v.s,null))):o.a.createElement(o.a.Fragment,null),r?o.a.createElement("td",null,o.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){return function(e){var t=b.findIndex(function(t){return t._id===e});t>=0&&(O(b.filter(function(e,a){return a!==t})),R(x.filter(function(e,a){return a!==t})),y(T))}(e._id)}},o.a.createElement(v.p,null))):o.a.createElement(o.a.Fragment,null))})))},R=function(e){var t=e.data,a=e.columns,u=e.callback,i=e.schema,l=Object(c.useReducer)(y,A),d=Object(n.a)(l,2),p=d[0],m=d[1];return o.a.createElement("div",null,o.a.createElement(r.a,{align:"right",className:"mb-1 pl-3 pr-3"},o.a.createElement(s.a,{className:"m-1 align-right",size:"sm",outline:!0,color:"primary",onClick:function(){return D(m)}},"Add Line")),o.a.createElement(x,Object.assign({},p,{dispatch:m,data:t,schema:i,columns:a,callback:function(e){p._data.length>=e.length&&u(e)}})))},J=function(e){var t=e.doneAdd,a=e.doneEdit,_=Object(c.useReducer)(y,A),f=Object(n.a)(_,2)[1];return Object(c.useEffect)(function(){(t||a)&&Object(m.a)({type:"CLOSE"},f)},[t,a]),o.a.createElement("div",null,o.a.createElement(p.a,{toggle:m.a,dispatch:f}),o.a.createElement(u.a,null,o.a.createElement(r.a,{align:"right",className:"mb-1 pl-3 pr-3"},o.a.createElement(s.a,{onClick:function(){return D(f)},outline:!0,size:"sm"},"New General Product Posting Setup"),o.a.createElement(s.a,{onClick:function(){},outline:!0,size:"sm"},"Get Data")),o.a.createElement(i.a,{className:"border-0"},o.a.createElement(l.a,{className:"border-0"},"General Product Posting Setup"," "),o.a.createElement(d.a,null,o.a.createElement(R,{callback:function(){return null},columns:b,schema:O,data:g})))))},M=a(134),U=a(118),V=a(61),q=a(44),H=a(177),K=a(102),Q=a(19);t.default=Object(H.b)(function(e){return{fetchStatus:Object(M.i)(e),addStatus:Object(M.f)(e),postingSetups:Object(M.j)(e),postingGroups:Object(U.k)(e),editStatus:Object(M.h)(e),deleteStatus:Object(M.g)(e),itemCategories:Object(V.c)(e),accounts:Object(q.h)(e)}},function(e){return{fetchGeneralBusinessPostingSetups:function(){return e(Object(M.c)())},addGeneralBusinessPostingSetup:function(t){return e(Object(M.a)(t))},editGeneralBusinessPostingSetup:function(t){return e(Object(M.b)(t))},deleteGeneralBusinessPostingSetup:function(t){return e(Object(M.d)(t))}}})(function(e){var t=e.fetchStatus,a=e.addStatus,u=e.postingSetups,r=e.fetchGeneralBusinessPostingSetups,s=e.addGeneralBusinessPostingSetup,i=e.editStatus,l=e.editGeneralBusinessPostingSetup,d=e.deleteStatus,p=e.deleteGeneralBusinessPostingSetup,m=e.postingGroups,_=e.itemCategories,f=e.accounts,g=Object(c.useState)(!0),b=Object(n.a)(g,2),O=b[0],E=b[1],h=Object(c.useState)(!0),j=Object(n.a)(h,2),S=j[0],v=j[1],G=Object(c.useState)(!0),A=Object(n.a)(G,2),C=A[0],P=A[1],y=Object(c.useState)(!0),D=Object(n.a)(y,2),w=D[0],N=D[1];Object(c.useEffect)(function(){E(!1),r()},[r,E]),Object(c.useEffect)(function(){t.status!==Q.e.failure||O||(K.toast.error("Failed Fetching General Posting Setups"),E(!0))},[t,E]),Object(c.useEffect)(function(){var e=a.status;e!==Q.e.failure||S?e!==Q.e.success||S||(K.toast.success("Added General Posting Setup"),v(!0)):v(!0)},[a,v]),Object(c.useEffect)(function(){var e=i.status;e!==Q.e.failure||C?e!==Q.e.success||C||(K.toast.success("Edited General Posting Setup"),P(!0)):P(!0)},[i,P]),Object(c.useEffect)(function(){var e=d.status;e!==Q.e.failure||w?e!==Q.e.success||w||(K.toast.success("Deleted General Posting Setup"),N(!0)):N(!0)},[d,N]);return o.a.createElement(J,{postingSetups:u,doneAdd:a.status===Q.e.success&&!S,addGeneralBusinessPostingSetup:function(e){v(!1);var t={partner_group:e.partnerGroup?e.partnerGroup:"",item_group:e.itemGroup?e.itemGroup:"",purchase_account:e.itemGroup?e.itemGroup:"",sales_account:e.partnerGroup?e.partnerGroup:"",cost_of_goods_sold_account:e.costOfGoodsSoldAcc?e.costOfGoodsSoldAcc:"",cash_account:e.cashAccount?e.cashAccount:""};s(t)},doneEdit:i.status===Q.e.success&&!C,editGeneralBusinessPostingSetup:function(e){P(!1);var t={id:e.id?e.id:"",partner_group:e.partnerGroup?e.partnerGroup:"",item_group:e.itemGroup?e.itemGroup:"",purchase_account:e.itemGroup?e.itemGroup:"",sales_account:e.partnerGroup?e.partnerGroup:"",cost_of_goods_sold_account:e.costOfGoodsSoldAcc?e.costOfGoodsSoldAcc:"",cash_account:e.cashAccount?e.cashAccount:""};l(t)},doneDelete:d.status===Q.e.success&&!w,deleteGeneralBusinessPostingSetup:function(e){N(!1),p(e)},postingGroups:m,itemCategories:_,accounts:f})})}}]);
//# sourceMappingURL=110.e27d4de7.chunk.js.map