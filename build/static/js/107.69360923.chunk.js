(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{1573:function(e,t,n){"use strict";var a=n(3),r=n(1),c=n.n(r),i=n(27),s=n(28),u=n(33),o=n(34),l=n(23);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var d=function(e){Object(u.a)(n,e);var t=f(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return c.a.createElement("thead",null,c.a.createElement("tr",null,this.props.columns.map(function(e){return c.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),n}(r.Component),m=n(1583),p=n.n(m),b=n(53),h=n(43),v=/[0-9\-+#]/,g=/[^\d\-+#]/g;function O(e){return e.search(v)}function j(e,t,n){var a=!1,r={value:e};e<0&&(a=!0,r.value=-r.value),r.sign=a?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var c=t.fraction&&t.fraction.lastIndexOf("0"),i=r.value.split("."),s=Object(h.a)(i,2),u=s[0],o=void 0===u?"0":u,l=s[1],f=void 0===l?"":l;return(!f||f&&f.length<=c)&&(f=c<0?"":Number("0."+f).toFixed(c+1).replace("0.","")),r.integer=o,r.fraction=f,function(e,t){e.result="";var n=t.integer.split(t.separator),a=n.join(""),r=a&&a.indexOf("0");if(r>-1)for(;e.integer.length<a.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var c=n[1]&&n[n.length-1].length;if(c)for(var i=e.integer.length,s=i%c,u=0;u<i;u++)e.result+=e.integer.charAt(u),!((u-s+1)%c)&&u<i-c&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(a=!1,r.sign=""),!a&&t.maskHasPositiveSign?r.sign="+":a&&t.maskHasPositiveSign?r.sign="-":a&&(r.sign=n&&n.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},n=e.length,a=O(e);t.prefix=a>0?e.substring(0,a):"";var r=O(e.split("").reverse().join("")),c=n-r,i=e.substring(c,c+1),s=c+("."===i||","===i?1:0);t.suffix=r>0?e.substring(s,n):"",t.mask=e.substring(a,s),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var u=t.mask.match(g);return t.decimal=u&&u[u.length-1]||".",t.separator=u&&u[1]&&u[0]||",",u=t.mask.split(t.decimal),t.integer=u[0],t.fraction=u[1],t}(e),r=j(t,a,n);return a.prefix+r.sign+r.result+a.suffix},y=n(1578),k=n(1584);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var B=function(e){Object(u.a)(n,e);var t=S(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,n){if(console.log("loaded",n),t.content)return t.content(e,n);var a=p.a.get(e,t.path),r=y.findIndex(function(e){return e===String(t.path)});return k.findIndex(function(e){return e===String(t.path)})>=0?Object(b.e)(a):r>=0?E("#,###.00",a,{enforceMaskSign:!0}):a?String(a):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.columns;return c.a.createElement("tbody",null,n.map(function(t){return c.a.createElement("tr",{key:t.id},a.map(function(n){return c.a.createElement("td",{key:e.createKey(t,n)},e.renderCell(t,n,e.props.loading))}))}))}}]),n}(r.Component),w=n(1643),x=n(1644),C=n(1645),N=n(109),D=n(1575),R=function(){var e=Object(r.useContext)(N.a),t=e.rootState,n=e.dispatch,a=Object(r.useState)(0),i=Object(h.a)(a,2),s=i[0],u=i[1],o=Object(r.useState)(0),l=Object(h.a)(o,2),f=l[0],d=l[1],m=Object(r.useState)(0),p=Object(h.a)(m,2),b=p[0],v=p[1],g=Object(r.useState)(0),O=Object(h.a)(g,2),j=O[0],E=O[1],y=Object(r.useState)(!1),k=Object(h.a)(y,2),S=k[0],B=k[1],R=Object(r.useState)(!1),_=Object(h.a)(R,2),A=_[0],P=_[1],M=Object(r.useState)({count:0,results:[]}),W=Object(h.a)(M,2),I=W[0],F=W[1],L=Object(r.useState)(0),U=Object(h.a)(L,2),z=U[0],H=U[1],T=Object(r.useState)(""),q=Object(h.a)(T,2),V=q[0],J=q[1];Object(r.useEffect)(function(){Object(D.a)(t)},[t]),Object(r.useEffect)(function(){var e=I.count,t=I.results;0===t.length&&0===e||(E(Math.ceil(e/t.length)),d(t.length),v(e),B(!0))},[V,E,d,v,B]),Object(r.useEffect)(function(){if(z){var e=I.count,t=I.results;f<=t.length&&(E(Math.ceil(e/t.length)),d(t.length),v(e),B(!0))}},[z,I]),Object(r.useEffect)(function(){try{var e=Object(D.b)(t),n=e.results,a=e.amount,r=e.activeTab;if(""!==r?J(r):console.warn("Pass active tab for paginations"),a!==z&&"undefined"!==typeof a&&(H(a),F(n)),"undefined"!==String(n)&&!S){var c=n.count,i=n.results;E(Math.ceil(c/i.length)),d(i.length),v(c),B(!0)}}catch(s){}},[t,H,F]);var K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A||P(!0),u(e),t&&d(t)};return Object(r.useEffect)(function(){s<b&&A&&Object(D.c)({},n,{offset:s,limit:f,onClick:A})},[s,f]),c.a.createElement("div",null,c.a.createElement(w.a,{className:"pagination left",size:"md",color:"primary"},c.a.createElement(x.a,{disabled:0===s},c.a.createElement(C.a,{first:!0,href:"#",onClick:function(){return K(0)}},"First")),c.a.createElement(x.a,null,c.a.createElement(C.a,{previous:!0,disabled:0===s,onClick:function(){return K(s-f)}})),Array(j).fill("").map(function(e,t){return c.a.createElement(x.a,{active:t===Math.floor(s/f)},c.a.createElement(C.a,{onClick:function(){return K(t*f)}},t+1))}),c.a.createElement(x.a,null,c.a.createElement(C.a,{next:!0,onClick:function(){return K(s+f)},disabled:s+f>=b})),c.a.createElement(x.a,{disabled:s+f>=b},c.a.createElement(C.a,{last:!0,onClick:function(){return K((j-1)*f)}},"Last"))))},_=n(1549),A=n(1554),P=n(1619),M=n(177);t.a=Object(M.b)(function(e,t){return Object(a.a)({state:e},t)})(function(e){var t=e.columns,n=e.data,a=e.title,i=e.state,s=e.getLoading;Object(r.useEffect)(function(){"function"===typeof s&&console.log("result",s(i,{isPatch:!0}))},[i,s]);var u=Object(r.useContext)(N.a).rootState;return Object(r.useEffect)(function(){},[u]),console.log(s(i,{isPatch:!0})),c.a.createElement(_.a,{className:"p-2"},c.a.createElement(A.a,{className:"tableHeaders border-0"},c.a.createElement("div",null,""+a?a:"")),c.a.createElement(P.a,{size:"md",responsive:!0,striped:!0},c.a.createElement(d,{columns:t}),c.a.createElement(B,{data:n,columns:t,loading:"fucntion"===typeof s?s(i,{isPatch:!0}):{}}),c.a.createElement(R,null)))})},1575:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return s});var a=n(38),r=function(e){return e.page_values?e.page_values:null},c=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof n){if(0===n.count)return null;t({type:a.a.UPDATE,stateName:"page_values",payload:{results:n,options:c,pageLimit:n.length?5*Math.ceil(n.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:i}})}},i=function(e){var t=e.page_values;try{var n=t.pageLimit?t.pageLimit:0;return n||0}catch(a){}},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:a.a.UPDATE,stateName:"page_values",payload:{options:n}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},2407:function(e,t,n){"use strict";n.r(t);var a=n(43),r=n(1),c=n.n(r),i=n(1574),s=n(1555),u=n(1788),o=n(1549),l=n(17),f=n(3),d=n(27),m=n(28),p=n(179),b=n(33),h=n(34),v=n(23),g=n(1577),O=n(1576),j=n.n(O),E=n(1550),y=n(1556),k=n(1787),S=n(1622),B=n(39),w=n(177);function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(v.a)(e);if(t){var r=Object(v.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(h.a)(this,n)}}var C=function(e){Object(b.a)(n,e);var t=x(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).initialState={data:{id:"",code:"",name:"",warehouse:"",remarks:""},errors:{},lockUpdate:!1},a.state=a.initialState,a.schema={id:j.a.string().allow("").optional(),code:j.a.string().required().label("Code"),name:j.a.string().required().label("Name"),warehouse:j.a.string().required().label("Warehouse"),remarks:j.a.string().allow("").optional()},a.populateState=a.populateState.bind(Object(p.a)(a)),a}return Object(m.a)(n,[{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"populateState",value:function(e){var t=Object(f.a)({},this.state,{data:{id:e.id?e.id:"",code:e.code?e.code:"",name:e.name?e.name:"",warehouse:e.warehouse_detail?e.warehouse_detail.id:"",remarks:e.remarks?e.remarks:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){this.props.doneAdd&&this.resetForm(),!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"render",value:function(){return c.a.createElement(o.a,{className:"border-0"},c.a.createElement(E.a,null,c.a.createElement(y.a,{onSubmit:this.handleSubmit},c.a.createElement(k.a,null,c.a.createElement(u.a,{md:4,sm:12,xs:12},this.renderInput("code","Code")),c.a.createElement(u.a,{md:4,sm:12,xs:12},this.renderInput("name","Name")),c.a.createElement(u.a,{md:4,sm:12,xs:12},this.renderSelect({name:"warehouse",label:"Warehouse",options:this.props.options.Warehouses,optionsFrom:"server"})),c.a.createElement(u.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea"))),c.a.createElement(S.a,{align:"center"},this.renderButton("Save")))))}}]),n}(g.a),N=Object(w.b)(B.g)(C),D=n(1573),R=n(1581),_=n(1579),A=function(e){var t=e.Bins,n=e.addBin,f=e.editBin,d=e.deleteBin,m=e.doneAdd,p=e.doneEdit,b=e.Warehouses,h=Object(r.useReducer)(R.c,R.b),v=Object(a.a)(h,2),g=v[0],O=v[1],j=[{path:"code",label:"Code"},{path:"name",label:"Name"},{key:"view",content:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(R.a)({type:"VIEW",Component:N,data:e,title:"View Bins",options:{Warehouses:b}},O)}},c.a.createElement(l.M,null)),c.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(R.a)({title:"Edit Bins",type:"EDIT",Component:N,submit:f,isEdit:!0,data:e,options:{Warehouses:b}},O)}},c.a.createElement(l.s,null)),c.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(R.a)({type:"DELETE",deleteOptions:{okCallback:E,title:"Are you sure?",id:e.id,message:""}},O)}},c.a.createElement(l.p,null)))}}],E=function(e){d(e)};return Object(r.useEffect)(function(){(m||p)&&Object(R.a)({type:"CLOSE"},O)},[m,p]),c.a.createElement("div",null,c.a.createElement(i.a,null,c.a.createElement(_.a,{data:g.data,openModal:g.openModal,component:g.Component,toggle:R.a,dispatch:O,title:g.title}),c.a.createElement(u.a,{align:"right",className:"mb-1 pl-3 pr-3"},c.a.createElement(s.a,{onClick:function(){Object(R.a)({type:"ADD",Component:N,submit:n,isEdit:!0,data:t,options:{Warehouses:b}},O)},outline:!0,size:"sm"},"New Bin")),c.a.createElement(o.a,{className:"border-0"},c.a.createElement(D.a,{title:"Bins",columns:j,data:t}))))},P=n(57),M=n(102),W=n(19);t.default=Object(w.b)(function(e){return{fetchStatus:Object(B.m)(e),addStatus:Object(B.i)(e),Bins:Object(B.j)(e),editStatus:Object(B.l)(e),deleteStatus:Object(B.k)(e),Warehouses:Object(P.l)(e)}},function(e){return{fetchBins:function(){return e(Object(B.c)())},addBin:function(t){return e(Object(B.a)(t))},editBin:function(t){return e(Object(B.b)(t))},deleteBin:function(t){return e(Object(B.e)(t))}}})(function(e){var t=e.fetchStatus,n=e.addStatus,i=e.Bins,s=e.fetchBins,u=e.addBin,o=e.editStatus,l=e.editBin,f=e.deleteStatus,d=e.deleteBin,m=e.Warehouses,p=Object(r.useState)(!0),b=Object(a.a)(p,2),h=b[0],v=b[1],g=Object(r.useState)(!0),O=Object(a.a)(g,2),j=O[0],E=O[1],y=Object(r.useState)(!0),k=Object(a.a)(y,2),S=k[0],B=k[1],w=Object(r.useState)(!0),x=Object(a.a)(w,2),C=x[0],N=x[1];Object(r.useEffect)(function(){v(!1),s()},[s,v]),Object(r.useEffect)(function(){t.status!==W.e.failure||h||(M.toast.error("Failed fetching Bins"),v(!0))},[t,v]),Object(r.useEffect)(function(){var e=n.status;e!==W.e.failure||j?e!==W.e.success||j||(M.toast.success("Added Bin"),E(!0)):E(!0)},[n,E]),Object(r.useEffect)(function(){var e=o.status;e!==W.e.failure||S?e!==W.e.success||S||(M.toast.success("Edited Bin"),B(!0)):B(!0)},[o,B]),Object(r.useEffect)(function(){var e=f.status;e!==W.e.failure||C?e!==W.e.success||C||(M.toast.success("Deleted Bin"),N(!0)):N(!0)},[f,N]);return c.a.createElement(A,{Bins:i,Warehouses:m,doneAdd:n.status===W.e.success&&!j,addBin:function(e){E(!1);var t={code:e.code,name:e.name,warehouse:e.warehouse,remarks:e.remarks};u(t)},doneEdit:o.status===W.e.success&&!S,editBin:function(e){B(!1);var t={id:e.id,code:e.code,name:e.name,warehouse:e.warehouse,remarks:e.remarks};l(t)},doneDelete:f.status===W.e.success&&!C,deleteBin:function(e){N(!1),d(e)}})})}}]);
//# sourceMappingURL=107.69360923.chunk.js.map