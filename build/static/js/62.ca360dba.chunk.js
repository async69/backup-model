(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{1573:function(e,t,a){"use strict";var n=a(3),r=a(1),c=a.n(r),i=a(27),l=a(28),u=a(33),o=a(34),s=a(23);function f(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var d=function(e){Object(u.a)(a,e);var t=f(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return c.a.createElement("thead",null,c.a.createElement("tr",null,this.props.columns.map(function(e){return c.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),a}(r.Component),m=a(1583),p=a.n(m),b=a(53),E=a(43),v=/[0-9\-+#]/,g=/[^\d\-+#]/g;function h(e){return e.search(v)}function O(e,t,a){var n=!1,r={value:e};e<0&&(n=!0,r.value=-r.value),r.sign=n?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var c=t.fraction&&t.fraction.lastIndexOf("0"),i=r.value.split("."),l=Object(E.a)(i,2),u=l[0],o=void 0===u?"0":u,s=l[1],f=void 0===s?"":s;return(!f||f&&f.length<=c)&&(f=c<0?"":Number("0."+f).toFixed(c+1).replace("0.","")),r.integer=o,r.fraction=f,function(e,t){e.result="";var a=t.integer.split(t.separator),n=a.join(""),r=n&&n.indexOf("0");if(r>-1)for(;e.integer.length<n.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var c=a[1]&&a[a.length-1].length;if(c)for(var i=e.integer.length,l=i%c,u=0;u<i;u++)e.result+=e.integer.charAt(u),!((u-l+1)%c)&&u<i-c&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(n=!1,r.sign=""),!n&&t.maskHasPositiveSign?r.sign="+":n&&t.maskHasPositiveSign?r.sign="-":n&&(r.sign=a&&a.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var j=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},a=e.length,n=h(e);t.prefix=n>0?e.substring(0,n):"";var r=h(e.split("").reverse().join("")),c=a-r,i=e.substring(c,c+1),l=c+("."===i||","===i?1:0);t.suffix=r>0?e.substring(l,a):"",t.mask=e.substring(n,l),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var u=t.mask.match(g);return t.decimal=u&&u[u.length-1]||".",t.separator=u&&u[1]&&u[0]||",",u=t.mask.split(t.decimal),t.integer=u[0],t.fraction=u[1],t}(e),r=O(t,n,a);return n.prefix+r.sign+r.result+n.suffix},y=a(1578),S=a(1584);function k(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var N=function(e){Object(u.a)(a,e);var t=k(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,a){if(console.log("loaded",a),t.content)return t.content(e,a);var n=p.a.get(e,t.path),r=y.findIndex(function(e){return e===String(t.path)});return S.findIndex(function(e){return e===String(t.path)})>=0?Object(b.e)(n):r>=0?j("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return c.a.createElement("tbody",null,a.map(function(t){return c.a.createElement("tr",{key:t.id},n.map(function(a){return c.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a,e.props.loading))}))}))}}]),a}(r.Component),C=a(1643),D=a(1644),T=a(1645),x=a(109),_=a(1575),I=function(){var e=Object(r.useContext)(x.a),t=e.rootState,a=e.dispatch,n=Object(r.useState)(0),i=Object(E.a)(n,2),l=i[0],u=i[1],o=Object(r.useState)(0),s=Object(E.a)(o,2),f=s[0],d=s[1],m=Object(r.useState)(0),p=Object(E.a)(m,2),b=p[0],v=p[1],g=Object(r.useState)(0),h=Object(E.a)(g,2),O=h[0],j=h[1],y=Object(r.useState)(!1),S=Object(E.a)(y,2),k=S[0],N=S[1],I=Object(r.useState)(!1),A=Object(E.a)(I,2),L=A[0],F=A[1],R=Object(r.useState)({count:0,results:[]}),P=Object(E.a)(R,2),w=P[0],M=P[1],z=Object(r.useState)(0),U=Object(E.a)(z,2),q=U[0],V=U[1],B=Object(r.useState)(""),H=Object(E.a)(B,2),Y=H[0],G=H[1];Object(r.useEffect)(function(){Object(_.a)(t)},[t]),Object(r.useEffect)(function(){var e=w.count,t=w.results;0===t.length&&0===e||(j(Math.ceil(e/t.length)),d(t.length),v(e),N(!0))},[Y,j,d,v,N]),Object(r.useEffect)(function(){if(q){var e=w.count,t=w.results;f<=t.length&&(j(Math.ceil(e/t.length)),d(t.length),v(e),N(!0))}},[q,w]),Object(r.useEffect)(function(){try{var e=Object(_.b)(t),a=e.results,n=e.amount,r=e.activeTab;if(""!==r?G(r):console.warn("Pass active tab for paginations"),n!==q&&"undefined"!==typeof n&&(V(n),M(a)),"undefined"!==String(a)&&!k){var c=a.count,i=a.results;j(Math.ceil(c/i.length)),d(i.length),v(c),N(!0)}}catch(l){}},[t,V,M]);var J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;L||F(!0),u(e),t&&d(t)};return Object(r.useEffect)(function(){l<b&&L&&Object(_.c)({},a,{offset:l,limit:f,onClick:L})},[l,f]),c.a.createElement("div",null,c.a.createElement(C.a,{className:"pagination left",size:"md",color:"primary"},c.a.createElement(D.a,{disabled:0===l},c.a.createElement(T.a,{first:!0,href:"#",onClick:function(){return J(0)}},"First")),c.a.createElement(D.a,null,c.a.createElement(T.a,{previous:!0,disabled:0===l,onClick:function(){return J(l-f)}})),Array(O).fill("").map(function(e,t){return c.a.createElement(D.a,{active:t===Math.floor(l/f)},c.a.createElement(T.a,{onClick:function(){return J(t*f)}},t+1))}),c.a.createElement(D.a,null,c.a.createElement(T.a,{next:!0,onClick:function(){return J(l+f)},disabled:l+f>=b})),c.a.createElement(D.a,{disabled:l+f>=b},c.a.createElement(T.a,{last:!0,onClick:function(){return J((O-1)*f)}},"Last"))))},A=a(1549),L=a(1554),F=a(1619),R=a(177);t.a=Object(R.b)(function(e,t){return Object(n.a)({state:e},t)})(function(e){var t=e.columns,a=e.data,n=e.title,i=e.state,l=e.getLoading;Object(r.useEffect)(function(){"function"===typeof l&&console.log("result",l(i,{isPatch:!0}))},[i,l]);var u=Object(r.useContext)(x.a).rootState;return Object(r.useEffect)(function(){},[u]),console.log(l(i,{isPatch:!0})),c.a.createElement(A.a,{className:"p-2"},c.a.createElement(L.a,{className:"tableHeaders border-0"},c.a.createElement("div",null,""+n?n:"")),c.a.createElement(F.a,{size:"md",responsive:!0,striped:!0},c.a.createElement(d,{columns:t}),c.a.createElement(N,{data:a,columns:t,loading:"fucntion"===typeof l?l(i,{isPatch:!0}):{}}),c.a.createElement(I,null)))})},1575:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return i}),a.d(t,"c",function(){return l});var n=a(38),r=function(e){return e.page_values?e.page_values:null},c=function(e,t,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;t({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:c,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:i}})}},i=function(e){var t=e.page_values;try{var a=t.pageLimit?t.pageLimit:0;return a||0}catch(n){}},l=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1603:function(e,t,a){"use strict";var n=a(7),r=a(43),c=a(3),i=a(1),l=a.n(i),u=a(1619),o=a(1557),s=a(1555),f=a(17),d="ADDING_LINE",m={addCount:0,status:"IDLE",hasEdit:!0,hasDelete:!0,_data:[]},p="_ADD",b="UPDATE",E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(c.a)({},e,{addCount:e.addCount+1,status:d});case b:return Object(c.a)({},e,{_data:t.payload});default:return e}},v=function(e){return e({type:p})},g=a(1576),h=a.n(g),O=a(1583),j=a.n(O),y=function(){return Math.random().toString(36).substring(7)},S=function(e,t){var a={};for(var n in e)a[n]="";return Object(c.a)({},a,{_id:t})},k="ADDING_LINE",N="IDLE",C="EDIT",D="SAVED",T="CANCELED",x=function(e){var t=e.data,a=e.columns,d=e.hasEdit,m=e.hasDelete,p=e.status,E=e.addCount,v=e.schema,g=e.dispatch,O=e.callback,x=Object(i.useState)([]),_=Object(r.a)(x,2),I=_[0],A=_[1],L=Object(i.useState)(N),F=Object(r.a)(L,2),R=F[0],P=F[1],w=Object(i.useState)(t.map(function(){return!1})),M=Object(r.a)(w,2),z=M[0],U=M[1],q=Object(i.useState)({}),V=Object(r.a)(q,2),B=V[0],H=V[1];Object(i.useEffect)(function(){N!==R&&D!==R&&T!==R||P(p)},[p,P,E]),Object(i.useEffect)(function(){if(t.length>0&&0===I.length){var e=t.map(function(e){var t={};for(var n in e){var r=a.find(function(e){return e.tag===n});r&&(t[r.tag]=j.a.get(e,r.tag))}return Object(c.a)({},t,{_id:y()})});U(e.map(function(){return!1})),A(e)}},[t,A]),Object(i.useEffect)(function(){var e;(e=I,function(t){t({type:b,payload:e})})(g),O(I)},[I,g]);var Y=Object(i.useState)({}),G=Object(r.a)(Y,2),J=G[0],K=G[1],W=Object(i.useState)({}),Q=Object(r.a)(W,2),X=Q[0],Z=Q[1],$=Object(i.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ae=ee[1],ne=Object(i.useState)({}),re=Object(r.a)(ne,2),ce=re[0],ie=re[1];Object(i.useEffect)(function(){var e={};a.forEach(function(t){"select"===t.type&&(e[t.tag]=t.options)}),ie(e)},[ie]),Object(i.useEffect)(function(){if(R===k){var e=y();A(I.concat(S(I[0],e))),le(S(I[0],e)),U(z.concat(!0))}},[R]);var le=function(e){Z(v),K(Object(c.a)({},B,e))};Object(i.useEffect)(function(){var e=h.a.validate(J,X,{abortEarly:!1}).error;e?(console.warn(e),ae(!1)):Object.values(J).length>1&&ae(!0)},[J]);var ue=function(e){var t=e.currentTarget,a=t.name,r=t.value,i=t.callback;K(Object(c.a)({},J,Object(n.a)({},a,r)));i({name:a,value:r,setOptions:function(e,t){var a=ce;Object.keys(ce).findIndex(function(t){return t===e})>=0&&(a[e]=t,ie(a))},options:ce,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.map(function(e){var a=e.name,n=e.value;return t[a]=n,null}),K(Object(c.a)({},J,t))},formData:J})};return Object(i.useEffect)(function(){var e={};a.forEach(function(t){t.defaultValue&&(e=Object(c.a)({},e,Object(n.a)({},t.tag,t.defaultValue)))}),Object.values(e).length>0&&(K(Object(c.a)({},J,e)),H(e))},[a,K]),l.a.createElement(u.a,{size:"md",responsive:!0,striped:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,a.filter(function(e){return!Boolean(e.isView)}).map(function(e){return l.a.createElement("th",null,e.label)}))),l.a.createElement("tbody",null,I.map(function(e,t){return l.a.createElement("tr",null,a.filter(function(e){return!Boolean(e.isView)}).map(function(a){return z[t]&&!a.noEdit?l.a.createElement("td",null,"select"===a.type?l.a.createElement(o.a,{type:a.type,name:a.tag,value:j.a.get(J,a.tag),onChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,c=a.callback?a.callback:function(){return null};ue({currentTarget:{name:n,value:r,callback:c}})},disabled:a.disabled},l.a.createElement("option",null),"server"===a.optionsFrom?ce[a.tag].map(function(e){return l.a.createElement("option",{value:e.id},e.name)}):ce[a.tag].map(function(e){return l.a.createElement("option",{value:e},e)})):l.a.createElement(o.a,{type:a.type?a.type:"text",name:a.tag,disabled:a.disabled,value:j.a.get(J,a.tag),onChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,c=a.callback?a.callback:function(){return null};ue({currentTarget:{name:n,value:r,callback:c}})}})):l.a.createElement("td",null,function(e,t){if("server"!==t.optionsFrom)return e[t.tag];var a=t.options.find(function(a){return String(a.id)===String(e[t.tag])});return a?a.name:void 0}(e,a))}),d?l.a.createElement("td",null,z[t]?l.a.createElement("div",null,l.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){A(I.map(function(e){return e._id===J._id?Object(c.a)({_id:y()},J):e})),U(z.map(function(){return!1})),P(D)},disabled:!te},"Save"),l.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){!function(){if(R===k){var e=I.findIndex(function(e){return e._id===J._id});e>=0&&(A(I.filter(function(t,a){return e!==a})),U(z.filter(function(t,a){return e!==a}))),ae(!0)}else U(z.map(function(){return!1}));P(T),Z({})}()}},"Cancel")):l.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){U(z.map(function(e,a){return a===t})),le(e),P(C)}},l.a.createElement(f.s,null))):l.a.createElement(l.a.Fragment,null),m?l.a.createElement("td",null,l.a.createElement(s.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){return function(e){var t=I.findIndex(function(t){return t._id===e});t>=0&&(A(I.filter(function(e,a){return a!==t})),U(z.filter(function(e,a){return a!==t})),P(T))}(e._id)}},l.a.createElement(f.p,null))):l.a.createElement(l.a.Fragment,null))})))},_=a(1788),I=function(e){var t=e.data,a=e.columns,n=e.callback,c=e.schema,u=e.lineTag,o=e.disabled,f=e.startForm,d=Object(i.useReducer)(E,m),p=Object(r.a)(d,2),b=p[0],g=p[1],h=Object(i.useState)(!1),O=Object(r.a)(h,2),j=O[0],y=O[1];Object(i.useEffect)(function(){f&&v(g)},[f,g]);return l.a.createElement("div",null,o?l.a.createElement(l.a.Fragment,null):l.a.createElement(_.a,{align:"right",className:"mb-1 pl-3 pr-3"},l.a.createElement(s.a,{className:"m-1 align-right",size:"sm",outline:!0,color:"info",onClick:function(){return v(g)}},u||"Add Line")),l.a.createElement(x,Object.assign({},b,{dispatch:g,data:t,schema:c,columns:a,callback:function(e){!j&&e.length>0&&Object.values(e[0]).length>1?(n(e),y(!0)):b._data.length>=e.length&&n(e)},hasEdit:!o,hasDelete:!o})))};a.d(t,"a",function(){return x}),a.d(t,"c",function(){return v}),a.d(t,"d",function(){return m}),a.d(t,"e",function(){return E}),a.d(t,"b",function(){return I})},1795:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return l}),a.d(t,"a",function(){return u});var n=a(38),r="current_department",c=function(e){return e[r]?e[r]:null},i=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t({type:n.a.UPDATE,stateName:r,payload:{department:a}})},l=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t({type:n.a.UPDATE,stateName:r,payload:{permissions:a}})},u={create:!0,read:!0,update:!0,delete:!0}},2389:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(1),c=a.n(r),i=a(1547),l=a(1548),u=a(1558),o=a(1641),s=a(1642),f=a(1787),d=a(1788),m=a(1574),p=a(3),b=a(1555),E=a(1549),v=a(1554),g=a(1550),h=a(17),O=a(1573),j=a(1581),y=a(1579),S=a(7),k=a(112),N=a.n(k),C=a(178),D=a(27),T=a(28),x=a(179),_=a(33),I=a(34),A=a(23),L=a(1556),F=a(1577),R=a(1603),P=a(109),w=a(1795),M=a(1576),z=a.n(M),U=Object(S.a)({id:z.a.any().allow("").optional(),firstName:z.a.string().required().label("firstName"),lastName:z.a.string().required().label("lastName"),department:z.a.string().required().label("department")},"lines",z.a.array().items(z.a.object()).min(1)),q={data:Object(S.a)({firstName:"",lastName:"",department:""},"lines",[]),errors:{},selectedLine:"",lineCounter:1},V={_id:z.a.any().allow("").optional(),resource:z.a.string().required().label("resource"),create:z.a.boolean().required().label("create"),read:z.a.boolean().required().label("read"),update:z.a.boolean().required().label("update"),delete:z.a.boolean().required().label("delete")},B=function(e){var t=[{id:!0,name:"Yes"},{id:!1,name:"No"}];return[{tag:"resource",label:"Resource",noEdit:!0},{tag:"create",label:"Create",type:"select",options:t,optionsFrom:"server"},{tag:"read",label:"Read",type:"select",options:t,optionsFrom:"server"},{tag:"update",label:"Update",type:"select",options:t,optionsFrom:"server"},{tag:"delete",label:"Delete",type:"select",options:t,optionsFrom:"server"}]};function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(A.a)(e);if(t){var r=Object(A.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(I.a)(this,a)}}var Y=function(e){Object(_.a)(a,e);var t=H(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).doSubmit=Object(C.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.submit(n.state.data);case 1:case"end":return e.stop()}},e)})),n.initialState=q,n.state=JSON.parse(JSON.stringify(n.initialState)),n.schema=U,n.handleLineSave=n.handleLineSave.bind(Object(x.a)(n)),n.populateState=n.populateState.bind(Object(x.a)(n)),n.updateLines=n.updateLines.bind(Object(x.a)(n)),n.lineMapper=n.lineMapper.bind(Object(x.a)(n)),n}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"lineMapper",value:function(){return this.props.isEdit||this.props.isView?function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,a=Object.keys(t.permissions);return Object.values(t.permissions).map(function(e,t){return{_id:String(t),resource:a[t],create:e.create,read:e.read,update:e.update,delete:e.delete}})}(this.props.data,"lines",Object(w.b)(this.context.rootState)):[]}},{key:"populateState",value:function(e){var t=function(e,t,a){return Object(S.a)({id:e.id?e.id:"",firstName:String(e.firstName),lastName:String(e.lastName),department:String(e.department)},"lines",t(a))}(e,this.lineMapper);this.setState({lockUpdate:!0,data:t})}},{key:"updateLines",value:function(e){(e.length>0||this.state.data.lines.length>0)&&this.setState({data:Object(p.a)({},this.state.data,Object(S.a)({},"lines",e))})}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"handleLineSave",value:function(e){this.setState({data:Object(p.a)({},this.state.data,Object(S.a)({},"lines",e))})}},{key:"render",value:function(){return c.a.createElement(E.a,{className:"border-0"},c.a.createElement(v.a,{className:"border-0"},this.props.title),c.a.createElement(g.a,null,c.a.createElement(L.a,{onSubmit:this.handleSubmit},c.a.createElement(f.a,null,c.a.createElement(d.a,{md:4,sm:12,xs:12},this.renderInput("firstName","First Name")),c.a.createElement(d.a,{md:4,sm:12,xs:12},this.renderInput("lastName","Last Name")),c.a.createElement(d.a,{md:4,sm:12,xs:12},this.renderInput({name:"department",label:"Department"})),c.a.createElement(d.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea")),c.a.createElement(d.a,{md:12,sm:12,xs:12},c.a.createElement(R.b,{columns:B(this.props.options),disabled:this.props.disabled,data:this.state.data.lines,callback:this.updateLines,startForm:this.props.isAdd,schema:V})),c.a.createElement(d.a,{size:"xl",align:"right"},this.renderButton("Save"))))))}}]),a}(F.a);Y.contextType=P.a;var G=Y,J=function(e){var t=e.employees,a=e.patchEmployee,i=e.editITEmployee,l=e.doneEdit;console.log("employees",t);var u=Object(r.useReducer)(j.c,j.b),o=Object(n.a)(u,2),s=o[0],f=o[1],p=[{path:"firstName",label:"First Name"},{path:"lastName",label:"Last Name"},{path:"department",label:"Department"},{key:"view",content:function(e){return c.a.createElement(c.a.Fragment,null,Boolean(e.hasAccount)?c.a.createElement(b.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(j.a)({type:"VIEW",Component:G,data:e,title:"View Employee"},f)}},c.a.createElement(h.M,null)):c.a.createElement(c.a.Fragment,null),Boolean(e.hasAccount)?c.a.createElement(c.a.Fragment,null):c.a.createElement(b.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){return a(e)}},"Add Account"),Boolean(e.hasAccount)?c.a.createElement(b.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(j.a)({type:"EDIT",Component:G,data:e,title:"Edit Employee",submit:i},f)}},c.a.createElement(h.s,null)):c.a.createElement(c.a.Fragment,null))}}];return Object(r.useEffect)(function(){l&&Object(j.a)({type:"CLOSE"},f)},[l]),c.a.createElement("div",null,c.a.createElement(y.a,{data:s.data,openModal:s.openModal,component:s.Component,toggle:j.a,dispatch:f,title:s.title}),c.a.createElement(m.a,null,c.a.createElement(E.a,{className:"border-0"},c.a.createElement(d.a,{md:12,sm:12,xs:12},c.a.createElement(v.a,{className:"border-0"},"Employees")),c.a.createElement(g.a,null,c.a.createElement(O.a,{columns:p,data:t})))))},K=a(157),W=a(96),Q=a(177),X=a(102),Z=a(19),$=a(1575),ee=Object(Q.b)(function(e,t){return Object(p.a)({},t,{fetchStatus:Object(K.j)(e),addStatus:Object(K.g)(e),employees:Object(K.k)(e),editStatus:Object(K.i)(e),patchStatus:Object(K.l)(e),deleteStatus:Object(K.h)(e),permissions:Object(W.b)(e)})},function(e){return{fetchITEmployees:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(Object(K.c)(t))},addITEmployee:function(t){return e(Object(K.a)(t))},editITEmployee:function(t){return e(Object(K.b)(t))},patchITEmployee:function(t){return e(Object(K.d)(t))},deleteITEmployee:function(t){return e(Object(K.e)(t))}}})(function(e){var t=e.fetchStatus,a=e.addStatus,i=e.employees,l=e.fetchITEmployees,u=e.addITEmployee,o=e.editStatus,s=e.editITEmployee,f=e.deleteStatus,d=e.deleteITEmployee,m=e.activeTab,b=e.patchStatus,E=e.patchITEmployee,v=e.permissions,g=Object(r.useState)(!0),h=Object(n.a)(g,2),O=h[0],j=h[1],y=Object(r.useState)(!0),S=Object(n.a)(y,2),k=S[0],N=S[1],C=Object(r.useState)(!0),D=Object(n.a)(C,2),T=D[0],x=D[1],_=Object(r.useState)(!0),I=Object(n.a)(_,2),A=I[0],L=I[1],F=Object(r.useState)(!0),R=Object(n.a)(F,2),M=R[0],z=R[1],U=Object(r.useContext)(P.a),q=U.rootState,V=U.dispatch;Object(r.useEffect)(function(){try{var e=Object($.b)(q).options,t=e.offset,a=e.limit;e.onClick&&m===te.PURCHASE_LEDGER_ENTRY&&l([{key:"offset",value:t},{key:"limit",value:a}])}catch(n){}},[Object($.b)(q)]),Object(r.useEffect)(function(){j(!1),i.length>0||l()},[l,j]),Object(r.useEffect)(function(){var e=t.status,a=t.response;e!==Z.e.failure||O?m===te.PURCHASE_LEDGER_ENTRY&&Object($.d)(q,V,a,"",m):(X.toast.error("Failed Fetching LedgerEntries"),j(!0))},[t,j,m,$.d]),Object(r.useEffect)(function(){var e=a.status;e!==Z.e.failure||k?e!==Z.e.success||k||(X.toast.success("Added Employee"),N(!0)):(X.toast.error("Failed Adding Employee"),N(!0))},[a,N]),Object(r.useEffect)(function(){var e=o.status,t=o.response;console.log("edited",t),e!==Z.e.failure||T?e!==Z.e.success||T||(X.toast.success("Edited Employee"),x(!0)):(X.toast.error("Failed Editing Employee"),x(!0))},[o,x]),Object(r.useEffect)(function(){var e=b.status,t=b.response;t&&(Object(w.c)({},V,t.department),Object(w.d)({},V,v[t.department])),e!==Z.e.failure||A?e!==Z.e.success||A||(X.toast.success("Employee Account Added"),L(!0)):(X.toast.error("Failed Patching Employee"),L(!0))},[b,L]),Object(r.useEffect)(function(){var e=f.status;e!==Z.e.failure||M?e!==Z.e.success||M||(X.toast.success("Deleted Employee"),z(!0)):(X.toast.error("Failed Deleting Employee"),z(!0))},[f,z]);var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map(function(e){return e.resource}),a=e.map(function(e){var t={};return t.create="true"===String(e.create),t.read="true"===String(e.read),t.update="true"===String(e.update),t.delete="true"===String(e.create),t}),n={};t.forEach(function(e,t){n[e]=a[t]}),Object(w.d)({},V,n)};return c.a.createElement(J,{employees:i,doneAdd:a.status===Z.e.success&&!k,addITEmployee:function(){N(!1),u({})},doneEdit:o.status===Z.e.success&&!T,editITEmployee:function(e){x(!1);var t=Object(p.a)({id:e.id?e.id:"",permissions:B(e.lines)},e);s(t)},donePatch:b.status===Z.e.success&&!A,patchEmployee:function(e){L(!1);var t={id:e.id,department:e.department,hasAccount:!0};E(t)},doneDelete:f.status===Z.e.success&&!M,deleteITEmployee:function(e){z(!1),d(e)}})});a.d(t,"activeTabs",function(){return te});var te={EMPLOYEES:"1"};t.default=function(e){var t=Object(r.useState)(te.EMPLOYEES),a=Object(n.a)(t,2),p=a[0],b=a[1],E=Object(r.useContext)(P.a).rootState;return console.log("department",Object(w.b)(E)),c.a.createElement("div",null,c.a.createElement(m.a,null,c.a.createElement(i.a,{tabs:!0,className:"mb-2"},c.a.createElement(l.a,null,c.a.createElement(u.a,{className:p===te.EMPLOYEES?"activepageTabBlue":"notactivePageTabBlue",onClick:function(){var e;e=te.EMPLOYEES,p!==e&&b(e)}},"Employees"))),c.a.createElement(o.a,{activeTab:p},c.a.createElement(s.a,{tabId:te.EMPLOYEES},c.a.createElement(f.a,null,c.a.createElement(d.a,null,c.a.createElement(ee,{activeTab:p})))))))}}}]);
//# sourceMappingURL=62.ca360dba.chunk.js.map