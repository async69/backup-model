(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1573:function(e,t,a){"use strict";var n=a(3),c=a(1),r=a.n(c),i=a(27),o=a(28),u=a(33),s=a(34),l=a(23);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var f=function(e){Object(u.a)(a,e);var t=d(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,this.props.columns.map(function(e){return r.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),a}(c.Component),m=a(1583),b=a.n(m),p=a(53),g=a(43),h=/[0-9\-+#]/,v=/[^\d\-+#]/g;function O(e){return e.search(h)}function j(e,t,a){var n=!1,c={value:e};e<0&&(n=!0,c.value=-c.value),c.sign=n?"-":"",c.value=Number(c.value).toFixed(t.fraction&&t.fraction.length),c.value=Number(c.value).toString();var r=t.fraction&&t.fraction.lastIndexOf("0"),i=c.value.split("."),o=Object(g.a)(i,2),u=o[0],s=void 0===u?"0":u,l=o[1],d=void 0===l?"":l;return(!d||d&&d.length<=r)&&(d=r<0?"":Number("0."+d).toFixed(r+1).replace("0.","")),c.integer=s,c.fraction=d,function(e,t){e.result="";var a=t.integer.split(t.separator),n=a.join(""),c=n&&n.indexOf("0");if(c>-1)for(;e.integer.length<n.length-c;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var r=a[1]&&a[a.length-1].length;if(r)for(var i=e.integer.length,o=i%r,u=0;u<i;u++)e.result+=e.integer.charAt(u),!((u-o+1)%r)&&u<i-r&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(c,t),"0"!==c.result&&""!==c.result||(n=!1,c.sign=""),!n&&t.maskHasPositiveSign?c.sign="+":n&&t.maskHasPositiveSign?c.sign="-":n&&(c.sign=a&&a.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),c}var E=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},a=e.length,n=O(e);t.prefix=n>0?e.substring(0,n):"";var c=O(e.split("").reverse().join("")),r=a-c,i=e.substring(r,r+1),o=r+("."===i||","===i?1:0);t.suffix=c>0?e.substring(o,a):"",t.mask=e.substring(n,o),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var u=t.mask.match(v);return t.decimal=u&&u[u.length-1]||".",t.separator=u&&u[1]&&u[0]||",",u=t.mask.split(t.decimal),t.integer=u[0],t.fraction=u[1],t}(e),c=j(t,n,a);return n.prefix+c.sign+c.result+n.suffix},k=a(1578),y=a(1584);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var c=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var C=function(e){Object(u.a)(a,e);var t=S(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).renderCell=function(e,t,a){if(console.log("loaded",a),t.content)return t.content(e,a);var n=b.a.get(e,t.path),c=k.findIndex(function(e){return e===String(t.path)});return y.findIndex(function(e){return e===String(t.path)})>=0?Object(p.e)(n):c>=0?E("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return r.a.createElement("tbody",null,a.map(function(t){return r.a.createElement("tr",{key:t.id},n.map(function(a){return r.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a,e.props.loading))}))}))}}]),a}(c.Component),D=a(1643),B=a(1644),N=a(1645),x=a(109),_=a(1575),w=function(){var e=Object(c.useContext)(x.a),t=e.rootState,a=e.dispatch,n=Object(c.useState)(0),i=Object(g.a)(n,2),o=i[0],u=i[1],s=Object(c.useState)(0),l=Object(g.a)(s,2),d=l[0],f=l[1],m=Object(c.useState)(0),b=Object(g.a)(m,2),p=b[0],h=b[1],v=Object(c.useState)(0),O=Object(g.a)(v,2),j=O[0],E=O[1],k=Object(c.useState)(!1),y=Object(g.a)(k,2),S=y[0],C=y[1],w=Object(c.useState)(!1),M=Object(g.a)(w,2),R=M[0],A=M[1],I=Object(c.useState)({count:0,results:[]}),P=Object(g.a)(I,2),L=P[0],T=P[1],F=Object(c.useState)(0),z=Object(g.a)(F,2),H=z[0],U=z[1],q=Object(c.useState)(""),V=Object(g.a)(q,2),J=V[0],K=V[1];Object(c.useEffect)(function(){Object(_.a)(t)},[t]),Object(c.useEffect)(function(){var e=L.count,t=L.results;0===t.length&&0===e||(E(Math.ceil(e/t.length)),f(t.length),h(e),C(!0))},[J,E,f,h,C]),Object(c.useEffect)(function(){if(H){var e=L.count,t=L.results;d<=t.length&&(E(Math.ceil(e/t.length)),f(t.length),h(e),C(!0))}},[H,L]),Object(c.useEffect)(function(){try{var e=Object(_.b)(t),a=e.results,n=e.amount,c=e.activeTab;if(""!==c?K(c):console.warn("Pass active tab for paginations"),n!==H&&"undefined"!==typeof n&&(U(n),T(a)),"undefined"!==String(a)&&!S){var r=a.count,i=a.results;E(Math.ceil(r/i.length)),f(i.length),h(r),C(!0)}}catch(o){}},[t,U,T]);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;R||A(!0),u(e),t&&f(t)};return Object(c.useEffect)(function(){o<p&&R&&Object(_.c)({},a,{offset:o,limit:d,onClick:R})},[o,d]),r.a.createElement("div",null,r.a.createElement(D.a,{className:"pagination left",size:"md",color:"primary"},r.a.createElement(B.a,{disabled:0===o},r.a.createElement(N.a,{first:!0,href:"#",onClick:function(){return W(0)}},"First")),r.a.createElement(B.a,null,r.a.createElement(N.a,{previous:!0,disabled:0===o,onClick:function(){return W(o-d)}})),Array(j).fill("").map(function(e,t){return r.a.createElement(B.a,{active:t===Math.floor(o/d)},r.a.createElement(N.a,{onClick:function(){return W(t*d)}},t+1))}),r.a.createElement(B.a,null,r.a.createElement(N.a,{next:!0,onClick:function(){return W(o+d)},disabled:o+d>=p})),r.a.createElement(B.a,{disabled:o+d>=p},r.a.createElement(N.a,{last:!0,onClick:function(){return W((j-1)*d)}},"Last"))))},M=a(1549),R=a(1554),A=a(1619),I=a(177);t.a=Object(I.b)(function(e,t){return Object(n.a)({state:e},t)})(function(e){var t=e.columns,a=e.data,n=e.title,i=e.state,o=e.getLoading;Object(c.useEffect)(function(){"function"===typeof o&&console.log("result",o(i,{isPatch:!0}))},[i,o]);var u=Object(c.useContext)(x.a).rootState;return Object(c.useEffect)(function(){},[u]),console.log(o(i,{isPatch:!0})),r.a.createElement(M.a,{className:"p-2"},r.a.createElement(R.a,{className:"tableHeaders border-0"},r.a.createElement("div",null,""+n?n:"")),r.a.createElement(A.a,{size:"md",responsive:!0,striped:!0},r.a.createElement(f,{columns:t}),r.a.createElement(C,{data:a,columns:t,loading:"fucntion"===typeof o?o(i,{isPatch:!0}):{}}),r.a.createElement(w,null)))})},1575:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return i}),a.d(t,"c",function(){return o});var n=a(38),c=function(e){return e.page_values?e.page_values:null},r=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;t({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:r,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:c(e)?c(e).amount+1:0,activeTab:i}})}},i=function(e){var t=e.page_values;try{var a=t.pageLimit?t.pageLimit:0;return a||0}catch(n){}},o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1582:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},1621:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(7);var n=a(3),c=a(1),r=a.n(c),i=a(14),o=a(1620),u={modalData:{openModal:!1,data:{},options:{},isDone:!1,title:"",submit:function(e){return null},Component:r.a.createElement(c.Fragment,null),okCallback:function(e){return null},cancelCallback:function(e){return null}}},s=Object(i.c)({name:"modalData",reducers:{toggle:function(e,t){var a=t.payload,c=a.type,i=a.data,u=a.title,s=a.Component,l=a.submit,d=a._toggle,f=a.isDone,m=a.deleteOptions,b=a.options;switch(c){case"OPEN":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:u,data:i,Component:r.a.createElement(s,{toggle:d})});break;case"ADD":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:u,data:i,submit:l,isDone:f,options:b,Component:r.a.createElement(s,{submit:l,options:b})});break;case"VIEW":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:u,data:i,options:b,Component:r.a.createElement(s,{disabled:!0,data:i,isView:!0,options:b})});break;case"EDIT":e.modalData=Object(n.a)({},e.modalData,{openModal:!0,title:u,data:i,isDone:f,options:b,Component:r.a.createElement(s,{isEdit:!0,data:i,submit:l,options:b})});break;case"DELETE":var p=m.okCallback,g=m.cancelCallback,h=m.title,v=m.id,O=m.message;Object(o.a)({okCallback:p,errCallback:g,title:h,id:v,message:O});break;case"CLOSE":e.modalData=Object(n.a)({},e.modalData,{openModal:!1})}}},initialState:u}),l=s.actions.toggle;s.reducer},2440:function(e,t,a){"use strict";a.r(t);var n=a(43),c=a(1),r=a.n(c),i=a(1574),o=a(1555),u=a(1788),s=a(1549),l=a(17),d=a(3),f=a(27),m=a(28),b=a(33),p=a(34),g=a(23),h=a(1577),v=a(1576),O=a.n(v),j=a(1550),E=a(1556),k=a(1787),y=a(1622);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(g.a)(e);if(t){var c=Object(g.a)(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return Object(p.a)(this,a)}}var C=function(e){Object(b.a)(a,e);var t=S(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).initialState={data:{id:"",document_number:"",name:"",code:"",bic:""},errors:{},lockUpdate:!1},n.state=n.initialState,n.schema={id:O.a.string().allow("").optional(),document_number:O.a.string().optional().allow("").label("Document Number"),name:O.a.string().required().label("Name"),code:O.a.string().required().label("Code"),bic:O.a.string().required().label("BIC")},n}return Object(m.a)(a,[{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"populateState",value:function(e){var t=Object(d.a)({},this.state,{data:{id:e.id?e.id:"",code:e.code?e.code:"",document_number:e.document_number?e.document_number:"",name:e.name?e.name:"",bic:e.bic?e.bic:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){this.props.doneAdd&&this.resetForm(),!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"render",value:function(){var e="Add";return this.props.isEdit&&(e="Edit"),r.a.createElement(s.a,{className:"border-0"},r.a.createElement(j.a,null,r.a.createElement(E.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a,null,r.a.createElement(u.a,{md:6,sm:12,xs:12},this.renderInput("code","Code")),r.a.createElement(u.a,{md:6,sm:12,xs:12},this.renderInput("name","Name")),r.a.createElement(u.a,{md:12,sm:12,xs:12},this.renderInput("bic","BIC"))),r.a.createElement(y.a,{align:"center"},this.renderButton("".concat(e," Bank"))))))}}]),a}(h.a),D=a(1582),B=a(1573),N=a(1581),x=a(1579),_=function(e){var t=e.banks,a=e.addBank,d=e.editBank,f=e.deleteBank,m=e.doneAdd,b=e.doneEdit,p=Object(c.useReducer)(N.c,N.b),g=Object(n.a)(p,2),h=g[0],v=g[1],O=[{path:"document_number",label:"Document Number"},{path:"name",label:"Name"},{path:"code",label:"Code"},{path:"bic",label:"BIC"},{key:"view",content:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(N.a)({type:"VIEW",Component:C,data:e,title:"View Bank"},v)}},r.a.createElement(l.M,null)),r.a.createElement(o.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){Object(N.a)({title:"Edit Bank",type:"EDIT",Component:C,submit:d,isEdit:!0,data:e},v)}},r.a.createElement(l.s,null)),r.a.createElement(o.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){Object(N.a)({type:"DELETE",deleteOptions:{okCallback:j,title:"Are you sure?",id:e.id,message:""}},v)}},r.a.createElement(l.p,null)))}}],j=function(e){f(e)};return Object(c.useEffect)(function(){(m||b)&&Object(N.a)({type:"CLOSE"},v)},[m,b]),r.a.createElement("div",null,r.a.createElement(i.a,null,r.a.createElement(x.a,{data:h.data,openModal:h.openModal,component:h.Component,toggle:N.a,dispatch:v,title:h.title}),r.a.createElement(u.a,{align:"right",className:"mb-1 pl-3 pr-3"},r.a.createElement(o.a,{onClick:function(){Object(N.a)({type:"ADD",Component:C,submit:a,isEdit:!0,data:t},v)},outline:!0,size:"sm"},"New Bank")),r.a.createElement(s.a,{className:"border-0"},r.a.createElement(B.a,{title:"Banks",columns:O,data:Object(D.a)(t)}))))},w=a(35),M=a(177),R=a(102),A=a(19),I=a(1621);t.default=Object(M.b)(function(e){return{fetchStatus:Object(w.j)(e),addStatus:Object(w.f)(e),banks:Object(w.g)(e),editStatus:Object(w.i)(e),deleteStatus:Object(w.h)(e)}},function(e){return{fetchBanks:function(){return e(Object(w.c)())},addBank:function(t){return e(Object(w.a)(t))},editBank:function(t){return e(Object(w.b)(t))},deleteBank:function(t){return e(Object(w.d)(t))},toggle:function(t){return e(Object(I.a)(t))}}})(function(e){var t=e.fetchStatus,a=e.addStatus,i=e.fetchBanks,o=e.addBank,u=e.editStatus,s=e.editBank,l=e.deleteStatus,d=e.deleteBank,f=e.banks,m=e.toggle,b=Object(c.useState)(!0),p=Object(n.a)(b,2),g=p[0],h=p[1],v=Object(c.useState)(!0),O=Object(n.a)(v,2),j=O[0],E=O[1],k=Object(c.useState)(!0),y=Object(n.a)(k,2),S=y[0],C=y[1],D=Object(c.useState)(!0),B=Object(n.a)(D,2),N=B[0],x=B[1],w=a.status===A.e.success&&!j,M=u.status===A.e.success&&!S,I=l.status===A.e.success&&!N;Object(c.useEffect)(function(){h(!1),i()},[i,h]),Object(c.useEffect)(function(){t.status!==A.e.failure||g||(R.toast.error("Failed fetching Banks"),h(!0))},[t,h]),Object(c.useEffect)(function(){var e=a.status;e!==A.e.failure||j?e!==A.e.success||j||(R.toast.success("Added Bank"),E(!0)):E(!0)},[a,E]),Object(c.useEffect)(function(){var e=u.status;e!==A.e.failure||S?e!==A.e.success||S||(R.toast.success("Edited Bank"),C(!0)):C(!0)},[u,C]),Object(c.useEffect)(function(){var e=l.status;e!==A.e.failure||N?e!==A.e.success||N||(R.toast.success("Deleted Bank"),x(!0)):x(!0)},[l,x]);return Object(c.useEffect)(function(){(w||M||I)&&m({type:"CLOSE"})},[w,M,I]),r.a.createElement(_,{doneAdd:a.status===A.e.success&&!j,addBank:function(e){E(!1);var t={id:e.id,name:e.name,code:e.code,bic:e.bic};o(t)},doneEdit:u.status===A.e.success&&!S,editBank:function(e){C(!1);var t={id:e.id,name:e.name,code:e.code,bic:e.bic};s(t)},doneDelete:l.status===A.e.success&&!N,deleteBank:function(e){x(!1),d(e)},_toggle:m,banks:f})})}}]);
//# sourceMappingURL=78.05a04e66.chunk.js.map