(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1573:function(e,t,a){"use strict";var n=a(3),r=a(1),c=a.n(r),i=a(27),s=a(28),u=a(33),o=a(34),l=a(23);function d(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var m=function(e){Object(u.a)(a,e);var t=d(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return c.a.createElement("thead",null,c.a.createElement("tr",null,this.props.columns.map(function(e){return c.a.createElement("th",{key:e.path||e.key},e.label)})))}}]),a}(r.Component),p=a(1583),b=a.n(p),f=a(53),h=a(43),O=/[0-9\-+#]/,v=/[^\d\-+#]/g;function j(e){return e.search(O)}function E(e,t,a){var n=!1,r={value:e};e<0&&(n=!0,r.value=-r.value),r.sign=n?"-":"",r.value=Number(r.value).toFixed(t.fraction&&t.fraction.length),r.value=Number(r.value).toString();var c=t.fraction&&t.fraction.lastIndexOf("0"),i=r.value.split("."),s=Object(h.a)(i,2),u=s[0],o=void 0===u?"0":u,l=s[1],d=void 0===l?"":l;return(!d||d&&d.length<=c)&&(d=c<0?"":Number("0."+d).toFixed(c+1).replace("0.","")),r.integer=o,r.fraction=d,function(e,t){e.result="";var a=t.integer.split(t.separator),n=a.join(""),r=n&&n.indexOf("0");if(r>-1)for(;e.integer.length<n.length-r;)e.integer="0"+e.integer;else 0===Number(e.integer)&&(e.integer="");var c=a[1]&&a[a.length-1].length;if(c)for(var i=e.integer.length,s=i%c,u=0;u<i;u++)e.result+=e.integer.charAt(u),!((u-s+1)%c)&&u<i-c&&(e.result+=t.separator);else e.result=e.integer;e.result+=t.fraction&&e.fraction?t.decimal+e.fraction:""}(r,t),"0"!==r.result&&""!==r.result||(n=!1,r.sign=""),!n&&t.maskHasPositiveSign?r.sign="+":n&&t.maskHasPositiveSign?r.sign="-":n&&(r.sign=a&&a.enforceMaskSign&&!t.maskHasNegativeSign?"":"-"),r}var g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||isNaN(Number(t)))return t;var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#.##",t={},a=e.length,n=j(e);t.prefix=n>0?e.substring(0,n):"";var r=j(e.split("").reverse().join("")),c=a-r,i=e.substring(c,c+1),s=c+("."===i||","===i?1:0);t.suffix=r>0?e.substring(s,a):"",t.mask=e.substring(n,s),t.maskHasNegativeSign="-"===t.mask.charAt(0),t.maskHasPositiveSign="+"===t.mask.charAt(0);var u=t.mask.match(v);return t.decimal=u&&u[u.length-1]||".",t.separator=u&&u[1]&&u[0]||",",u=t.mask.split(t.decimal),t.integer=u[0],t.fraction=u[1],t}(e),r=E(t,n,a);return n.prefix+r.sign+r.result+n.suffix},y=a(1578),S=a(1584);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(o.a)(this,a)}}var k=function(e){Object(u.a)(a,e);var t=C(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).renderCell=function(e,t,a){if(console.log("loaded",a),t.content)return t.content(e,a);var n=b.a.get(e,t.path),r=y.findIndex(function(e){return e===String(t.path)});return S.findIndex(function(e){return e===String(t.path)})>=0?Object(f.e)(n):r>=0?g("#,###.00",n,{enforceMaskSign:!0}):n?String(n):""},e.createKey=function(e,t){return e._id+(t.path||t.key)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.columns;return c.a.createElement("tbody",null,a.map(function(t){return c.a.createElement("tr",{key:t.id},n.map(function(a){return c.a.createElement("td",{key:e.createKey(t,a)},e.renderCell(t,a,e.props.loading))}))}))}}]),a}(r.Component),_=a(1643),D=a(1644),R=a(1645),J=a(109),N=a(1575),P=function(){var e=Object(r.useContext)(J.a),t=e.rootState,a=e.dispatch,n=Object(r.useState)(0),i=Object(h.a)(n,2),s=i[0],u=i[1],o=Object(r.useState)(0),l=Object(h.a)(o,2),d=l[0],m=l[1],p=Object(r.useState)(0),b=Object(h.a)(p,2),f=b[0],O=b[1],v=Object(r.useState)(0),j=Object(h.a)(v,2),E=j[0],g=j[1],y=Object(r.useState)(!1),S=Object(h.a)(y,2),C=S[0],k=S[1],P=Object(r.useState)(!1),A=Object(h.a)(P,2),T=A[0],x=A[1],w=Object(r.useState)({count:0,results:[]}),F=Object(h.a)(w,2),I=F[0],q=F[1],B=Object(r.useState)(0),L=Object(h.a)(B,2),M=L[0],G=L[1],z=Object(r.useState)(""),V=Object(h.a)(z,2),U=V[0],H=V[1];Object(r.useEffect)(function(){Object(N.a)(t)},[t]),Object(r.useEffect)(function(){var e=I.count,t=I.results;0===t.length&&0===e||(g(Math.ceil(e/t.length)),m(t.length),O(e),k(!0))},[U,g,m,O,k]),Object(r.useEffect)(function(){if(M){var e=I.count,t=I.results;d<=t.length&&(g(Math.ceil(e/t.length)),m(t.length),O(e),k(!0))}},[M,I]),Object(r.useEffect)(function(){try{var e=Object(N.b)(t),a=e.results,n=e.amount,r=e.activeTab;if(""!==r?H(r):console.warn("Pass active tab for paginations"),n!==M&&"undefined"!==typeof n&&(G(n),q(a)),"undefined"!==String(a)&&!C){var c=a.count,i=a.results;g(Math.ceil(c/i.length)),m(i.length),O(c),k(!0)}}catch(s){}},[t,G,q]);var W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;T||x(!0),u(e),t&&m(t)};return Object(r.useEffect)(function(){s<f&&T&&Object(N.c)({},a,{offset:s,limit:d,onClick:T})},[s,d]),c.a.createElement("div",null,c.a.createElement(_.a,{className:"pagination left",size:"md",color:"primary"},c.a.createElement(D.a,{disabled:0===s},c.a.createElement(R.a,{first:!0,href:"#",onClick:function(){return W(0)}},"First")),c.a.createElement(D.a,null,c.a.createElement(R.a,{previous:!0,disabled:0===s,onClick:function(){return W(s-d)}})),Array(E).fill("").map(function(e,t){return c.a.createElement(D.a,{active:t===Math.floor(s/d)},c.a.createElement(R.a,{onClick:function(){return W(t*d)}},t+1))}),c.a.createElement(D.a,null,c.a.createElement(R.a,{next:!0,onClick:function(){return W(s+d)},disabled:s+d>=f})),c.a.createElement(D.a,{disabled:s+d>=f},c.a.createElement(R.a,{last:!0,onClick:function(){return W((E-1)*d)}},"Last"))))},A=a(1549),T=a(1554),x=a(1619),w=a(177);t.a=Object(w.b)(function(e,t){return Object(n.a)({state:e},t)})(function(e){var t=e.columns,a=e.data,n=e.title,i=e.state,s=e.getLoading;Object(r.useEffect)(function(){"function"===typeof s&&console.log("result",s(i,{isPatch:!0}))},[i,s]);var u=Object(r.useContext)(J.a).rootState;return Object(r.useEffect)(function(){},[u]),console.log(s(i,{isPatch:!0})),c.a.createElement(A.a,{className:"p-2"},c.a.createElement(T.a,{className:"tableHeaders border-0"},c.a.createElement("div",null,""+n?n:"")),c.a.createElement(x.a,{size:"md",responsive:!0,striped:!0},c.a.createElement(m,{columns:t}),c.a.createElement(k,{data:a,columns:t,loading:"fucntion"===typeof s?s(i,{isPatch:!0}):{}}),c.a.createElement(P,null)))})},1575:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return i}),a.d(t,"c",function(){return s});var n=a(38),r=function(e){return e.page_values?e.page_values:null},c=function(e,t,a){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if("undefined"!==typeof a){if(0===a.count)return null;t({type:n.a.UPDATE,stateName:"page_values",payload:{results:a,options:c,pageLimit:a.length?5*Math.ceil(a.length/5):5,amount:r(e)?r(e).amount+1:0,activeTab:i}})}},i=function(e){var t=e.page_values;try{var a=t.pageLimit?t.pageLimit:0;return a||0}catch(n){}},s=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{offset:0,limit:0};t({type:n.a.UPDATE,stateName:"page_values",payload:{options:a}})}},1578:function(e){e.exports=["credit","debit","total","total_amount","paid_amount","account_balance","balance","price","unit_price","tax","unit_cost","tax_amount","amount_excl_vat","quantity","inventory_quantity","account.balance"]},1580:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return c});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=void 0;return a.length>0&&(r=e.filter(function(e){var r=n?"":"^";try{return a&&String(e[t]).match(new RegExp(r+a,"gi"))}catch(c){console.error("Tag does not exist: ".concat(String(c)))}return null})),"undefined"===typeof r?e:r},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"posting_date",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=void 0;return a.length>0&&n.length>0&&(r=e.filter(function(e){try{var r=new Date(e[t]).getTime(),c=new Date(a).getTime(),i=new Date(n).getTime();return a&&n&&r<=i&&r>=c}catch(s){console.error("Tag does not exist: ".concat(String(s)))}return null})),"undefined"===typeof r?e:r},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"country",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"addresses",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=void 0;return a.length>0&&(c=e.filter(function(e){var c=r?"":"^";try{var i=e[n].findIndex(function(e){return e[t].match(new RegExp(c+a,"gi"))});return a&&i>=0}catch(s){console.error("Tag does not exist: ".concat(String(s)))}return null})),"undefined"===typeof c?e:c}},1582:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},1603:function(e,t,a){"use strict";var n=a(7),r=a(43),c=a(3),i=a(1),s=a.n(i),u=a(1619),o=a(1557),l=a(1555),d=a(17),m="ADDING_LINE",p={addCount:0,status:"IDLE",hasEdit:!0,hasDelete:!0,_data:[]},b="_ADD",f="UPDATE",h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(c.a)({},e,{addCount:e.addCount+1,status:m});case f:return Object(c.a)({},e,{_data:t.payload});default:return e}},O=function(e){return e({type:b})},v=a(1576),j=a.n(v),E=a(1583),g=a.n(E),y=function(){return Math.random().toString(36).substring(7)},S=function(e,t){var a={};for(var n in e)a[n]="";return Object(c.a)({},a,{_id:t})},C="ADDING_LINE",k="IDLE",_="EDIT",D="SAVED",R="CANCELED",J=function(e){var t=e.data,a=e.columns,m=e.hasEdit,p=e.hasDelete,b=e.status,h=e.addCount,O=e.schema,v=e.dispatch,E=e.callback,J=Object(i.useState)([]),N=Object(r.a)(J,2),P=N[0],A=N[1],T=Object(i.useState)(k),x=Object(r.a)(T,2),w=x[0],F=x[1],I=Object(i.useState)(t.map(function(){return!1})),q=Object(r.a)(I,2),B=q[0],L=q[1],M=Object(i.useState)({}),G=Object(r.a)(M,2),z=G[0],V=G[1];Object(i.useEffect)(function(){k!==w&&D!==w&&R!==w||F(b)},[b,F,h]),Object(i.useEffect)(function(){if(t.length>0&&0===P.length){var e=t.map(function(e){var t={};for(var n in e){var r=a.find(function(e){return e.tag===n});r&&(t[r.tag]=g.a.get(e,r.tag))}return Object(c.a)({},t,{_id:y()})});L(e.map(function(){return!1})),A(e)}},[t,A]),Object(i.useEffect)(function(){var e;(e=P,function(t){t({type:f,payload:e})})(v),E(P)},[P,v]);var U=Object(i.useState)({}),H=Object(r.a)(U,2),W=H[0],K=H[1],Q=Object(i.useState)({}),X=Object(r.a)(Q,2),Y=X[0],Z=X[1],$=Object(i.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ae=ee[1],ne=Object(i.useState)({}),re=Object(r.a)(ne,2),ce=re[0],ie=re[1];Object(i.useEffect)(function(){var e={};a.forEach(function(t){"select"===t.type&&(e[t.tag]=t.options)}),ie(e)},[ie]),Object(i.useEffect)(function(){if(w===C){var e=y();A(P.concat(S(P[0],e))),se(S(P[0],e)),L(B.concat(!0))}},[w]);var se=function(e){Z(O),K(Object(c.a)({},z,e))};Object(i.useEffect)(function(){var e=j.a.validate(W,Y,{abortEarly:!1}).error;e?(console.warn(e),ae(!1)):Object.values(W).length>1&&ae(!0)},[W]);var ue=function(e){var t=e.currentTarget,a=t.name,r=t.value,i=t.callback;K(Object(c.a)({},W,Object(n.a)({},a,r)));i({name:a,value:r,setOptions:function(e,t){var a=ce;Object.keys(ce).findIndex(function(t){return t===e})>=0&&(a[e]=t,ie(a))},options:ce,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.map(function(e){var a=e.name,n=e.value;return t[a]=n,null}),K(Object(c.a)({},W,t))},formData:W})};return Object(i.useEffect)(function(){var e={};a.forEach(function(t){t.defaultValue&&(e=Object(c.a)({},e,Object(n.a)({},t.tag,t.defaultValue)))}),Object.values(e).length>0&&(K(Object(c.a)({},W,e)),V(e))},[a,K]),s.a.createElement(u.a,{size:"md",responsive:!0,striped:!0},s.a.createElement("thead",null,s.a.createElement("tr",null,a.filter(function(e){return!Boolean(e.isView)}).map(function(e){return s.a.createElement("th",null,e.label)}))),s.a.createElement("tbody",null,P.map(function(e,t){return s.a.createElement("tr",null,a.filter(function(e){return!Boolean(e.isView)}).map(function(a){return B[t]&&!a.noEdit?s.a.createElement("td",null,"select"===a.type?s.a.createElement(o.a,{type:a.type,name:a.tag,value:g.a.get(W,a.tag),onChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,c=a.callback?a.callback:function(){return null};ue({currentTarget:{name:n,value:r,callback:c}})},disabled:a.disabled},s.a.createElement("option",null),"server"===a.optionsFrom?ce[a.tag].map(function(e){return s.a.createElement("option",{value:e.id},e.name)}):ce[a.tag].map(function(e){return s.a.createElement("option",{value:e},e)})):s.a.createElement(o.a,{type:a.type?a.type:"text",name:a.tag,disabled:a.disabled,value:g.a.get(W,a.tag),onChange:function(e){var t=e.currentTarget,n=t.name,r=t.value,c=a.callback?a.callback:function(){return null};ue({currentTarget:{name:n,value:r,callback:c}})}})):s.a.createElement("td",null,function(e,t){if("server"!==t.optionsFrom)return e[t.tag];var a=t.options.find(function(a){return String(a.id)===String(e[t.tag])});return a?a.name:void 0}(e,a))}),m?s.a.createElement("td",null,B[t]?s.a.createElement("div",null,s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){A(P.map(function(e){return e._id===W._id?Object(c.a)({_id:y()},W):e})),L(B.map(function(){return!1})),F(D)},disabled:!te},"Save"),s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){!function(){if(w===C){var e=P.findIndex(function(e){return e._id===W._id});e>=0&&(A(P.filter(function(t,a){return e!==a})),L(B.filter(function(t,a){return e!==a}))),ae(!0)}else L(B.map(function(){return!1}));F(R),Z({})}()}},"Cancel")):s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"warning",onClick:function(){L(B.map(function(e,a){return a===t})),se(e),F(_)}},s.a.createElement(d.s,null))):s.a.createElement(s.a.Fragment,null),p?s.a.createElement("td",null,s.a.createElement(l.a,{className:"m-1",size:"sm",outline:!0,color:"danger",onClick:function(){return function(e){var t=P.findIndex(function(t){return t._id===e});t>=0&&(A(P.filter(function(e,a){return a!==t})),L(B.filter(function(e,a){return a!==t})),F(R))}(e._id)}},s.a.createElement(d.p,null))):s.a.createElement(s.a.Fragment,null))})))},N=a(1788),P=function(e){var t=e.data,a=e.columns,n=e.callback,c=e.schema,u=e.lineTag,o=e.disabled,d=e.startForm,m=Object(i.useReducer)(h,p),b=Object(r.a)(m,2),f=b[0],v=b[1],j=Object(i.useState)(!1),E=Object(r.a)(j,2),g=E[0],y=E[1];Object(i.useEffect)(function(){d&&O(v)},[d,v]);return s.a.createElement("div",null,o?s.a.createElement(s.a.Fragment,null):s.a.createElement(N.a,{align:"right",className:"mb-1 pl-3 pr-3"},s.a.createElement(l.a,{className:"m-1 align-right",size:"sm",outline:!0,color:"info",onClick:function(){return O(v)}},u||"Add Line")),s.a.createElement(J,Object.assign({},f,{dispatch:v,data:t,schema:c,columns:a,callback:function(e){!g&&e.length>0&&Object.values(e[0]).length>1?(n(e),y(!0)):f._data.length>=e.length&&n(e)},hasEdit:!o,hasDelete:!o})))};a.d(t,"a",function(){return J}),a.d(t,"c",function(){return O}),a.d(t,"d",function(){return p}),a.d(t,"e",function(){return h}),a.d(t,"b",function(){return P})},1641:function(e,t,a){"use strict";var n=a(15),r=a(22),c=a(1),i=a.n(c),s=a(180),u=a(2),o=a.n(u),l=a(16),d=a.n(l),m=a(13),p={tag:m.p,activeTab:o.a.any,className:o.a.string,cssModule:o.a.object},b={activeTabId:o.a.any},f=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={activeTab:a.props.activeTab},a}Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){return t.activeTab!==e.activeTab?{activeTab:e.activeTab}:null};var a=t.prototype;return a.getChildContext=function(){return{activeTabId:this.state.activeTab}},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,r=e.tag,c=Object(m.m)(this.props,Object.keys(p)),s=Object(m.l)(d()("tab-content",t),a);return i.a.createElement(r,Object(n.a)({},c,{className:s}))},t}(c.Component);Object(s.polyfill)(f),t.a=f,f.propTypes=p,f.defaultProps={tag:"div"},f.childContextTypes=b},1642:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(15),r=a(20),c=a(1),i=a.n(c),s=a(2),u=a.n(s),o=a(16),l=a.n(o),d=a(13),m={tag:d.p,className:u.a.string,cssModule:u.a.object,tabId:u.a.any},p={activeTabId:u.a.any};function b(e,t){var a=e.className,c=e.cssModule,s=e.tabId,u=e.tag,o=Object(r.a)(e,["className","cssModule","tabId","tag"]),m=Object(d.l)(l()("tab-pane",a,{active:s===t.activeTabId}),c);return i.a.createElement(u,Object(n.a)({},o,{className:m}))}b.propTypes=m,b.defaultProps={tag:"div"},b.contextTypes=p},2375:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(1),c=a.n(r),i=a(1547),s=a(1548),u=a(1558),o=a(1641),l=a(1642),d=a(1787),m=a(1788),p=a(7),b=a(3),f=a(1555),h=a(1549),O=a(1574),v=a(1579),j=a(112),E=a.n(j),g=a(178),y=a(27),S=a(28),C=a(179),k=a(33),_=a(34),D=a(23),R=a(1554),J=a(1550),N=a(1556),P=a(1577),A=a(1603),T=a(1576),x=a.n(T),w="cash_receipt_journal_lines",F=Object(p.a)({id:x.a.any().allow("").optional(),status:x.a.string().required().label("Enter this one"),date:x.a.string().required().label("Enter this one"),document_number:x.a.string().required().label("Enter this one"),description:x.a.string().required().label("Enter this one"),remarks:x.a.string().allow("").optional(),customer:x.a.string().required().label("Enter this one"),invoice:x.a.string().required().label("Enter this one")},w,x.a.array().items(x.a.object()).min(1)),I={data:Object(p.a)({id:"",status:"",date:"",document_number:"",description:"",remarks:null,customer:"",invoice:""},w,[]),errors:{},selectedLine:"",lineCounter:1},q={_id:x.a.any().allow("").optional(),debit:x.a.number().required().label("Field is required"),credit:x.a.number().required().label("Field is required"),description:x.a.number().required().label("Field is required"),account_balance:x.a.number().required().label("Field is required"),account:x.a.number().required().label("Field is required"),remarks:x.a.number().allow("").optional()};function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(_.a)(this,a)}}var L=function(e){Object(k.a)(a,e);var t=B(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).doSubmit=Object(g.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.submit(n.state.data);case 1:case"end":return e.stop()}},e)})),n.initialState=I,n.state=JSON.parse(JSON.stringify(n.initialState)),n.schema=F,n.handleLineSave=n.handleLineSave.bind(Object(C.a)(n)),n.populateState=n.populateState.bind(Object(C.a)(n)),n.updateLines=n.updateLines.bind(Object(C.a)(n)),n.lineMapper=n.lineMapper.bind(Object(C.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"lineMapper",value:function(){return this.props.isEdit||this.props.isView?function(e){return e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:w].map(function(e){return{_id:e.id,debit:Number(e.debit),credit:Number(e.credit),description:e.description,account_balance:Number(e.account_balance),account:e.account.id,remarks:e.remarks}})}(this.props.data,"cash_receipt_journal_lines"):[]}},{key:"populateState",value:function(e){var t=function(e,t){return Object(p.a)({id:e.id,status:e.status,date:e.date,document_number:e.document_number,description:e.description,remarks:"null"!==String(e.remarks)?e.remarks:"",customer:e.customer.id,invoice:e.invoice.id},w,t())}(e,this.lineMapper);this.setState({lockUpdate:!0,data:t})}},{key:"updateLines",value:function(e){(e.length>0||this.state.data[w].length>0)&&this.setState({data:Object(b.a)({},this.state.data,Object(p.a)({},w,e))})}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"handleLineSave",value:function(e){this.setState({data:Object(b.a)({},this.state.data,Object(p.a)({},w,e))})}},{key:"render",value:function(){return console.log(this.props.data),c.a.createElement(h.a,{className:"border-0"},c.a.createElement(R.a,{className:"border-0"},this.props.title),c.a.createElement(J.a,null,c.a.createElement(N.a,{onSubmit:this.handleSubmit},c.a.createElement(d.a,null,c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput({name:"status",label:"Status",disabled:!0})),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput({name:"date",label:"Date",type:"date",disabled:!0})),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput({name:"document_number",label:"Document Number",disabled:!0})),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput({name:"description",label:"Description",type:"textarea",disabled:!0})),c.a.createElement(m.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea")),c.a.createElement(m.a,{md:12,sm:12,xs:12},c.a.createElement(A.b,{columns:(e=this.props.options,[{tag:"debit",label:"Debit",type:"number"},{tag:"credit",label:"Credit",type:"number"},{tag:"description",label:"Description"},{tag:"account",label:"Account",type:"select",options:e.COAs,optionsFrom:"server"},{tag:"remarks",label:"Remarks"}]),disabled:!0,data:this.state.data[w],callback:this.updateLines,startForm:this.props.isAdd,schema:q})),c.a.createElement(m.a,{size:"xl",align:"right"},this.renderButton("Save"))))));var e}}]),a}(P.a),M=a(1622);function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(_.a)(this,a)}}var z=function(e){Object(k.a)(a,e);var t=G(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).initialState={data:{id:"",posting_date:""},errors:{}},n.state=n.initialState,n.schema={id:x.a.string().allow("").optional(),posting_date:x.a.string().required().label("Posting Date")},n}return Object(S.a)(a,[{key:"populateState",value:function(e){var t=Object(b.a)({},this.state,{data:{id:e.id?e.id:"",posting_date:e.posting_date?e.posting_date:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){return c.a.createElement(h.a,{className:"border-0"},c.a.createElement(R.a,{className:"border-0"},this.props.title),c.a.createElement(J.a,null,c.a.createElement(N.a,{onSubmit:this.handleSubmit},c.a.createElement(d.a,null,c.a.createElement(m.a,{md:4,sm:12,xs:12},this.renderInput({name:"posting_date",label:"Posting Date",type:"date"}))),c.a.createElement(M.a,{align:"center"},this.renderButton("Post")))))}}]),a}(P.a),V=a(1573),U=a(1582),H=a(17),W=a(1581),K=a(53),Q=a(103),X=function(e){var t=e.cashReceiptJournals,a=e.doneAdd,i=e.doneEdit,s=e.editCashReceiptJournal,u=e.donePatch,o=e.postCashReceiptJournal,l=(e.approveCashReceiptJournal,e.deleteCashReceiptJournal),d=e.COAs,m=Object(r.useReducer)(W.c,W.b),p=Object(n.a)(m,2),j=p[0],E=p[1],g=[{path:"date",label:"Posting Date"},{path:"sales_order.order_number",label:"Sales Order No."},{path:"customer.document_number",label:"Customer Number"},{path:"customer.name",label:"Customer Name"},{key:"view",content:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(W.a)({type:"VIEW",Component:L,data:e,title:"View Cash Receipt Journal",options:{COAs:d}},E)}},c.a.createElement(H.M,null)),Boolean(e.status===Q.a.OPEN)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"success",disabled:!Boolean(e.status===Q.a.OPEN),onClick:function(){Object(W.a)({type:"EDIT",Component:z,data:e,submit:o,title:"Post Cash Receipt Journal",options:{COAs:d}},E)}},"Post"):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.OPEN)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"warning",disabled:!Boolean(e.status===Q.a.OPEN),onClick:function(){Object(W.a)({type:"EDIT",Component:L,data:e,submit:s,title:"Edit Cash Receipt Journal",options:{COAs:d}},E)}},c.a.createElement(H.s,null)):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"warning",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){Object(W.a)({type:"EDIT",Component:L,data:e,submit:s,title:"Edit Cash Receipt Journal",options:{COAs:d}},E)}},c.a.createElement(H.s,null)):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"danger",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){Object(W.a)({type:"DELETE",deleteOptions:{okCallback:y,title:"Are you sure?",id:e.id,message:""}},E)}},c.a.createElement(H.p,null)):c.a.createElement(c.a.Fragment,null))}}],y=function(e){l(e)};return Object(r.useEffect)(function(){(a||i||u)&&Object(W.a)({type:"CLOSE"},E)},[a,i||u]),c.a.createElement("div",null,c.a.createElement(v.a,{data:j.data,openModal:j.openModal,component:j.Component,toggle:W.a,dispatch:E,title:j.title}),c.a.createElement(O.a,null,c.a.createElement(h.a,{className:"border-0"},c.a.createElement(V.a,{title:"Cash Recept Journal",columns:g,data:Object(U.a)(t.map(function(e){return Object(b.a)({},e,{customer_name:e.customer.customer_name,approved_date:Object(K.d)(e.approved_date)})}))}))))},Y=a(142),Z=a(177),$=a(102),ee=a(19),te=a(44),ae=a(54),ne=a(36),re=a(1557),ce=a(1580),ie=Object(Z.b)(function(e){return{fetchStatus:Object(Y.k)(e),addStatus:Object(Y.g)(e),editStatus:Object(Y.j)(e),patchStatus:Object(Y.l)(e),deleteStatus:Object(Y.i)(e),cashReceiptJournals:Object(Y.h)(e),COAs:Object(te.h)(e)}},function(e){return{fetchCashReceiptJournals:function(){return e(Object(Y.c)())},addCashReceiptJournal:function(t){return e(Object(Y.a)(t))},editCashReceiptJournal:function(t){return e(Object(Y.b)(t))},patchCashReceiptJournal:function(t){return e(Object(Y.d)(t))},deleteCashReceiptJournal:function(t){return e(Object(Y.e)(t))}}})(function(e){var t=e.cashReceiptJournals,a=e.fetchStatus,i=e.addStatus,s=e.fetchCashReceiptJournals,u=e.addCashReceiptJournal,o=e.editStatus,l=e.editCashReceiptJournal,d=e.patchStatus,m=e.patchCashReceiptJournal,b=e.deleteStatus,f=e.deleteCashReceiptJournal,h=e.COAs,O=Object(r.useState)(!0),v=Object(n.a)(O,2),j=v[0],E=v[1],g=Object(r.useState)(!0),y=Object(n.a)(g,2),S=y[0],C=y[1],k=Object(r.useState)(!0),_=Object(n.a)(k,2),D=_[0],R=_[1],J=Object(r.useState)(!0),N=Object(n.a)(J,2),P=N[0],A=N[1],T=Object(r.useState)(!0),x=Object(n.a)(T,2),F=x[0],I=x[1];Object(r.useEffect)(function(){t.length>0&&U(t)},[t]);var q=Object(r.useState)("document_number"),B=Object(n.a)(q,2),L=B[0],M=B[1],G=Object(r.useState)([]),z=Object(n.a)(G,2),V=z[0],U=z[1],H=Object(r.useContext)(ae.b).dispatch,W=Object(r.useContext)(ae.c).searchValue,Y=function(){var e=Object(r.useState)(L),t=Object(n.a)(e,2),a=t[0],i=t[1];return Object(r.useEffect)(function(){return M(a)},[a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{type:"select",onChange:function(e){var t=e.currentTarget.value;return i(t)}},c.a.createElement("option",{value:"document_number"},"By Document Number")))};Object(r.useEffect)(function(){Object(ne.e)({},H,!1),Object(ne.a)({},H,Y)},[H]),Object(r.useEffect)(function(){var e;e=Object(ce.b)(t,L,W,"document_number"===L),U(e)},[W,U,L]),Object(r.useEffect)(function(){E(!1),s()},[s,E]),Object(r.useEffect)(function(){a.status!==ee.e.failure||j||($.toast.error("Failed Fetching Cash Receipt Journal"),E(!0))},[a,E]),Object(r.useEffect)(function(){var e=i.status;e!==ee.e.failure||S?e!==ee.e.success||S||($.toast.success("Saved Cash Receipt Journal"),C(!0)):C(!0)},[i,C]),Object(r.useEffect)(function(){var e=o.status;e!==ee.e.failure||D?e!==ee.e.success||D||($.toast.success("Edited Cash Receipt Journal"),R(!0)):R(!0)},[o,R]),Object(r.useEffect)(function(){var e=d.status,t=d.response;e!==ee.e.failure||P?e!==ee.e.success||P||($.toast.success("".concat(t.status," Cash Receipt Journal")),A(!0)):A(!0)},[d,A]),Object(r.useEffect)(function(){var e=b.status;e!==ee.e.failure||F?e!==ee.e.success||F||($.toast.success("Deleted Cash Receipt Journal"),I(!0)):I(!0)},[b,I]);return c.a.createElement(X,{cashReceiptJournals:V,doneAdd:i.status===ee.e.success&&!S,addCashReceiptJournal:function(){C(!1),u({})},doneEdit:o.status===ee.e.success&&!D,editCashReceiptJournal:function(e){R(!1);var t=Object(p.a)({id:e.id,date:e.date,document_number:e.document_number,description:e.description,remarks:e.remarks,customer:e.customer,invoice:e.invoice},w,e[w].map(function(e){return{debit:e.debit,credit:e.credit,description:e.description,account_balance:e.account_balance,account:e.account,remarks:e.remarks}}));l(t)},donePatch:d.status===ee.e.success&&!P,postCashReceiptJournal:function(e){A(!1);var t={id:e.id,status:Q.a.POSTED,posting_date:e.posting_date?e.posting_date:""};m(t)},approveCashReceiptJournal:function(e){A(!1);var t={id:e.id,status:Q.a.APPROVED,approved_date:K.n};m(t)},doneDelete:b.status===ee.e.success&&!F,deleteCashReceiptJournal:function(e){I(!1),f(e)},COAs:h})}),se="general_journal_lines",ue=Object(p.a)({id:x.a.any().allow("").optional(),status:x.a.string().required().label("Enter this one"),date:x.a.string().required().label("Enter this one"),document_number:x.a.string().required().label("Enter this one"),description:x.a.string().required().label("Enter this one"),remarks:x.a.string().allow("").optional(),document_type:x.a.string().required().label("Enter this one")},se,x.a.array().items(x.a.object()).min(1)),oe={data:Object(p.a)({id:"",status:"",date:"",document_number:"",description:"",remarks:null,document_type:""},se,[]),errors:{},selectedLine:"",lineCounter:1},le={_id:x.a.any().allow("").optional(),debit:x.a.number().required().label("Debit is required"),credit:x.a.number().required().label("Credit is required"),description:x.a.string().required().label("Description is required"),account:x.a.string().required().label("Account is required"),remarks:x.a.string().allow("").optional()};function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(_.a)(this,a)}}var me=function(e){Object(k.a)(a,e);var t=de(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).doSubmit=Object(g.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.submit(n.state.data);case 1:case"end":return e.stop()}},e)})),n.initialState=oe,n.state=JSON.parse(JSON.stringify(n.initialState)),n.schema=ue,n.handleLineSave=n.handleLineSave.bind(Object(C.a)(n)),n.populateState=n.populateState.bind(Object(C.a)(n)),n.updateLines=n.updateLines.bind(Object(C.a)(n)),n.lineMapper=n.lineMapper.bind(Object(C.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"lineMapper",value:function(){return this.props.isEdit||this.props.isView?function(e){return e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:se].map(function(e){return{_id:e.id,debit:Number(e.debit),credit:Number(e.credit),description:e.description,account:e.account_detail.id,remarks:e.remarks}})}(this.props.data,"general_journal_lines"):[]}},{key:"populateState",value:function(e){var t=function(e,t){return Object(p.a)({id:e.id,status:e.status,date:new Date(e.date).toISOString(),document_number:e.document_number,description:e.description,remarks:"null"!==String(e.remarks)?e.remarks:"",document_type:e.document_type},se,t())}(e,this.lineMapper);this.setState({lockUpdate:!0,data:t})}},{key:"updateLines",value:function(e){(e.length>0||this.state.data[se].length>0)&&this.setState({data:Object(b.a)({},this.state.data,Object(p.a)({},se,e))})}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"handleLineSave",value:function(e){this.setState({data:Object(b.a)({},this.state.data,Object(p.a)({},se,e))})}},{key:"render",value:function(){var e;this.props.options.documentTypes;return c.a.createElement(h.a,{className:"border-0"},c.a.createElement(J.a,null,c.a.createElement(N.a,{onSubmit:this.handleSubmit},c.a.createElement(d.a,null,c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderSelect({name:"status",label:"Status",options:["Open","Approved","Posted"]})),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput({name:"date",label:"Date",type:"datetime-local"})),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput({name:"description",label:"Description",type:"textarea"})),c.a.createElement(m.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea")),c.a.createElement(m.a,{md:12,sm:12,xs:12},c.a.createElement(A.b,{columns:(e=this.props.options,[{tag:"account",label:"Account",type:"select",options:e.COAs,optionsFrom:"server"},{tag:"description",label:"Description"},{tag:"debit",label:"Debit",type:"number"},{tag:"credit",label:"Credit",type:"number"},{tag:"remarks",label:"Remarks"}]),data:this.state.data[se],callback:this.updateLines,startForm:this.props.isAdd,schema:le})),c.a.createElement(m.a,{size:"xl",align:"right"},this.renderButton("Save"))))))}}]),a}(P.a);function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(_.a)(this,a)}}var be=function(e){Object(k.a)(a,e);var t=pe(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).initialState={data:{id:"",posting_date:""},errors:{}},n.state=n.initialState,n.schema={id:x.a.string().allow("").optional(),posting_date:x.a.string().required().label("Posting Date")},n}return Object(S.a)(a,[{key:"populateState",value:function(e){var t=Object(b.a)({},this.state,{data:{id:e.id?e.id:"",posting_date:e.posting_date?e.posting_date:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){return c.a.createElement(h.a,{className:"border-0"},c.a.createElement(R.a,{className:"border-0"},this.props.title),c.a.createElement(J.a,null,c.a.createElement(N.a,{onSubmit:this.handleSubmit},c.a.createElement(d.a,null,c.a.createElement(m.a,{md:4,sm:12,xs:12},this.renderInput({name:"posting_date",label:"Posting Date",type:"date"}))),c.a.createElement(M.a,{align:"center"},this.renderButton("Post")))))}}]),a}(P.a),fe=function(e){var t=e.generalJournals,a=e.doneAdd,i=e.doneEdit,s=e.addGeneralJournal,u=e.editGeneralJournal,o=e.donePatch,l=e.postGeneralJournal,d=e.deleteGeneralJournal,p=e.COAs,b=e.documentTypes,j=Object(r.useReducer)(W.c,W.b),E=Object(n.a)(j,2),g=E[0],y=E[1],S=[{path:"general_journal_lines[0].account_detail.account_number",label:"Account Number"},{path:"general_journal_lines[0].debit",label:"Debit"},{path:"general_journal_lines[0].credit",label:"Credit"},{path:"description",label:"Description"},{path:"reference_number",label:"Reference Number"},{key:"view",content:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(W.a)({type:"VIEW",Component:me,data:e,title:"View General Journal",options:{COAs:p,documentTypes:b}},y)}},c.a.createElement(H.M,null)),Boolean(e.status===Q.a.OPEN)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"success",disabled:!Boolean(e.status===Q.a.OPEN),onClick:function(){Object(W.a)({type:"EDIT",Component:be,data:e,submit:l,title:"Post General Journal",options:{COAs:p,documentTypes:b}},y)}},"Post"):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.OPEN)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"warning",disabled:!Boolean(e.status===Q.a.OPEN),onClick:function(){Object(W.a)({type:"EDIT",Component:me,data:e,submit:u,title:"Edit General Journal",options:{COAs:p,documentTypes:b}},y)}},c.a.createElement(H.s,null)):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"warning",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){Object(W.a)({type:"EDIT",Component:me,data:e,submit:u,title:"Edit General Journal",options:{COAs:p,documentTypes:b}},y)}},c.a.createElement(H.s,null)):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"danger",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){Object(W.a)({type:"DELETE",deleteOptions:{okCallback:C,title:"Are you sure?",id:e.id,message:""}},y)}},c.a.createElement(H.p,null)):c.a.createElement(c.a.Fragment,null))}}],C=function(e){d(e)};return Object(r.useEffect)(function(){(a||i||o)&&Object(W.a)({type:"CLOSE"},y)},[a,i||o]),c.a.createElement("div",null,c.a.createElement(O.a,null,c.a.createElement(v.a,{data:g.data,openModal:g.openModal,component:g.Component,toggle:W.a,dispatch:y,title:g.title}),c.a.createElement(m.a,{align:"right",className:"mb-1 pl-3 pr-3"},c.a.createElement(f.a,{size:"sm",outline:!0,color:"primary",onClick:function(){Object(W.a)({type:"ADD",Component:me,data:{},submit:s,title:"Add General Journal",options:{COAs:p,documentTypes:b}},y)}},"New General Journal")),c.a.createElement(h.a,{className:"border-0"},c.a.createElement(V.a,{title:"General Journals",columns:S,data:t}))))},he=a(144),Oe=a(93),ve=Object(Z.b)(function(e){return{fetchStatus:Object(he.j)(e),addStatus:Object(he.g)(e),editStatus:Object(he.i)(e),patchStatus:Object(he.l)(e),deleteStatus:Object(he.h)(e),generalJournals:Object(he.k)(e),COAs:Object(te.h)(e),documentTypes:Object(Oe.c)(e)}},function(e){return{fetchGeneralJournals:function(){return e(Object(he.c)())},addGeneralJournal:function(t){return e(Object(he.a)(t))},editGeneralJournal:function(t){return e(Object(he.b)(t))},patchGeneralJournal:function(t){return e(Object(he.d)(t))},deleteGeneralJournal:function(t){return e(Object(he.e)(t))}}})(function(e){var t=e.generalJournals,a=e.fetchStatus,i=e.addStatus,s=e.fetchGeneralJournals,u=e.addGeneralJournal,o=e.editStatus,l=e.editGeneralJournal,d=e.patchStatus,m=e.patchGeneralJournal,f=e.deleteStatus,h=e.deleteGeneralJournal,O=e.COAs,v=e.documentTypes,j=Object(r.useState)(!0),E=Object(n.a)(j,2),g=E[0],y=E[1],S=Object(r.useState)(!0),C=Object(n.a)(S,2),k=C[0],_=C[1],D=Object(r.useState)(!0),R=Object(n.a)(D,2),J=R[0],N=R[1],P=Object(r.useState)(!0),A=Object(n.a)(P,2),T=A[0],x=A[1],w=Object(r.useState)(!0),F=Object(n.a)(w,2),I=F[0],q=F[1];Object(r.useEffect)(function(){t.length>0&&H(t)},[t]);var B=Object(r.useState)("document_number"),L=Object(n.a)(B,2),M=L[0],G=L[1],z=Object(r.useState)([]),V=Object(n.a)(z,2),U=V[0],H=V[1],W=Object(r.useContext)(ae.b).dispatch,X=Object(r.useContext)(ae.c).searchValue,Y=function(){var e=Object(r.useState)(M),t=Object(n.a)(e,2),a=t[0],i=t[1];return Object(r.useEffect)(function(){return G(a)},[a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(re.a,{type:"select",onChange:function(e){var t=e.currentTarget.value;return i(t)}},c.a.createElement("option",{value:"document_number"},"By Document Number")))};Object(r.useEffect)(function(){Object(ne.e)({},W,!1),Object(ne.a)({},W,Y)},[W]),Object(r.useEffect)(function(){var e;e=Object(ce.b)(t,M,X,"document_number"===M),H(e)},[X,H,M]),Object(r.useEffect)(function(){y(!1),s()},[s,y]),Object(r.useEffect)(function(){a.status!==ee.e.failure||g||($.toast.error("Failed Fetching Cash Receipt Journal"),y(!0))},[a,y]),Object(r.useEffect)(function(){var e=i.status;e!==ee.e.failure||k?e!==ee.e.success||k||($.toast.success("Saved Cash Receipt Journal"),_(!0)):_(!0)},[i,_]),Object(r.useEffect)(function(){var e=o.status;e!==ee.e.failure||J?e!==ee.e.success||J||($.toast.success("Edited Cash Receipt Journal"),N(!0)):N(!0)},[o,N]),Object(r.useEffect)(function(){var e=d.status,t=d.response;e!==ee.e.failure||T?e!==ee.e.success||T||($.toast.success("".concat(t.status," Cash Receipt Journal")),x(!0)):x(!0)},[d,x]),Object(r.useEffect)(function(){var e=f.status;e!==ee.e.failure||I?e!==ee.e.success||I||($.toast.success("Deleted Cash Receipt Journal"),q(!0)):q(!0)},[f,q]);return c.a.createElement(fe,{generalJournals:U,doneAdd:i.status===ee.e.success&&!k,addGeneralJournal:function(e){_(!1);var t=Object(b.a)({},e);u(t)},doneEdit:o.status===ee.e.success&&!J,editGeneralJournal:function(e){N(!1);var t=Object(p.a)({id:e.id,date:e.date,document_number:e.document_number,description:e.description,remarks:e.remarks,customer:e.customer,invoice:e.invoice},se,e[se].map(function(e){return{debit:e.debit,credit:e.credit,description:e.description,account_balance:e.account_balance,account:e.account,remarks:e.remarks}}));l(t)},donePatch:d.status===ee.e.success&&!T,postGeneralJournal:function(e){x(!1);var t={id:e.id,status:Q.a.POSTED,posting_date:e.posting_date?e.posting_date:""};m(t)},approveGeneralJournal:function(e){x(!1);var t={id:e.id,status:Q.a.APPROVED,approved_date:K.n};m(t)},doneDelete:f.status===ee.e.success&&!I,deleteGeneralJournal:function(e){q(!1),h(e)},COAs:O,documentTypes:v})}),je=Object(p.a)({id:x.a.any().allow("").optional(),status:x.a.string().required().label("Enter this one"),date:x.a.string().required().label("Enter this one"),document_number:x.a.string().required().label("Enter this one"),description:x.a.string().required().label("Enter this one"),remarks:x.a.string().allow("").optional(),vendor:x.a.string().required().label("Enter this one"),invoice:x.a.string().required().label("Enter this one")},"cash_payment_journal_lines",x.a.array().items(x.a.object()).min(1)),Ee={data:Object(p.a)({id:"",status:"",date:"",document_number:"",description:"",remarks:null,vendor:"",invoice:""},"cash_payment_journal_lines",[]),errors:{},selectedLine:"",lineCounter:1},ge={_id:x.a.any().allow("").optional(),debit:x.a.number().required().label("Field is required"),credit:x.a.number().required().label("Field is required"),description:x.a.number().required().label("Field is required"),account_balance:x.a.number().required().label("Field is required"),account:x.a.number().required().label("Field is required"),remarks:x.a.number().allow("").optional()},ye=function(e){e.COAs;return[{tag:"account",label:"Account",type:"text"},{tag:"description",label:"Description"},{tag:"debit",label:"Debit",type:"number"},{tag:"credit",label:"Credit",type:"number"},{tag:"account_balance",label:"Account Balance",type:"number"},{tag:"remarks",label:"Remarks"}]};function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(_.a)(this,a)}}var Ce=function(e){Object(k.a)(a,e);var t=Se(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).doSubmit=Object(g.a)(E.a.mark(function e(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.submit(n.state.data);case 1:case"end":return e.stop()}},e)})),n.initialState=Ee,n.state=JSON.parse(JSON.stringify(n.initialState)),n.schema=je,n.handleLineSave=n.handleLineSave.bind(Object(C.a)(n)),n.populateState=n.populateState.bind(Object(C.a)(n)),n.updateLines=n.updateLines.bind(Object(C.a)(n)),n.lineMapper=n.lineMapper.bind(Object(C.a)(n)),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"lineMapper",value:function(){return this.props.isEdit||this.props.isView?function(e){return e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cash_payment_journal_lines"].map(function(e){return{_id:e.id,debit:Number(e.debit),credit:Number(e.credit),description:e.description,account_balance:Number(e.account?e.account.balance:0),account:e.account?e.account.name:"",remarks:e.remarks}})}(this.props.data,"cash_payment_journal_lines"):[]}},{key:"populateState",value:function(e){var t=function(e,t){return Object(p.a)({id:e.id,status:e.status,date:e.date,document_number:e.document_number,description:e.description,remarks:e.remarks,vendor:e.vendor,invoice:e.invoice},"cash_payment_journal_lines",t())}(e,this.lineMapper);this.setState({lockUpdate:!0,data:t})}},{key:"updateLines",value:function(e){(e.length>0||this.state.data.cash_payment_journal_lines.length>0)&&this.setState({data:Object(b.a)({},this.state.data,Object(p.a)({},"cash_payment_journal_lines",e))})}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"handleLineSave",value:function(e){this.setState({data:Object(b.a)({},this.state.data,Object(p.a)({},"cash_payment_journal_lines",e))})}},{key:"render",value:function(){return c.a.createElement(h.a,{className:"border-0"},c.a.createElement(R.a,{className:"border-0"},this.props.title),c.a.createElement(J.a,null,c.a.createElement(N.a,{onSubmit:this.handleSubmit},c.a.createElement(d.a,null,c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderSelect("status","Status",["Open","Approved","Posted"])),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput("date","Date","date")),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput("document_number","Document Number")),c.a.createElement(m.a,{md:3,sm:12,xs:12},this.renderInput("description","Description","textarea")),c.a.createElement(m.a,{md:12,sm:12,xs:12},this.renderInput("remarks","Remarks","textarea")),c.a.createElement(m.a,{md:12,sm:12,xs:12},c.a.createElement(A.b,{columns:ye(this.props.options),disabled:this.props.disabled,data:this.state.data.cash_payment_journal_lines,callback:this.updateLines,startForm:this.props.isAdd,schema:ge})),c.a.createElement(m.a,{size:"xl",align:"right"},this.renderButton("Save"))))))}}]),a}(P.a);function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(D.a)(e);if(t){var r=Object(D.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(_.a)(this,a)}}var _e=function(e){Object(k.a)(a,e);var t=ke(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).initialState={data:{id:"",posting_date:""},errors:{}},n.state=n.initialState,n.schema={id:x.a.string().allow("").optional(),posting_date:x.a.string().required().label("Posting Date")},n}return Object(S.a)(a,[{key:"populateState",value:function(e){var t=Object(b.a)({},this.state,{data:{id:e.id?e.id:"",posting_date:e.posting_date?e.posting_date:""},lockUpdate:!0});this.setState(t)}},{key:"componentDidUpdate",value:function(){!this.props.isEdit&&!this.props.isView||this.state.lockUpdate||this.populateState(this.props.data)}},{key:"doSubmit",value:function(){this.props.submit(this.state.data)}},{key:"render",value:function(){return c.a.createElement(h.a,{className:"border-0"},c.a.createElement(R.a,{className:"border-0"},this.props.title),c.a.createElement(J.a,null,c.a.createElement(N.a,{onSubmit:this.handleSubmit},c.a.createElement(d.a,null,c.a.createElement(m.a,{md:4,sm:12,xs:12},this.renderInput({name:"posting_date",label:"Posting Date",type:"date"}))),c.a.createElement(M.a,{align:"center"},this.renderButton("Post")))))}}]),a}(P.a),De=function(e){var t=e.cashPaymentJournals,a=e.doneAdd,i=e.doneEdit,s=e.editCashPaymentJournal,u=e.donePatch,o=e.approveCashPaymentJournal,l=e.postCashPaymentJournal,d=e.deleteCashPaymentJournal,m=e.COAs,p=Object(r.useReducer)(W.c,W.b),j=Object(n.a)(p,2),E=j[0],g=j[1],y=[{path:"date",label:"Date"},{path:"document_number",label:"Document Number"},{path:"remarks",label:"Remarks"},{path:"vendor.name",label:"Vendor"},{path:"invoice.name",label:"Invoice"},{key:"view",content:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"info",onClick:function(){Object(W.a)({type:"VIEW",Component:Ce,data:e,title:"View Cash Payment Journal",options:{COAs:m}},g)}},c.a.createElement(H.M,null)),Boolean(e.status===Q.a.OPEN)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"warning",disabled:!Boolean(e.status===Q.a.OPEN),onClick:function(){Object(W.a)({type:"EDIT",Component:_e,data:e,submit:l,title:"Post Cash Payment Journal",options:{COAs:m}},g)}},"Post"):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"success",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){return o(e)}},"Approve"):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"warning",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){Object(W.a)({type:"EDIT",Component:Ce,data:e,submit:s,title:"Edit Cash Payment Journal",options:{COAs:m}},g)}},c.a.createElement(H.s,null)):c.a.createElement(c.a.Fragment,null),Boolean(e.status===Q.a.DRAFTED)?c.a.createElement(f.a,{className:"m-1",size:"sm",outline:!0,color:"danger",disabled:!Boolean(e.status===Q.a.DRAFTED),onClick:function(){Object(W.a)({type:"DELETE",deleteOptions:{okCallback:S,title:"Are you sure?",id:e.id,message:""}},g)}},c.a.createElement(H.p,null)):c.a.createElement(c.a.Fragment,null))}}],S=function(e){d(e)};return Object(r.useEffect)(function(){(a||i||u)&&Object(W.a)({type:"CLOSE"},g)},[a,i||u]),c.a.createElement("div",null,c.a.createElement(v.a,{data:E.data,openModal:E.openModal,component:E.Component,toggle:W.a,dispatch:g,title:E.title}),c.a.createElement(O.a,null,c.a.createElement(h.a,{className:"border-0"},c.a.createElement(V.a,{title:"Cash Payment Journals",columns:y,data:Object(U.a)(t.map(function(e){return Object(b.a)({},e,{date:Object(K.d)(e.date)})}))}))))},Re=a(143),Je=Object(Z.b)(function(e){return{fetchStatus:Object(Re.k)(e),addStatus:Object(Re.g)(e),editStatus:Object(Re.j)(e),patchStatus:Object(Re.l)(e),deleteStatus:Object(Re.i)(e),cashPaymentJournals:Object(Re.h)(e),COAs:Object(te.h)(e)}},function(e){return{fetchCashPaymentJournals:function(){return e(Object(Re.c)())},addCashPaymentJournal:function(t){return e(Object(Re.a)(t))},editCashPaymentJournal:function(t){return e(Object(Re.b)(t))},patchCashPaymentJournal:function(t){return e(Object(Re.d)(t))},deleteCashPaymentJournal:function(t){return e(Object(Re.e)(t))}}})(function(e){var t=e.cashPaymentJournals,a=e.fetchStatus,i=e.addStatus,s=e.fetchCashPaymentJournals,u=e.addCashPaymentJournal,o=e.editStatus,l=e.editCashPaymentJournal,d=e.patchStatus,m=e.patchCashPaymentJournal,b=e.deleteStatus,f=e.deleteCashPaymentJournal,h=e.COAs,O=Object(r.useState)(!0),v=Object(n.a)(O,2),j=v[0],E=v[1],g=Object(r.useState)(!0),y=Object(n.a)(g,2),S=y[0],C=y[1],k=Object(r.useState)(!0),_=Object(n.a)(k,2),D=_[0],R=_[1],J=Object(r.useState)(!0),N=Object(n.a)(J,2),P=N[0],A=N[1],T=Object(r.useState)(!0),x=Object(n.a)(T,2),w=x[0],F=x[1];Object(r.useEffect)(function(){E(!1),s()},[s,E]),Object(r.useEffect)(function(){a.status!==ee.e.failure||j||($.toast.error("Failed Fetching Cash Payment Journal"),E(!0))},[a,E]),Object(r.useEffect)(function(){var e=i.status;e!==ee.e.failure||S?e!==ee.e.success||S||($.toast.success("Saved Cash Payment"),C(!0)):C(!0)},[i,C]),Object(r.useEffect)(function(){var e=o.status;e!==ee.e.failure||D?e!==ee.e.success||D||($.toast.success("Edited Cash Payment"),R(!0)):R(!0)},[o,R]),Object(r.useEffect)(function(){var e=d.status,t=d.response;e!==ee.e.failure||P?e!==ee.e.success||P||($.toast.success("".concat(t.status," Cash Payment")),A(!0)):A(!0)},[d,A]),Object(r.useEffect)(function(){var e=b.status;e!==ee.e.failure||w?e!==ee.e.success||w||($.toast.success("Deleted Cash Payment"),F(!0)):F(!0)},[b,F]);return c.a.createElement(De,{cashPaymentJournals:t,doneAdd:i.status===ee.e.success&&!S,addCashPaymentJournal:function(){C(!1),u({})},doneEdit:o.status===ee.e.success&&!D,editCashPaymentJournal:function(e){R(!1);var t=Object(p.a)({id:e.id,status:e.status,date:e.date,document_number:e.document_number,description:e.description,remarks:e.remarks,vendor:e.vendor,invoice:e.invoice},"cash_payment_journal_lines",e.cash_payment_journal_lines.map(function(e){return{debit:e.debit,credit:e.credit,description:e.description,account_balance:e.account_balance,account:e.account,remarks:e.remarks}}));l(t)},donePatch:d.status===ee.e.success&&!P,approveCashPaymentJournal:function(e){A(!1);var t={id:e.id,status:"Approved",posting_date:"2020-01-01"};m(t)},postCashPaymentJournal:function(e){A(!1);var t={id:e.id,status:"Posted",posting_date:e.posting_date?e.posting_date:""};m(t)},doneDelete:b.status===ee.e.success&&!w,deleteCashPaymentJournal:function(e){F(!1),f(e)},COAs:h})});t.default=function(){var e=Object(r.useState)("1"),t=Object(n.a)(e,2),a=t[0],p=t[1],b=function(e){a!==e&&p(e)};return c.a.createElement("div",null,c.a.createElement(O.a,null,c.a.createElement(i.a,{tabs:!0,className:"mb-2"},c.a.createElement(s.a,null,c.a.createElement(u.a,{className:"1"===a?"activepageTabBlue":"notactivePageTabBlue",onClick:function(){b("1")}},"General Journal")),c.a.createElement(s.a,null,c.a.createElement(u.a,{className:"2"===a?"activepageTabBlue":"notactivePageTabBlue",onClick:function(){b("2")}},"Cash Receipt")),c.a.createElement(s.a,null,c.a.createElement(u.a,{className:"3"===a?"activepageTabBlue":"notactivePageTabBlue",onClick:function(){b("3")}},"Cash Payment Journal"))),c.a.createElement(o.a,{activeTab:a},c.a.createElement(l.a,{tabId:"1"},c.a.createElement(d.a,null,c.a.createElement(m.a,null,c.a.createElement(ve,null)))),c.a.createElement(l.a,{tabId:"2"},c.a.createElement(d.a,null,c.a.createElement(m.a,null,c.a.createElement(ie,null)))),c.a.createElement(l.a,{tabId:"3"},c.a.createElement(d.a,null,c.a.createElement(m.a,null,c.a.createElement(Je,null)))))))}}}]);
//# sourceMappingURL=43.7932feef.chunk.js.map